exports.id=733,exports.ids=[733],exports.modules={2020:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(28366);class i extends r.RedisError{constructor(e,t){super(e),this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}t.default=i,i.defaultMessage="Failed to refresh slots cache."},2144:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=(0,s(80454).Debug)("AbstractConnector");class i{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,t=setTimeout(()=>{r("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(t)),e.end()}}}t.default=i},6239:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(91645),i=s(34631),o=s(80454),n=s(2144);class a extends n.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let t,{options:s}=this;return this.connecting=!0,"path"in s&&s.path?t={path:s.path}:(t={},"port"in s&&null!=s.port&&(t.port=s.port),"host"in s&&null!=s.host&&(t.host=s.host),"family"in s&&null!=s.family&&(t.family=s.family)),s.tls&&Object.assign(t,s.tls),new Promise((e,n)=>{process.nextTick(()=>{if(!this.connecting)return void n(Error(o.CONNECTION_CLOSED_ERROR_MSG));try{s.tls?this.stream=(0,i.connect)(t):this.stream=(0,r.createConnection)(t)}catch(e){n(e);return}this.stream.once("error",e=>{this.firstError=e}),e(this.stream)})})}}t.default=a},9768:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(39661),i=s(61063),o=s(78497),n=s(28354),a=s(92933),l=s(80454),c=s(19604);class u extends c.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster="Cluster"===this.redis.constructor.name||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(t=>{let s=e.scriptsSet[t];this._shaToScript[s.sha]=s,this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]}),e.addedBuiltinSet.forEach(t=>{this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]}),this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t});let t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if("exec"===this._queue[t].name&&Array.isArray(e[1])){let s=e[1].length;for(let r=0;r<s;r++){if(e[1][r]instanceof Error)continue;let i=this._queue[t-(s-r)];try{e[1][r]=i.transformReply(e[1][r])}catch(t){e[1][r]=t}}}if(this._result[t]=e,--this.replyPending)return;if(this.isCluster){let e,t=!0;for(let s=0;s<this._result.length;++s){let r=this._result[s][0],o=this._queue[s];if(r){if("exec"===o.name&&"EXECABORT Transaction discarded because of previous errors."===r.message)continue;if(e){if(e.name!==r.name||e.message!==r.message){t=!1;break}}else e={name:r.name,message:r.message}}else if(!o.inTransaction&&!((0,i.exists)(o.name)&&(0,i.hasFlag)(o.name,"readonly"))){t=!1;break}}if(e&&t){let t=this,s=e.message.split(" "),r=this._queue,i=!1;this._queue=[];for(let e=0;e<r.length;++e){if("ASK"===s[0]&&!i&&"asking"!==r[e].name&&(!r[e-1]||"asking"!==r[e-1].name)){let e=new a.default("asking");e.ignore=!0,this.sendCommand(e)}r[e].initPromise(),this.sendCommand(r[e]),i=r[e].inTransaction}let o=!0;void 0===this.leftRedirections&&(this.leftRedirections={});let n=function(){t.exec()},l=this.redis;if(l.handleError(e,this.leftRedirections,{moved:function(e,r){t.preferKey=r,l.slots[s[1]]=[r],l._groupsBySlot[s[1]]=l._groupsIds[l.slots[s[1]].join(";")],l.refreshSlotsCache(),t.exec()},ask:function(e,s){t.preferKey=s,t.exec()},tryagain:n,clusterDown:n,connectionClosed:n,maxRedirections:()=>{o=!1},defaults:()=>{o=!1}}),o)return}}let s=0;for(let e=0;e<this._queue.length-s;++e)this._queue[e+s].ignore&&(s+=1),this._result[e]=this._result[e+s];this.resolve(this._result.slice(0,this._result.length-s))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let t=this._queue.length;return e.pipelineIndex=t,e.promise.then(e=>{this.fillResult([null,e],t)}).catch(e=>{this.fillResult([e],t)}),this._queue.push(e),this}addBatch(e){let t,s,r;for(let i=0;i<e.length;++i)s=(t=e[i])[0],r=t.slice(1),this[s].apply(this,r);return this}}t.default=u;let h=u.prototype.multi;u.prototype.multi=function(){return this._transactions+=1,h.apply(this,arguments)};let d=u.prototype.execBuffer;u.prototype.execBuffer=(0,n.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),d.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead"),u.prototype.exec=function(e){let t;if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(l.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,o.default)(this.promise,e)),this.redis.delayUntilReady(t=>{if(t)return void this.reject(t);this.exec(e)}),this.promise;if(this._transactions>0)return this._transactions-=1,d.apply(this,arguments);if(this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,o.default)(this.promise,e)),this._queue.length||this.resolve([]),this.isCluster){let e=[];for(let t=0;t<this._queue.length;t++){let s=this._queue[t].getKeys();if(s.length&&e.push(s[0]),s.length&&0>r.generateMulti(s))return this.reject(Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(e.length){if((t=function(e,t){let s=r(t[0]),i=e._groupsBySlot[s];for(let s=1;s<t.length;s++)if(e._groupsBySlot[r(t[s])]!==i)return -1;return s}(this.redis,e))<0)return this.reject(Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=16384*Math.random()|0}let s=this;return function(){let e,r,i=s.replyPending=s._queue.length;s.isCluster&&(e={slot:t,redis:s.redis.connectionPool.nodes.all[s.preferKey]});let o="",n={isPipeline:!0,destination:s.isCluster?e:{redis:s.redis},write(e){"string"!=typeof e?(r||(r=[]),o&&(r.push(Buffer.from(o,"utf8")),o=""),r.push(e)):o+=e,--i||(r?(o&&r.push(Buffer.from(o,"utf8")),n.destination.redis.stream.write(Buffer.concat(r))):n.destination.redis.stream.write(o),i=s._queue.length,o="",r=void 0)}};for(let t=0;t<s._queue.length;++t)s.redis.sendCommand(s._queue[t],n,e);s.promise}(),this.promise}},13444:(e,t,s)=>{"use strict";s.d(t,{D4:()=>n,lF:()=>o});var r=s(4573),i=s(64763);let o=e=>r.Buffer.from(e).toString("base64url"),n=e=>new Uint8Array(r.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=i.D0.decode(t)),t}(e),"base64url"))},13941:(e,t,s)=>{"use strict";s.d(t,{$4:()=>f,BT:()=>d,Dm:()=>h,Dp:()=>c,Rb:()=>n,T0:()=>a,Ye:()=>l,_L:()=>u,h2:()=>y,i4:()=>r,ie:()=>i,n:()=>o,xb:()=>p});class r extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class i extends r{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,s="unspecified",r="unspecified"){super(e,{cause:{claim:s,reason:r,payload:t}}),this.claim=s,this.reason=r,this.payload=t}}class o extends r{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,s="unspecified",r="unspecified"){super(e,{cause:{claim:s,reason:r,payload:t}}),this.claim=s,this.reason=r,this.payload=t}}class n extends r{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class a extends r{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class l extends r{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class c extends r{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class u extends r{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class h extends r{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class d extends r{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class f extends r{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class p extends r{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class y extends r{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}},14875:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var r=s(77598),i=s(57975),o=s(52107),n=s(13941),a=s(63745),l=s(76650);let c=(0,i.promisify)(r.sign),u=async(e,t,s)=>{let i=(0,l.A)(e,t,"sign");if(e.startsWith("HS")){let t=r.createHmac(function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n.T0(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e),i);return t.update(s),t.digest()}return c((0,o.A)(e),s,(0,a.A)(e,i))}},16338:(e,t,s)=>{let r=s(83997),i=s(28354);t.init=function(e){e.inspectOpts={};let s=Object.keys(t.inspectOpts);for(let r=0;r<s.length;r++)e.inspectOpts[s[r]]=t.inspectOpts[s[r]]},t.log=function(...e){return process.stderr.write(i.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(s){let{namespace:r,useColors:i}=this;if(i){let t=this.color,i="\x1b[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${r} \u001B[0m`;s[0]=o+s[0].split("\n").join("\n"+o),s.push(i+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else s[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+r+" "+s[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)},t.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=s(79527);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let s=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[s]=r,e},{}),e.exports=s(21239)(t);let{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},16654:(e,t,s)=>{"use strict";s.d(t,{V:()=>O});var r=s(13444),i=s(77598),o=s(57975),n=s(52107),a=s(63745),l=s(14875),c=s(76650);let u=(0,o.promisify)(i.verify),h=async(e,t,s,r)=>{let o=(0,c.A)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,l.A)(e,o,r);try{return i.timingSafeEqual(s,t)}catch{return!1}}let h=(0,n.A)(e),d=(0,a.A)(e,o);try{return await u(h,r,d,s)}catch{return!1}};var d=s(13941),f=s(64763),p=s(39606),y=s(96277),m=s(36014),g=s(58200);let b=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};var S=s(70916),k=s(74528);async function v(e,t,s){let i,o;if(!(0,y.A)(e))throw new d.Ye("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new d.Ye('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new d.Ye("JWS Protected Header incorrect type");if(void 0===e.payload)throw new d.Ye("JWS Payload missing");if("string"!=typeof e.signature)throw new d.Ye("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,y.A)(e.header))throw new d.Ye("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{let t=(0,r.D4)(e.protected);n=JSON.parse(f.D0.decode(t))}catch{throw new d.Ye("JWS Protected Header is invalid")}if(!(0,p.A)(n,e.header))throw new d.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let a={...n,...e.header},l=(0,g.A)(d.Ye,new Map([["b64",!0]]),s?.crit,n,a),c=!0;if(l.has("b64")&&"boolean"!=typeof(c=n.b64))throw new d.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:u}=a;if("string"!=typeof u||!u)throw new d.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');let v=s&&b("algorithms",s.algorithms);if(v&&!v.has(u))throw new d.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(c){if("string"!=typeof e.payload)throw new d.Ye("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new d.Ye("JWS Payload must be a string or an Uint8Array instance");let w=!1;"function"==typeof t?(t=await t(n,e),w=!0,(0,m.I)(u,t,"verify"),(0,S.ll)(t)&&(t=await (0,k.Og)(t,u))):(0,m.I)(u,t,"verify");let E=(0,f.xW)(f.Rd.encode(e.protected??""),f.Rd.encode("."),"string"==typeof e.payload?f.Rd.encode(e.payload):e.payload);try{i=(0,r.D4)(e.signature)}catch{throw new d.Ye("Failed to base64url decode the signature")}if(!await h(u,t,i,E))throw new d.h2;if(c)try{o=(0,r.D4)(e.payload)}catch{throw new d.Ye("Failed to base64url decode the payload")}else o="string"==typeof e.payload?f.Rd.encode(e.payload):e.payload;let A={payload:o};return(void 0!==e.protected&&(A.protectedHeader=n),void 0!==e.header&&(A.unprotectedHeader=e.header),w)?{...A,key:t}:A}async function w(e,t,s){if(e instanceof Uint8Array&&(e=f.D0.decode(e)),"string"!=typeof e)throw new d.Ye("Compact JWS must be a string or Uint8Array");let{0:r,1:i,2:o,length:n}=e.split(".");if(3!==n)throw new d.Ye("Invalid Compact JWS");let a=await v({payload:i,protected:r,signature:o},t,s),l={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof t?{...l,key:a.key}:l}var E=s(61754),A=s(36733);let C=e=>e.toLowerCase().replace(/^application\//,""),T=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),_=(e,t,s={})=>{let r,i;try{r=JSON.parse(f.D0.decode(t))}catch{}if(!(0,y.A)(r))throw new d.Dp("JWT Claims Set must be a top-level JSON object");let{typ:o}=s;if(o&&("string"!=typeof e.typ||C(e.typ)!==C(o)))throw new d.ie('unexpected "typ" JWT header value',r,"typ","check_failed");let{requiredClaims:n=[],issuer:a,subject:l,audience:c,maxTokenAge:u}=s,h=[...n];for(let e of(void 0!==u&&h.push("iat"),void 0!==c&&h.push("aud"),void 0!==l&&h.push("sub"),void 0!==a&&h.push("iss"),new Set(h.reverse())))if(!(e in r))throw new d.ie(`missing required "${e}" claim`,r,e,"missing");if(a&&!(Array.isArray(a)?a:[a]).includes(r.iss))throw new d.ie('unexpected "iss" claim value',r,"iss","check_failed");if(l&&r.sub!==l)throw new d.ie('unexpected "sub" claim value',r,"sub","check_failed");if(c&&!T(r.aud,"string"==typeof c?[c]:c))throw new d.ie('unexpected "aud" claim value',r,"aud","check_failed");switch(typeof s.clockTolerance){case"string":i=(0,A.A)(s.clockTolerance);break;case"number":i=s.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:p}=s,m=(0,E.A)(p||new Date);if((void 0!==r.iat||u)&&"number"!=typeof r.iat)throw new d.ie('"iat" claim must be a number',r,"iat","invalid");if(void 0!==r.nbf){if("number"!=typeof r.nbf)throw new d.ie('"nbf" claim must be a number',r,"nbf","invalid");if(r.nbf>m+i)throw new d.ie('"nbf" claim timestamp check failed',r,"nbf","check_failed")}if(void 0!==r.exp){if("number"!=typeof r.exp)throw new d.ie('"exp" claim must be a number',r,"exp","invalid");if(r.exp<=m-i)throw new d.n('"exp" claim timestamp check failed',r,"exp","check_failed")}if(u){let e=m-r.iat;if(e-i>("number"==typeof u?u:(0,A.A)(u)))throw new d.n('"iat" claim timestamp check failed (too far in the past)',r,"iat","check_failed");if(e<0-i)throw new d.ie('"iat" claim timestamp check failed (it should be in the past)',r,"iat","check_failed")}return r};async function O(e,t,s){let r=await w(e,t,s);if(r.protectedHeader.crit?.includes("b64")&&!1===r.protectedHeader.b64)throw new d.Dp("JWTs MUST NOT use unencoded payload");let i={payload:_(r.protectedHeader,r.payload,s),protectedHeader:r.protectedHeader};return"function"==typeof t?{...i,key:r.key}:i}},17352:(e,t,s)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=s(81196):e.exports=s(16338)},17374:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(80454),i=s(52193),o=s(18139),n=s(22949),a=s(39661),l=(0,r.Debug)("cluster:subscriberGroup");class c{constructor(e){this.cluster=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,e.on("+node",e=>{this._addSubscriber(e)}),e.on("-node",e=>{this._removeSubscriber(e)}),e.on("refresh",()=>{this._refreshSlots(e)})}getResponsibleSubscriber(e){let t=this.clusterSlots[e][0];return this.shardedSubscribers.get(t)}addChannels(e){let t=a(e[0]);e.forEach(e=>{if(a(e)!=t)return -1});let s=this.channels.get(t);return s?this.channels.set(t,s.concat(e)):this.channels.set(t,e),[...this.channels.values()].flatMap(e=>e).length}removeChannels(e){let t=a(e[0]);e.forEach(e=>{if(a(e)!=t)return -1});let s=this.channels.get(t);if(s){let r=s.filter(t=>!e.includes(t));this.channels.set(t,r)}return[...this.channels.values()].flatMap(e=>e).length}stop(){for(let e of this.shardedSubscribers.values())e.stop()}start(){for(let e of this.shardedSubscribers.values())e.isStarted()||e.start()}_addSubscriber(e){let t=new o.default(e.options);if(t.addMasterNode(e)){let s=new i.default(t,this.cluster,!0),r=(0,n.getNodeKey)(e.options);return this.shardedSubscribers.set(r,s),s.start(),this._resubscribe(),this.cluster.emit("+subscriber"),s}return null}_removeSubscriber(e){let t=(0,n.getNodeKey)(e.options),s=this.shardedSubscribers.get(t);return s&&(s.stop(),this.shardedSubscribers.delete(t),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(e){if(this._slotsAreEqual(e.slots))l("Nothing to refresh because the new cluster map is equal to the previous one.");else{l("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let t=0;t<e.slots.length;t++){let s=e.slots[t][0];this.subscriberToSlotsIndex.has(s)||this.subscriberToSlotsIndex.set(s,[]),this.subscriberToSlotsIndex.get(s).push(Number(t))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(e.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,t)=>{let s=this.subscriberToSlotsIndex.get(t);s&&(e.associateSlotRange(s),s.forEach(t=>{let s=e.getInstance(),r=this.channels.get(t);r&&r.length>0&&s&&(s.ssubscribe(r),s.on("ready",()=>{s.ssubscribe(r)}))}))})}_slotsAreEqual(e){return void 0!==this.clusterSlots&&JSON.stringify(this.clusterSlots)===JSON.stringify(e)}}t.default=c},18139:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(94735),i=s(80454),o=s(22949),n=s(18991),a=(0,i.Debug)("cluster:connectionPool");class l extends r.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let t=this.nodes[e];return Object.keys(t).map(e=>t[e])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let t=Object.keys(this.nodes[e]),s=(0,i.sample)(t);return this.nodes[e][s]}addMasterNode(e){let t=(0,o.getNodeKey)(e.options),s=this.createRedisFromOptions(e,e.options.readOnly);return!e.options.readOnly&&(this.nodes.all[t]=s,this.nodes.master[t]=s,!0)}createRedisFromOptions(e,t){return new n.default((0,i.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:t},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,t=!1){let s,r=(0,o.getNodeKey)(e);return t=!!t,this.specifiedOptions[r]?Object.assign(e,this.specifiedOptions[r]):this.specifiedOptions[r]=e,this.nodes.all[r]?(s=this.nodes.all[r]).options.readOnly!==t&&(s.options.readOnly=t,a("Change role of %s to %s",r,t?"slave":"master"),s[t?"readonly":"readwrite"]().catch(i.noop),t?(delete this.nodes.master[r],this.nodes.slave[r]=s):(delete this.nodes.slave[r],this.nodes.master[r]=s)):(a("Connecting to %s as %s",r,t?"slave":"master"),s=this.createRedisFromOptions(e,t),this.nodes.all[r]=s,this.nodes[t?"slave":"master"][r]=s,s.once("end",()=>{this.removeNode(r),this.emit("-node",s,r),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",s,r),s.on("error",function(e){this.emit("nodeError",e,r)})),s}reset(e){a("Reset with %O",e);let t={};e.forEach(e=>{let s=(0,o.getNodeKey)(e);e.readOnly&&t[s]||(t[s]=e)}),Object.keys(this.nodes.all).forEach(e=>{t[e]||(a("Disconnect %s because the node does not hold any slot",e),this.nodes.all[e].disconnect(),this.removeNode(e))}),Object.keys(t).forEach(e=>{let s=t[e];this.findOrCreate(s,s.readOnly)})}removeNode(e){let{nodes:t}=this;t.all[e]&&(a("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}}t.default=l},18991:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(61063),i=s(94735),o=s(78497),n=s(39381),a=s(92933),l=s(96377),c=s(84177),u=s(87075),h=s(60305),d=s(53387),f=s(67448),p=s(80454),y=s(43405),m=s(19604),g=s(78745),b=s(76178),S=(0,p.Debug)("redis");class k extends m.default{constructor(e,t,s){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,t,s),i.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let e=new c.default(this.options);e.emitter=this,this.connector=e}else this.connector=new l.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([e,t])=>{this.defineCommand(e,t)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(g.noop)}static createClient(...e){return new k(...e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}connect(e){let t=new Promise((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(Error("Redis is already connecting/connected"));this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let r=this;(0,o.default)(this.connector.connect(function(e,t){r.silentEmit(e,t)}),function(i,o){if(i){r.flushQueue(i),r.silentEmit("error",i),t(i),r.setStatus("end");return}let n=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(n="connect"),r.stream=o,s.noDelay&&o.setNoDelay(!0),"number"==typeof s.keepAlive&&(o.connecting?o.once(n,()=>{o.setKeepAlive(!0,s.keepAlive)}):o.setKeepAlive(!0,s.keepAlive)),o.connecting){if(o.once(n,u.connectHandler(r)),s.connectTimeout){let e=!1;o.setTimeout(s.connectTimeout,function(){if(e)return;o.setTimeout(0),o.destroy();let t=Error("connect ETIMEDOUT");t.errorno="ETIMEDOUT",t.code="ETIMEDOUT",t.syscall="connect",u.errorHandler(r)(t)}),o.once(n,function(){e=!0,o.setTimeout(0)})}}else if(o.destroyed){let e=r.connector.firstError;e&&process.nextTick(()=>{u.errorHandler(r)(e)}),process.nextTick(u.closeHandler(r))}else process.nextTick(u.connectHandler(r));o.destroyed||(o.once("error",u.errorHandler(r)),o.once("close",u.closeHandler(r)));let a=function(){r.removeListener("close",l),e()};var l=function(){r.removeListener("ready",a),t(Error(p.CONNECTION_CLOSED_ERROR_MSG))};r.once("ready",a),r.once("close",l)})});return(0,o.default)(t,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),"wait"===this.status?u.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new k({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":(null==(e=this.condition)?void 0:e.subscriber)?"subscriber":"normal"}monitor(e){let t=this.duplicate({monitor:!0,lazyConnect:!1});return(0,o.default)(new Promise(function(e,s){t.once("error",s),t.once("monitoring",function(){e(t)})}),e)}sendCommand(e,t){var s,i;if("wait"===this.status&&this.connect().catch(g.noop),"end"===this.status)return e.reject(Error(p.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if((null==(s=this.condition)?void 0:s.subscriber)&&!a.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;"number"==typeof this.options.commandTimeout&&e.setTimeout(this.options.commandTimeout);let o="ready"===this.status||!t&&"connect"===this.status&&(0,r.exists)(e.name)&&(0,r.hasFlag)(e.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(o=!1):o=!1,o)S.enabled&&S("write command[%s]: %d -> %s(%o)",this._getDescription(),null==(i=this.condition)?void 0:i.select,e.name,e.args),t?"isPipeline"in t&&t.isPipeline?t.write(e.toWritable(t.destination.redis.stream)):t.write(e.toWritable(t)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:t,select:this.condition.select}),a.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),void 0!==this.options.socketTimeout&&void 0===this.socketTimeoutTimer&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if("quit"===e.name&&0===this.offlineQueue.length)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;S.enabled&&S("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:t,select:this.condition.select})}if("select"===e.name&&(0,p.isInt)(e.args[0])){let t=parseInt(e.args[0],10);this.condition.select!==t&&(this.condition.select=t,this.emit("select",t),S("switch to db [%d]",this.condition.select))}return e.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,0!==this.commandQueue.length&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let s;if("error"!==e||(s=t,"end"!==this.status&&(!this.manuallyClosing||!(s instanceof Error)||s.message!==p.CONNECTION_CLOSED_ERROR_MSG&&"connect"!==s.syscall&&"read"!==s.syscall)))return this.listeners(e).length>0?this.emit.apply(this,arguments):(s&&s instanceof Error&&console.error("[ioredis] Unhandled error event:",s.stack),!1)}recoverFromFatalError(e,t,s){this.flushQueue(t,s),this.silentEmit("error",t),this.disconnect(!0)}handleReconnection(e,t){var s;let r=!1;switch(this.options.reconnectOnError&&(r=this.options.reconnectOnError(e)),r){case 1:case!0:"reconnecting"!==this.status&&this.disconnect(!0),t.command.reject(e);break;case 2:"reconnecting"!==this.status&&this.disconnect(!0),(null==(s=this.condition)?void 0:s.select)!==t.select&&"select"!==t.command.name&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}}_getDescription(){let e;return e="path"in this.options&&this.options.path?this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?this.options.host+":"+this.options.port:"",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new b}resetOfflineQueue(){this.offlineQueue=new b}parseOptions(...e){let t={},s=!1;for(let r=0;r<e.length;++r){let i=e[r];if(null!=i)if("object"==typeof i)(0,g.defaults)(t,i);else if("string"==typeof i)(0,g.defaults)(t,(0,p.parseURL)(i)),i.startsWith("rediss://")&&(s=!0);else if("number"==typeof i)t.port=i;else throw Error("Invalid argument "+i)}s&&(0,g.defaults)(t,{tls:!0}),(0,g.defaults)(t,k.defaultOptions),"string"==typeof t.port&&(t.port=parseInt(t.port,10)),"string"==typeof t.db&&(t.db=parseInt(t.db,10)),this.options=(0,p.resolveTLSProfile)(t)}setStatus(e,t){S.enabled&&S("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:s={}}){return new d.default({objectMode:!0,key:t,redis:this,command:e,...s})}flushQueue(e,t){let s;if((t=(0,g.defaults)({},t,{offlineQueue:!0,commandQueue:!0})).offlineQueue)for(;s=this.offlineQueue.shift();)s.command.reject(e);if(t.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");s=this.commandQueue.shift();)s.command.reject(e)}_readyCheck(e){let t=this;this.info(function(s,r){if(s)return s.message&&s.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${s.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(s);if("string"!=typeof r)return e(null,r);let i={},o=r.split("\r\n");for(let e=0;e<o.length;++e){let[t,...s]=o[e].split(":"),r=s.join(":");r&&(i[t]=r)}if(i.loading&&"0"!==i.loading){let s=1e3*(i.loading_eta_seconds||1),r=t.options.maxLoadingRetryTime&&t.options.maxLoadingRetryTime<s?t.options.maxLoadingRetryTime:s;S("Redis server still loading, trying again in "+r+"ms"),setTimeout(function(){t._readyCheck(e)},r)}else e(null,i)}).catch(g.noop)}}k.Cluster=n.default,k.Command=a.default,k.defaultOptions=h.DEFAULT_REDIS_OPTIONS,(0,y.default)(k,i.EventEmitter),(0,f.addTransactionSupport)(k.prototype),t.default=k},19141:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(55511),i=s(92933),o=s(78497);class n{constructor(e,t=null,s="",o=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=s,this.readOnly=o,this.sha=(0,r.createHash)("sha1").update(e).digest("hex");let n=this.sha,a=new WeakSet;this.Command=class extends i.default{toWritable(t){let s=this.reject;return this.reject=e=>{-1!==e.message.indexOf("NOSCRIPT")&&a.delete(t),s.call(this,e)},a.has(t)?"eval"===this.name&&(this.name="evalsha",this.args[0]=n):(a.add(t),this.name="eval",this.args[0]=e),super.toWritable(t)}}}execute(e,t,s,r){"number"==typeof this.numberOfKeys&&t.unshift(this.numberOfKeys),this.keyPrefix&&(s.keyPrefix=this.keyPrefix),this.readOnly&&(s.readOnly=!0);let i=new this.Command("evalsha",[this.sha,...t],s);return i.promise=i.promise.catch(r=>{if(-1===r.message.indexOf("NOSCRIPT"))throw r;let i=new this.Command("evalsha",[this.sha,...t],s);return(e.isPipeline?e.redis:e).sendCommand(i)}),(0,o.default)(i.promise,r),e.sendCommand(i)}}t.default=n},19604:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(61063),i=s(65808),o=s(92933),n=s(19141);class a{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return l.slice(0)}createBuiltinCommand(e){return{string:c(null,e,"utf8"),buffer:c(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=c(e,e,"utf8"),this[e+"Buffer"]=c(e+"Buffer",e,null)}defineCommand(e,t){let s=new n.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=s,this[e]=u(e,e,s,"utf8"),this[e+"Buffer"]=u(e+"Buffer",e,s,null)}sendCommand(e,t,s){throw Error('"sendCommand" is not implemented')}}let l=r.list.filter(e=>"monitor"!==e);function c(e,t,s){return void 0===s&&(s=t,t=null),function(...r){let n=t||r.shift(),a=r[r.length-1];"function"==typeof a?r.pop():a=void 0;let l={errorStack:this.options.showFriendlyErrorStack?Error():void 0,keyPrefix:this.options.keyPrefix,replyEncoding:s};return(0,i.shouldUseAutoPipelining)(this,e,n)?(0,i.executeWithAutoPipelining)(this,e,n,r,a):this.sendCommand(new o.default(n,r,l,a))}}function u(e,t,s,r){return function(...o){let n="function"==typeof o[o.length-1]?o.pop():void 0,a={replyEncoding:r};return(this.options.showFriendlyErrorStack&&(a.errorStack=Error()),(0,i.shouldUseAutoPipelining)(this,e,t))?(0,i.executeWithAutoPipelining)(this,e,t,o,n):s.execute(this,o,a,n)}}l.push("sentinel"),l.forEach(function(e){a.prototype[e]=c(e,e,"utf8"),a.prototype[e+"Buffer"]=c(e+"Buffer",e,null)}),a.prototype.call=c("call","utf8"),a.prototype.callBuffer=c("callBuffer",null),a.prototype.send_command=a.prototype.call,t.default=a},21239:(e,t,s)=>{e.exports=function(e){function t(e){let s,i,o,n=null;function a(...e){if(!a.enabled)return;let r=Number(new Date);a.diff=r-(s||r),a.prev=s,a.curr=r,s=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return"%";i++;let o=t.formatters[r];if("function"==typeof o){let t=e[i];s=o.call(a,t),e.splice(i,1),i--}return s}),t.formatArgs.call(a,e),(a.log||t.log).apply(a,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==n?n:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{n=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,s){let r=t(this.namespace+(void 0===s?":":s)+e);return r.log=this.log,r}function i(e,t){let s=0,r=0,i=-1,o=0;for(;s<e.length;)if(r<t.length&&(t[r]===e[s]||"*"===t[r]))"*"===t[r]?(i=r,o=s):s++,r++;else{if(-1===i)return!1;r=i+1,s=++o}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){for(let s of(t.save(e),t.namespaces=e,t.names=[],t.skips=[],("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===s[0]?t.skips.push(s.slice(1)):t.names.push(s)},t.enabled=function(e){for(let s of t.skips)if(i(e,s))return!1;for(let s of t.names)if(i(e,s))return!0;return!1},t.humanize=s(55727),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(s=>{t[s]=e[s]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t)|0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}},21560:(e,t,s)=>{"use strict";s.d(t,{q:()=>p});let r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,i=new Set,o="object"==typeof process&&process?process:{},n=(e,t,s,r)=>{"function"==typeof o.emitWarning?o.emitWarning(e,t,s,r):console.error(`[${s}] ${t}: ${e}`)},a=globalThis.AbortController,l=globalThis.AbortSignal;if(void 0===a){l=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},a=class{constructor(){t()}signal=new l;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=o.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}let c=e=>!i.has(e);Symbol("type");let u=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),h=e=>u(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=0x100000000?Uint32Array:e<=Number.MAX_SAFE_INTEGER?d:null:null;class d extends Array{constructor(e){super(e),this.fill(0)}}class f{heap;length;static #e=!1;static create(e){let t=h(e);if(!t)return[];f.#e=!0;let s=new f(e,t);return f.#e=!1,s}constructor(e,t){if(!f.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class p{#t;#s;#r;#i;#o;#n;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#l;#c;#u;#h;#d;#f;#p;#y;#m;#g;#b;#S;#k;#v;#w;#E;static unsafeExposeInternals(e){return{starts:e.#S,ttls:e.#k,sizes:e.#b,keyMap:e.#c,keyList:e.#u,valList:e.#h,next:e.#d,prev:e.#f,get head(){return e.#p},get tail(){return e.#y},free:e.#m,isBackgroundFetch:t=>e.#A(t),backgroundFetch:(t,s,r,i)=>e.#C(t,s,r,i),moveToTail:t=>e.#T(t),indexes:t=>e.#_(t),rindexes:t=>e.#O(t),isStale:t=>e.#R(t)}}get max(){return this.#t}get maxSize(){return this.#s}get calculatedSize(){return this.#l}get size(){return this.#a}get fetchMethod(){return this.#o}get memoMethod(){return this.#n}get dispose(){return this.#r}get disposeAfter(){return this.#i}constructor(e){let{max:t=0,ttl:s,ttlResolution:r=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:d,dispose:y,disposeAfter:m,noDisposeOnSet:g,noUpdateTTL:b,maxSize:S=0,maxEntrySize:k=0,sizeCalculation:v,fetchMethod:w,memoMethod:E,noDeleteOnFetchRejection:A,noDeleteOnStaleGet:C,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:_,ignoreFetchAbort:O}=e;if(0!==t&&!u(t))throw TypeError("max option must be a nonnegative integer");let R=t?h(t):Array;if(!R)throw Error("invalid max value: "+t);if(this.#t=t,this.#s=S,this.maxEntrySize=k||this.#s,this.sizeCalculation=v,this.sizeCalculation){if(!this.#s&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==E&&"function"!=typeof E)throw TypeError("memoMethod must be a function if defined");if(this.#n=E,void 0!==w&&"function"!=typeof w)throw TypeError("fetchMethod must be a function if specified");if(this.#o=w,this.#w=!!w,this.#c=new Map,this.#u=Array(t).fill(void 0),this.#h=Array(t).fill(void 0),this.#d=new R(t),this.#f=new R(t),this.#p=0,this.#y=0,this.#m=f.create(t),this.#a=0,this.#l=0,"function"==typeof y&&(this.#r=y),"function"==typeof m?(this.#i=m,this.#g=[]):(this.#i=void 0,this.#g=void 0),this.#v=!!this.#r,this.#E=!!this.#i,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!A,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!_,this.ignoreFetchAbort=!!O,0!==this.maxEntrySize){if(0!==this.#s&&!u(this.#s))throw TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#x()}if(this.allowStale=!!d,this.noDeleteOnStaleGet=!!C,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=u(r)||0===r?r:1,this.ttlAutopurge=!!o,this.ttl=s||0,this.ttl){if(!u(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#M()}if(0===this.#t&&0===this.ttl&&0===this.#s)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#s){let e="LRU_CACHE_UNBOUNDED";c(e)&&(i.add(e),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,p))}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#M(){let e=new d(this.#t),t=new d(this.#t);this.#k=e,this.#S=t,this.#I=(s,i,o=r.now())=>{if(t[s]=0!==i?o:0,e[s]=i,0!==i&&this.ttlAutopurge){let e=setTimeout(()=>{this.#R(s)&&this.#D(this.#u[s],"expire")},i+1);e.unref&&e.unref()}},this.#B=s=>{t[s]=0!==e[s]?r.now():0},this.#P=(r,o)=>{if(e[o]){let n=e[o],a=t[o];if(!n||!a)return;r.ttl=n,r.start=a,r.now=s||i();let l=r.now-a;r.remainingTTL=n-l}};let s=0,i=()=>{let e=r.now();if(this.ttlResolution>0){s=e;let t=setTimeout(()=>s=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{let o=this.#c.get(r);if(void 0===o)return 0;let n=e[o],a=t[o];return n&&a?n-((s||i())-a):1/0},this.#R=r=>{let o=t[r],n=e[r];return!!n&&!!o&&(s||i())-o>n}}#B=()=>{};#P=()=>{};#I=()=>{};#R=()=>!1;#x(){let e=new d(this.#t);this.#l=0,this.#b=e,this.#F=t=>{this.#l-=e[t],e[t]=0},this.#N=(e,t,s,r)=>{if(this.#A(t))return 0;if(!u(s))if(r){if("function"!=typeof r)throw TypeError("sizeCalculation must be a function");if(!u(s=r(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#L=(t,s,r)=>{if(e[t]=s,this.#s){let s=this.#s-e[t];for(;this.#l>s;)this.#j(!0)}this.#l+=e[t],r&&(r.entrySize=s,r.totalCalculatedSize=this.#l)}}#F=e=>{};#L=(e,t,s)=>{};#N=(e,t,s,r)=>{if(s||r)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#_({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#y;this.#z(t)&&((e||!this.#R(t))&&(yield t),t!==this.#p);)t=this.#f[t]}*#O({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#p;this.#z(t)&&((e||!this.#R(t))&&(yield t),t!==this.#y);)t=this.#d[t]}#z(e){return void 0!==e&&this.#c.get(this.#u[e])===e}*entries(){for(let e of this.#_())void 0===this.#h[e]||void 0===this.#u[e]||this.#A(this.#h[e])||(yield[this.#u[e],this.#h[e]])}*rentries(){for(let e of this.#O())void 0===this.#h[e]||void 0===this.#u[e]||this.#A(this.#h[e])||(yield[this.#u[e],this.#h[e]])}*keys(){for(let e of this.#_()){let t=this.#u[e];void 0===t||this.#A(this.#h[e])||(yield t)}}*rkeys(){for(let e of this.#O()){let t=this.#u[e];void 0===t||this.#A(this.#h[e])||(yield t)}}*values(){for(let e of this.#_())void 0===this.#h[e]||this.#A(this.#h[e])||(yield this.#h[e])}*rvalues(){for(let e of this.#O())void 0===this.#h[e]||this.#A(this.#h[e])||(yield this.#h[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let s of this.#_()){let r=this.#h[s],i=this.#A(r)?r.__staleWhileFetching:r;if(void 0!==i&&e(i,this.#u[s],this))return this.get(this.#u[s],t)}}forEach(e,t=this){for(let s of this.#_()){let r=this.#h[s],i=this.#A(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#u[s],this)}}rforEach(e,t=this){for(let s of this.#O()){let r=this.#h[s],i=this.#A(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#u[s],this)}}purgeStale(){let e=!1;for(let t of this.#O({allowStale:!0}))this.#R(t)&&(this.#D(this.#u[t],"expire"),e=!0);return e}info(e){let t=this.#c.get(e);if(void 0===t)return;let s=this.#h[t],i=this.#A(s)?s.__staleWhileFetching:s;if(void 0===i)return;let o={value:i};if(this.#k&&this.#S){let e=this.#k[t],s=this.#S[t];e&&s&&(o.ttl=e-(r.now()-s),o.start=Date.now())}return this.#b&&(o.size=this.#b[t]),o}dump(){let e=[];for(let t of this.#_({allowStale:!0})){let s=this.#u[t],i=this.#h[t],o=this.#A(i)?i.__staleWhileFetching:i;if(void 0===o||void 0===s)continue;let n={value:o};if(this.#k&&this.#S){n.ttl=this.#k[t];let e=r.now()-this.#S[t];n.start=Math.floor(Date.now()-e)}this.#b&&(n.size=this.#b[t]),e.unshift([s,n])}return e}load(e){for(let[t,s]of(this.clear(),e)){if(s.start){let e=Date.now()-s.start;s.start=r.now()-e}this.set(t,s.value,s)}}set(e,t,s={}){if(void 0===t)return this.delete(e),this;let{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:n=this.sizeCalculation,status:a}=s,{noUpdateTTL:l=this.noUpdateTTL}=s,c=this.#N(e,t,s.size||0,n);if(this.maxEntrySize&&c>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let u=0===this.#a?void 0:this.#c.get(e);if(void 0===u)u=0===this.#a?this.#y:0!==this.#m.length?this.#m.pop():this.#a===this.#t?this.#j(!1):this.#a,this.#u[u]=e,this.#h[u]=t,this.#c.set(e,u),this.#d[this.#y]=u,this.#f[u]=this.#y,this.#y=u,this.#a++,this.#L(u,c,a),a&&(a.set="add"),l=!1;else{this.#T(u);let s=this.#h[u];if(t!==s){if(this.#w&&this.#A(s)){s.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=s;void 0!==t&&!o&&(this.#v&&this.#r?.(t,e,"set"),this.#E&&this.#g?.push([t,e,"set"]))}else!o&&(this.#v&&this.#r?.(s,e,"set"),this.#E&&this.#g?.push([s,e,"set"]));if(this.#F(u),this.#L(u,c,a),this.#h[u]=t,a){a.set="replace";let e=s&&this.#A(s)?s.__staleWhileFetching:s;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0===r||this.#k||this.#M(),this.#k&&(l||this.#I(u,r,i),a&&this.#P(a,u)),!o&&this.#E&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}return this}pop(){try{for(;this.#a;){let e=this.#h[this.#p];if(this.#j(!0),this.#A(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#E&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}}}#j(e){let t=this.#p,s=this.#u[t],r=this.#h[t];return this.#w&&this.#A(r)?r.__abortController.abort(Error("evicted")):(this.#v||this.#E)&&(this.#v&&this.#r?.(r,s,"evict"),this.#E&&this.#g?.push([r,s,"evict"])),this.#F(t),e&&(this.#u[t]=void 0,this.#h[t]=void 0,this.#m.push(t)),1===this.#a?(this.#p=this.#y=0,this.#m.length=0):this.#p=this.#d[t],this.#c.delete(s),this.#a--,t}has(e,t={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:r}=t,i=this.#c.get(e);if(void 0!==i){let e=this.#h[i];if(this.#A(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#R(i))return s&&this.#B(i),r&&(r.has="hit",this.#P(r,i)),!0;r&&(r.has="stale",this.#P(r,i))}else r&&(r.has="miss");return!1}peek(e,t={}){let{allowStale:s=this.allowStale}=t,r=this.#c.get(e);if(void 0===r||!s&&this.#R(r))return;let i=this.#h[r];return this.#A(i)?i.__staleWhileFetching:i}#C(e,t,s,r){let i=void 0===t?void 0:this.#h[t];if(this.#A(i))return i;let o=new a,{signal:n}=s;n?.addEventListener("abort",()=>o.abort(n.reason),{signal:o.signal});let l={signal:o.signal,options:s,context:r},c=(r,i=!1)=>{let{aborted:n}=o.signal,a=s.ignoreFetchAbort&&void 0!==r;return(s.status&&(n&&!i?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,a&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),!n||a||i)?(this.#h[t]===h&&(void 0===r?h.__staleWhileFetching?this.#h[t]=h.__staleWhileFetching:this.#D(e,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(e,r,l.options))),r):u(o.signal.reason)},u=r=>{let{aborted:i}=o.signal,n=i&&s.allowStaleOnFetchAbort,a=n||s.allowStaleOnFetchRejection,l=a||s.noDeleteOnFetchRejection;if(this.#h[t]===h&&(l&&void 0!==h.__staleWhileFetching?n||(this.#h[t]=h.__staleWhileFetching):this.#D(e,"fetch")),a)return s.status&&void 0!==h.__staleWhileFetching&&(s.status.returnedStale=!0),h.__staleWhileFetching;if(h.__returned===h)throw r};s.status&&(s.status.fetchDispatched=!0);let h=new Promise((t,r)=>{let n=this.#o?.(e,i,l);n&&n instanceof Promise&&n.then(e=>t(void 0===e?void 0:e),r),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(t(void 0),s.allowStaleOnFetchAbort&&(t=e=>c(e,!0)))})}).then(c,e=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=e),u(e))),d=Object.assign(h,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,d,{...l.options,status:void 0}),t=this.#c.get(e)):this.#h[t]=d,d}#A(e){return!!this.#w&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof a}async fetch(e,t={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:n=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:y=!1,status:m,signal:g}=t;if(!this.#w)return m&&(m.fetch="get"),this.get(e,{allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:i,status:m});let b={allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:n,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:m,signal:g},S=this.#c.get(e);if(void 0===S){m&&(m.fetch="miss");let t=this.#C(e,S,b,p);return t.__returned=t}{let t=this.#h[S];if(this.#A(t)){let e=s&&void 0!==t.__staleWhileFetching;return m&&(m.fetch="inflight",e&&(m.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let i=this.#R(S);if(!y&&!i)return m&&(m.fetch="hit"),this.#T(S),r&&this.#B(S),m&&this.#P(m,S),t;let o=this.#C(e,S,b,p),n=void 0!==o.__staleWhileFetching&&s;return m&&(m.fetch=i?"stale":"refresh",n&&i&&(m.returnedStale=!0)),n?o.__staleWhileFetching:o.__returned=o}}async forceFetch(e,t={}){let s=await this.fetch(e,t);if(void 0===s)throw Error("fetch() returned undefined");return s}memo(e,t={}){let s=this.#n;if(!s)throw Error("no memoMethod provided to constructor");let{context:r,forceRefresh:i,...o}=t,n=this.get(e,o);if(!i&&void 0!==n)return n;let a=s(e,n,{options:o,context:r});return this.set(e,a,o),a}get(e,t={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,n=this.#c.get(e);if(void 0!==n){let t=this.#h[n],a=this.#A(t);return(o&&this.#P(o,n),this.#R(n))?(o&&(o.get="stale"),a)?(o&&s&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),s?t.__staleWhileFetching:void 0):(i||this.#D(e,"expire"),o&&s&&(o.returnedStale=!0),s?t:void 0):(o&&(o.get="hit"),a)?t.__staleWhileFetching:(this.#T(n),r&&this.#B(n),t)}o&&(o.get="miss")}#Q(e,t){this.#f[t]=e,this.#d[e]=t}#T(e){e!==this.#y&&(e===this.#p?this.#p=this.#d[e]:this.#Q(this.#f[e],this.#d[e]),this.#Q(this.#y,e),this.#y=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let s=!1;if(0!==this.#a){let r=this.#c.get(e);if(void 0!==r)if(s=!0,1===this.#a)this.#W(t);else{this.#F(r);let s=this.#h[r];if(this.#A(s)?s.__abortController.abort(Error("deleted")):(this.#v||this.#E)&&(this.#v&&this.#r?.(s,e,t),this.#E&&this.#g?.push([s,e,t])),this.#c.delete(e),this.#u[r]=void 0,this.#h[r]=void 0,r===this.#y)this.#y=this.#f[r];else if(r===this.#p)this.#p=this.#d[r];else{let e=this.#f[r];this.#d[e]=this.#d[r];let t=this.#d[r];this.#f[t]=this.#f[r]}this.#a--,this.#m.push(r)}}if(this.#E&&this.#g?.length){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}return s}clear(){return this.#W("delete")}#W(e){for(let t of this.#O({allowStale:!0})){let s=this.#h[t];if(this.#A(s))s.__abortController.abort(Error("deleted"));else{let r=this.#u[t];this.#v&&this.#r?.(s,r,e),this.#E&&this.#g?.push([s,r,e])}}if(this.#c.clear(),this.#h.fill(void 0),this.#u.fill(void 0),this.#k&&this.#S&&(this.#k.fill(0),this.#S.fill(0)),this.#b&&this.#b.fill(0),this.#p=0,this.#y=0,this.#m.length=0,this.#l=0,this.#a=0,this.#E&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}}}},22517:(e,t,s)=>{"use strict";s.d(t,{i:()=>l});var r=s(13444);r.lF;let i=r.D4;var o=s(64763),n=s(96277),a=s(13941);function l(e){let t,s;if("string"!=typeof e)throw new a.Dp("JWTs must use Compact JWS serialization, JWT must be a string");let{1:r,length:l}=e.split(".");if(5===l)throw new a.Dp("Only JWTs using Compact JWS serialization can be decoded");if(3!==l)throw new a.Dp("Invalid JWT");if(!r)throw new a.Dp("JWTs must contain a payload");try{t=i(r)}catch{throw new a.Dp("Failed to base64url decode the payload")}try{s=JSON.parse(o.D0.decode(t))}catch{throw new a.Dp("Failed to parse the decoded payload as JSON")}if(!(0,n.A)(s))throw new a.Dp("Invalid JWT Claims Set");return s}},22949:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionName=t.weightSrvRecords=t.groupSrvRecords=t.getUniqueHostnamesFromOptions=t.normalizeNodeOptions=t.nodeKeyToRedisOptions=t.getNodeKey=void 0;let r=s(80454),i=s(91645);t.getNodeKey=function(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port},t.nodeKeyToRedisOptions=function(e){let t=e.lastIndexOf(":");if(-1===t)throw Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}},t.normalizeNodeOptions=function(e){return e.map(e=>{let t={};if("object"==typeof e)Object.assign(t,e);else if("string"==typeof e)Object.assign(t,(0,r.parseURL)(e));else if("number"==typeof e)t.port=e;else throw Error("Invalid argument "+e);return"string"==typeof t.port&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),(0,r.resolveTLSProfile)(t)})},t.getUniqueHostnamesFromOptions=function(e){let t={};return e.forEach(e=>{t[e.host]=!0}),Object.keys(t).filter(e=>!(0,i.isIP)(e))},t.groupSrvRecords=function(e){let t={};for(let s of e)t.hasOwnProperty(s.priority)?(t[s.priority].totalWeight+=s.weight,t[s.priority].records.push(s)):t[s.priority]={totalWeight:s.weight,records:[s]};return t},t.weightSrvRecords=function(e){if(1===e.records.length)return e.totalWeight=0,e.records.shift();let t=Math.floor(Math.random()*(e.totalWeight+e.records.length)),s=0;for(let[r,i]of e.records.entries())if((s+=1+i.weight)>t)return e.totalWeight-=i.weight,e.records.splice(r,1),i},t.getConnectionName=function(e,t){let s=`ioredis-cluster(${e})`;return t?`${s}:${t}`:s}},25038:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxRetriesPerRequestError=void 0,t.MaxRetriesPerRequestError=s(93724).default},26338:(e,t,s)=>{"use strict";s.d(t,{P:()=>g});var r=s(13444),i=s(14875),o=s(39606),n=s(13941),a=s(64763),l=s(36014),c=s(58200);class u{_payload;_protectedHeader;_unprotectedHeader;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let s;if(!this._protectedHeader&&!this._unprotectedHeader)throw new n.Ye("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.A)(this._protectedHeader,this._unprotectedHeader))throw new n.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let u={...this._protectedHeader,...this._unprotectedHeader},h=(0,c.A)(n.Ye,new Map([["b64",!0]]),t?.crit,this._protectedHeader,u),d=!0;if(h.has("b64")&&"boolean"!=typeof(d=this._protectedHeader.b64))throw new n.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=u;if("string"!=typeof f||!f)throw new n.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,l.I)(f,e,"sign");let p=this._payload;d&&(p=a.Rd.encode((0,r.lF)(p))),s=this._protectedHeader?a.Rd.encode((0,r.lF)(JSON.stringify(this._protectedHeader))):a.Rd.encode("");let y=(0,a.xW)(s,a.Rd.encode("."),p),m=await (0,i.A)(f,e,y),g={signature:(0,r.lF)(m),payload:""};return d&&(g.payload=a.D0.decode(p)),this._unprotectedHeader&&(g.header=this._unprotectedHeader),this._protectedHeader&&(g.protected=a.D0.decode(s)),g}}class h{_flattened;constructor(e){this._flattened=new u(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let s=await this._flattened.sign(e,t);if(void 0===s.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}}var d=s(61754),f=s(96277),p=s(36733);function y(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class m{_payload;constructor(e={}){if(!(0,f.A)(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:y("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:y("setNotBefore",(0,d.A)(e))}:this._payload={...this._payload,nbf:(0,d.A)(new Date)+(0,p.A)(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:y("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:y("setExpirationTime",(0,d.A)(e))}:this._payload={...this._payload,exp:(0,d.A)(new Date)+(0,p.A)(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:(0,d.A)(new Date)}:e instanceof Date?this._payload={...this._payload,iat:y("setIssuedAt",(0,d.A)(e))}:"string"==typeof e?this._payload={...this._payload,iat:y("setIssuedAt",(0,d.A)(new Date)+(0,p.A)(e))}:this._payload={...this._payload,iat:y("setIssuedAt",e)},this}}class g extends m{_protectedHeader;setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let s=new h(a.Rd.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new n.Dp("JWTs MUST NOT use unencoded payload");return s.sign(e,t)}}},28366:(e,t,s)=>{"use strict";e.exports=55>process.version.charCodeAt(1)&&46===process.version.charCodeAt(2)?s(46043):s(35635)},28905:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CLUSTER_OPTIONS=void 0;let r=s(14985);t.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+2*e,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:r.resolveSrv,dnsLookup:r.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}},32519:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(80454),i=s(76178),o=(0,r.Debug)("delayqueue");class n{constructor(){this.queues={},this.timeouts={}}push(e,t,s){let r=s.callback||process.nextTick;this.queues[e]||(this.queues[e]=new i),this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{r(()=>{this.timeouts[e]=null,this.execute(e)})},s.timeout))}execute(e){let t=this.queues[e];if(!t)return;let{length:s}=t;if(s)for(o("send %d commands in %s queue",s,e),this.queues[e]=null;t.length>0;)t.shift()()}}t.default=n},35635:(e,t,s)=>{"use strict";let r=s(12412);class i extends Error{get name(){return this.constructor.name}}class o extends i{constructor(e,t,s){r(t),r.strictEqual(typeof s,"number");let i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=i,this.offset=s,this.buffer=t}get name(){return this.constructor.name}}class n extends i{constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=t}get name(){return this.constructor.name}}class a extends i{get name(){return this.constructor.name}}class l extends a{get name(){return this.constructor.name}}e.exports={RedisError:i,ParserError:o,ReplyError:n,AbortError:a,InterruptError:l}},36014:(e,t,s)=>{"use strict";s.d(t,{I:()=>h});var r=s(66939),i=s(60094),o=s(70916);let n=e=>e?.[Symbol.toStringTag],a=(e,t,s)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(s)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${s}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},l=(e,t,s,l)=>{if(!(t instanceof Uint8Array)){if(l&&o.ll(t)){if(o.t9(t)&&a(e,t,s))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!(0,i.A)(t))throw TypeError((0,r.t)(e,t,...i.g,"Uint8Array",l?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${n(t)} instances for symmetric algorithms must be of type "secret"`)}},c=(e,t,s,l)=>{if(l&&o.ll(t))switch(s){case"sign":if(o.W2(t)&&a(e,t,s))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(o.M3(t)&&a(e,t,s))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!(0,i.A)(t))throw TypeError((0,r.t)(e,t,...i.g,l?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${n(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===s&&"public"===t.type)throw TypeError(`${n(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===s&&"public"===t.type)throw TypeError(`${n(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===s&&"private"===t.type)throw TypeError(`${n(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===s&&"private"===t.type)throw TypeError(`${n(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function u(e,t,s,r){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?l(t,s,r,e):c(t,s,r,e)}u.bind(void 0,!1);let h=u.bind(void 0,!0)},36733:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let r=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,i=e=>{let t,s=r.exec(e);if(!s||s[4]&&s[1])throw TypeError("Invalid time period format");let i=parseFloat(s[2]);switch(s[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(i);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*i);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*i);break;case"day":case"days":case"d":t=Math.round(86400*i);break;case"week":case"weeks":case"w":t=Math.round(604800*i);break;default:t=Math.round(0x1e187e0*i)}return"-"===s[1]||"ago"===s[4]?-t:t}},37045:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genRedactedString=t.getStringValue=t.MAX_ARGUMENT_LENGTH=void 0;let r=s(17352);function i(e){if(null!==e)switch(typeof e){case"boolean":case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch(e){return}case"string":return e}}function o(e,t){let{length:s}=e;return s<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+s+'">'}t.MAX_ARGUMENT_LENGTH=200,t.getStringValue=i,t.genRedactedString=o,t.default=function(e){let t=(0,r.default)(`ioredis:${e}`);function s(...e){if(t.enabled){for(let t=1;t<e.length;t++){let s=i(e[t]);"string"==typeof s&&s.length>200&&(e[t]=o(s,200))}return t.apply(null,e)}}return Object.defineProperties(s,{namespace:{get:()=>t.namespace},enabled:{get:()=>t.enabled},destroy:{get:()=>t.destroy},log:{get:()=>t.log,set(e){t.log=e}}}),s}},39381:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(61063),i=s(94735),o=s(28366),n=s(78497),a=s(92933),l=s(2020),c=s(18991),u=s(53387),h=s(67448),d=s(80454),f=s(43405),p=s(19604),y=s(28905),m=s(52193),g=s(18139),b=s(32519),S=s(22949),k=s(76178),v=s(17374),w=(0,d.Debug)("cluster"),E=new WeakSet;class A extends p.default{constructor(e,t={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new b.default,this.offlineQueue=new k,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,i.EventEmitter.call(this),this.startupNodes=e,this.options=(0,d.defaults)({},t,y.DEFAULT_CLUSTER_OPTIONS,this.options),!0==this.options.shardedSubscribers&&(this.shardedSubscribers=new v.default(this)),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),"function"!=typeof this.options.scaleReads&&-1===["all","master","slave"].indexOf(this.options.scaleReads))throw Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new g.default(this.options.redisOptions),this.connectionPool.on("-node",(e,t)=>{this.emit("-node",e)}),this.connectionPool.on("+node",e=>{this.emit("+node",e)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(e,t)=>{this.emit("node error",e,t)}),this.subscriber=new m.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([e,t])=>{this.defineCommand(e,t)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(e=>{w("connecting failed: %s",e)})}connect(){return new Promise((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(Error("Redis is already connecting/connected"));let s=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(r=>{let i;if(this.connectionEpoch!==s){w("discard connecting after resolving startup nodes because epoch not match: %d != %d",s,this.connectionEpoch),t(new o.RedisError("Connection is discarded because a new connection is made"));return}if("connecting"!==this.status){w("discard connecting after resolving startup nodes because the status changed to %s",this.status),t(new o.RedisError("Connection is aborted"));return}this.connectionPool.reset(r);let n=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",i),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((e,t)=>{e||t?(w("Ready check failed (%s). Reconnecting...",e||t),"connect"===this.status&&this.disconnect(!0)):n()}):n()};i=()=>{let e=Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(e),t(e)},this.once("refresh",a),this.once("close",i),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(e=>{e&&e.message===l.default.defaultMessage&&(c.default.prototype.silentEmit.call(this,"error",e),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(e=>{this.setStatus("close"),this.handleCloseEvent(e),this.invokeReadyDelayedCallbacks(e),t(e)})})}disconnect(e=!1){let t=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,w("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),"wait"===t?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let t=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),"wait"===t){let t=(0,n.default)(Promise.resolve("OK"),e);return setImmediate((function(){this.setStatus("close"),this.handleCloseEvent()}).bind(this)),t}return(0,n.default)(Promise.all(this.nodes().map(e=>e.quit().catch(e=>{if(e.message===d.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw e}))).then(()=>"OK"),e)}duplicate(e=[],t={}){return new A(e.length>0?e:this.startupNodes.slice(0),Object.assign({},this.options,t))}nodes(e="all"){if("all"!==e&&"master"!==e&&"slave"!==e)throw Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let t=this,s=e=>{for(let t of(this.isRefreshing=!1,this._refreshSlotsCacheCallbacks))t(e);this._refreshSlotsCacheCallbacks=[]},r=(0,d.shuffle)(this.connectionPool.getNodes()),i=null;!function e(o){if(o===r.length)return s(new l.default(l.default.defaultMessage,i));let n=r[o],a=`${n.options.host}:${n.options.port}`;w("getting slot cache from %s",a),t.getInfoFromNode(n,function(r){switch(t.status){case"close":case"end":return s(Error("Cluster is disconnected."));case"disconnecting":return s(Error("Cluster is disconnecting."))}r?(t.emit("node error",r,a),i=r,e(o+1)):(t.emit("refresh"),s())})}(0)}sendCommand(e,t,s){if("wait"===this.status&&this.connect().catch(d.noop),"end"===this.status)return e.reject(Error(d.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let i=this.options.scaleReads;"master"!==i&&(e.isReadOnly||(0,r.exists)(e.name)&&(0,r.hasFlag)(e.name,"readonly")||(i="master"));let n=s?s.slot:e.getSlot(),l={},c=this;if(!s&&!E.has(e)){E.add(e);let t=e.reject;e.reject=function(s){let r=u.bind(null,!0);c.handleError(s,l,{moved:function(t,s){w("command %s is moved to %s",e.name,s),n=Number(t),c.slots[t]?c.slots[t][0]=s:c.slots[t]=[s],c._groupsBySlot[t]=c._groupsIds[c.slots[t].join(";")],c.connectionPool.findOrCreate(c.natMapper(s)),u(),w("refreshing slot caches... (triggered by MOVED error)"),c.refreshSlotsCache()},ask:function(t,s){w("command %s is required to ask %s:%s",e.name,s);let r=c.natMapper(s);c.connectionPool.findOrCreate(r),u(!1,`${r.host}:${r.port}`)},tryagain:r,clusterDown:r,connectionClosed:r,maxRedirections:function(s){t.call(e,s)},defaults:function(){t.call(e,s)}})}}function u(r,l){let u;if("end"===c.status)return void e.reject(new o.AbortError("Cluster is ended."));if("ready"===c.status||"cluster"===e.name){if(s&&s.redis)u=s.redis;else if(a.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||a.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(!0==c.options.shardedSubscribers&&("ssubscribe"==e.name||"sunsubscribe"==e.name)){let t=c.shardedSubscribers.getResponsibleSubscriber(n),s=-1;"ssubscribe"==e.name&&(s=c.shardedSubscribers.addChannels(e.getKeys())),"sunsubscribe"==e.name&&(s=c.shardedSubscribers.removeChannels(e.getKeys())),-1!==s?u=t.getInstance():e.reject(new o.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else u=c.subscriber.getInstance();if(!u)return void e.reject(new o.AbortError("No subscriber for the cluster"))}else{if(!r){if("number"==typeof n&&c.slots[n]){let t=c.slots[n];if("function"==typeof i){let s=t.map(function(e){return c.connectionPool.getInstanceByKey(e)});Array.isArray(u=i(s,e))&&(u=(0,d.sample)(u)),u||(u=s[0])}else{let e;e="all"===i?(0,d.sample)(t):"slave"===i&&t.length>1?(0,d.sample)(t,1):t[0],u=c.connectionPool.getInstanceByKey(e)}}l&&(u=c.connectionPool.getInstanceByKey(l)).asking()}u||(u=("function"==typeof i?null:c.connectionPool.getSampleInstance(i))||c.connectionPool.getSampleInstance("all"))}s&&!s.redis&&(s.redis=u)}u?u.sendCommand(e,t):c.options.enableOfflineQueue?c.offlineQueue.push({command:e,stream:t,node:s}):e.reject(Error("Cluster isn't ready and enableOfflineQueue options is false"))}return u(),e.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,s){if(void 0===t.value?t.value=this.options.maxRedirections:t.value-=1,t.value<=0)return void s.maxRedirections(Error("Too many Cluster redirections. Last error: "+e));let r=e.message.split(" ");if("MOVED"===r[0]){let e=this.options.retryDelayOnMoved;e&&"number"==typeof e?this.delayQueue.push("moved",s.moved.bind(null,r[1],r[2]),{timeout:e}):s.moved(r[1],r[2])}else"ASK"===r[0]?s.ask(r[1],r[2]):"TRYAGAIN"===r[0]?this.delayQueue.push("tryagain",s.tryagain,{timeout:this.options.retryDelayOnTryAgain}):"CLUSTERDOWN"===r[0]&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",s.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===d.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&"ready"===this.status?this.delayQueue.push("failover",s.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):s.defaults()}resetOfflineQueue(){this.offlineQueue=new k}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{w('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){w("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){let t;e&&w("closed because %s",e),this.manuallyClosing||"function"!=typeof this.options.clusterRetryStrategy||(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),"number"==typeof t?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,w("Cluster is disconnected. Retrying after %dms",t),this.connect().catch(function(e){w("Got error %s when reconnecting. Ignoring...",e)})},t)):(this.setStatus("end"),this.flushQueue(Error("None of startup nodes is available")))}flushQueue(e){let t;for(;t=this.offlineQueue.shift();)t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){let e;w("send %d commands in offline queue",this.offlineQueue.length);let t=this.offlineQueue;for(this.resetOfflineQueue();e=t.shift();)this.sendCommand(e.command,e.stream,e.node)}}natMapper(e){let t="string"==typeof e?e:`${e.host}:${e.port}`,s=null;return(this.options.natMap&&"function"==typeof this.options.natMap?s=this.options.natMap(t):this.options.natMap&&"object"==typeof this.options.natMap&&(s=this.options.natMap[t]),s)?(w("NAT mapping %s -> %O",t,s),Object.assign({},s)):"string"==typeof e?(0,S.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e)return t(Error("Node is disconnected"));let s=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,S.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});s.on("error",d.noop),s.cluster("SLOTS",(0,d.timeout)((e,r)=>{if(s.disconnect(),e)return w("error encountered running CLUSTER.SLOTS: %s",e),t(e);if("disconnecting"===this.status||"close"===this.status||"end"===this.status){w("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",r.length,this.status),t();return}let i=[];w("cluster slots result count: %d",r.length);for(let e=0;e<r.length;++e){let t=r[e],s=t[0],o=t[1],n=[];for(let e=2;e<t.length;e++){if(!t[e][0])continue;let s=this.natMapper({host:t[e][0],port:t[e][1]});s.readOnly=2!==e,i.push(s),n.push(s.host+":"+s.port)}w("cluster slots result [%d]: slots %d~%d served by %s",e,s,o,n);for(let e=s;e<=o;e++)this.slots[e]=n}this._groupsIds=Object.create(null);let o=0;for(let e=0;e<16384;e++){let t=(this.slots[e]||[]).join(";");if(!t.length){this._groupsBySlot[e]=void 0;continue}this._groupsIds[t]||(this._groupsIds[t]=++o),this._groupsBySlot[e]=this._groupsIds[t]}this.connectionPool.reset(i),t()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(t,s)=>{let r;if(t)return e(t);if("string"!=typeof s)return e();let i=s.split("\r\n");for(let e=0;e<i.length;++e){let t=i[e].split(":");if("cluster_state"===t[0]){r=t[1];break}}"fail"===r?(w("cluster state not ok (%s)",r),e(null,r)):e()})}resolveSrv(e){return new Promise((t,s)=>{this.options.resolveSrv(e,(e,r)=>{if(e)return s(e);let i=this,o=(0,S.groupSrvRecords)(r),n=Object.keys(o).sort((e,t)=>parseInt(e)-parseInt(t));!function e(r){if(!n.length)return s(r);let a=o[n[0]],l=(0,S.weightSrvRecords)(a);a.records.length||n.shift(),i.dnsLookup(l.name).then(e=>t({host:e,port:l.port}),e)}()})})}dnsLookup(e){return new Promise((t,s)=>{this.options.dnsLookup(e,(r,i)=>{r?(w("failed to resolve hostname %s to IP: %s",e,r.message),s(r)):(w("resolved hostname %s to IP %s",e,i),t(i))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||0===this.startupNodes.length)throw Error("`startupNodes` should contain at least one node.");let e=(0,S.normalizeNodeOptions)(this.startupNodes),t=(0,S.getUniqueHostnamesFromOptions)(e);if(0===t.length)return e;let s=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),r=(0,d.zipMap)(t,s);return e.map(e=>{let t=r.get(e.host);return t?this.options.useSRVRecords?Object.assign({},e,t):Object.assign({},e,{host:t}):e})}createScanStream(e,{key:t,options:s={}}){return new u.default({objectMode:!0,key:t,redis:this,command:e,...s})}}(0,f.default)(A,i.EventEmitter),(0,h.addTransactionSupport)(A.prototype),t.default=A},39606:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(...e)=>{let t,s=e.filter(Boolean);if(0===s.length||1===s.length)return!0;for(let e of s){let s=Object.keys(e);if(!t||0===t.size){t=new Set(s);continue}for(let e of s){if(t.has(e))return!1;t.add(e)}}return!0}},39661:e=>{var t=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],s=function(e){for(var t,s=0,r=0,i=[],o=e.length;s<o;s++)(t=e.charCodeAt(s))<128?i[r++]=t:(t<2048?i[r++]=t>>6|192:((64512&t)==55296&&s+1<e.length&&(64512&e.charCodeAt(s+1))==56320?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++s)),i[r++]=t>>18|240,i[r++]=t>>12&63|128):i[r++]=t>>12|224,i[r++]=t>>6&63|128),i[r++]=63&t|128);return i},r=e.exports=function(e){for(var r,i=0,o=-1,n=0,a=0,l="string"==typeof e?s(e):e,c=l.length;i<c;){if(r=l[i++],-1===o)123===r&&(o=i);else if(125!==r)a=t[(r^a>>8)&255]^a<<8;else if(i-1!==o)return 16383&a;n=t[(r^n>>8)&255]^n<<8}return 16383&n};e.exports.generateMulti=function(e){for(var t=1,s=e.length,i=r(e[0]);t<s;)if(r(e[t++])!==i)return -1;return i}},43405:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){Object.getOwnPropertyNames(t.prototype).forEach(s=>{Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s))})}},46043:(e,t,s)=>{"use strict";let r=s(12412),i=s(28354);function o(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function n(e,t,s){r(t),r.strictEqual(typeof s,"number"),Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=s,this.buffer=t}function a(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}function l(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function c(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}i.inherits(o,Error),Object.defineProperty(o.prototype,"name",{value:"RedisError",configurable:!0,writable:!0}),i.inherits(n,o),Object.defineProperty(n.prototype,"name",{value:"ParserError",configurable:!0,writable:!0}),i.inherits(a,o),Object.defineProperty(a.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0}),i.inherits(l,o),Object.defineProperty(l.prototype,"name",{value:"AbortError",configurable:!0,writable:!0}),i.inherits(c,l),Object.defineProperty(c.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0}),e.exports={RedisError:o,ParserError:n,ReplyError:a,AbortError:l,InterruptError:c}},48960:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(92933),i=s(80454),o=s(54302),n=s(97975),a=(0,i.Debug)("dataHandler");class l{constructor(e,t){this.redis=e;let s=new o({stringNumbers:t.stringNumbers,returnBuffers:!0,returnError:e=>{this.returnError(e)},returnFatalError:e=>{this.returnFatalError(e)},returnReply:e=>{this.returnReply(e)}});e.stream.prependListener("data",e=>{s.execute(e)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let t=this.shiftCommand(e);t&&(e.command={name:t.command.name,args:t.command.args},this.redis.handleReconnection(e,t))}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let t=this.shiftCommand(e);t&&(r.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new n.default,this.redis.condition.subscriber.add(t.command.name,e[1].toString()),u(t.command,e[2])||this.redis.commandQueue.unshift(t)):r.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?h(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let t=Array.isArray(e)?e[0].toString():null;switch(a('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let t=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",t,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",t,e[2],e[3]);break}case"smessage":this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break;case"ssubscribe":case"subscribe":case"psubscribe":{let s=e[1].toString();this.redis.condition.subscriber.add(t,s);let r=this.shiftCommand(e);if(!r)return;u(r.command,e[2])||this.redis.commandQueue.unshift(r);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let s=e[1]?e[1].toString():null;s&&this.redis.condition.subscriber.del(t,s);let r=e[2];0===Number(r)&&(this.redis.condition.subscriber=!1);let i=this.shiftCommand(e);if(!i)return;h(i.command,r)||this.redis.commandQueue.unshift(i);break}default:{let t=this.shiftCommand(e);if(!t)return;t.command.resolve(e)}}return!0}handleMonitorReply(e){if("monitoring"!==this.redis.status)return!1;let t=e.toString();if("OK"===t)return!1;let s=t.indexOf(" "),r=t.slice(0,s),i=t.indexOf('"'),o=t.slice(i+1,-1).split('" "').map(e=>e.replace(/\\"/g,'"')),n=t.slice(s+2,i-2).split(" ");return this.redis.emit("monitor",r,o,n[1],n[0]),!0}shiftCommand(e){let t=this.redis.commandQueue.shift();if(!t){let t=Error("Command queue state error. If you can reproduce this, please report it."+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",t),null}return t}}t.default=l;let c=new WeakMap;function u(e,t){let s=c.has(e)?c.get(e):e.args.length;return(s-=1)<=0?(e.resolve(t),c.delete(e),!0):(c.set(e,s),!1)}function h(e,t){let s=c.has(e)?c.get(e):e.args.length;return 0===s?0===Number(t)&&(c.delete(e),e.resolve(t),!0):(s-=1)<=0?(e.resolve(t),!0):(c.set(e,s),!1)}},52107:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(13941);function i(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"Ed25519":case"EdDSA":return;default:throw new r.T0(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},52193:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(22949),i=s(80454),o=s(18991),n=(0,i.Debug)("cluster:subscriber");class a{constructor(e,t,s=!1){this.connectionPool=e,this.emitter=t,this.isSharded=s,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started)return void n("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");n("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(e,t)=>{this.started&&this.subscriber&&(0,r.getNodeKey)(this.subscriber.options)===t&&(n("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{this.started&&!this.subscriber&&(n("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),n("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let t=(0,i.sample)(this.connectionPool.getNodes());if(!t){n("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:s}=t;n("selected a subscriber %s:%s",s.host,s.port);let a="subscriber";this.isSharded&&(a="ssubscriber"),this.subscriber=new o.default({port:s.port,host:s.host,username:s.username,password:s.password,enableReadyCheck:!0,connectionName:(0,r.getConnectionName)(a,s.connectionName),lazyConnect:!0,tls:s.tls,retryStrategy:null}),this.subscriber.on("error",i.noop),this.subscriber.once("end",this.onSubscriberEnd);let l={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let t=e.condition||e.prevCondition;t&&t.subscriber&&(l.subscribe=t.subscriber.channels("subscribe"),l.psubscribe=t.subscriber.channels("psubscribe"),l.ssubscribe=t.subscriber.channels("ssubscribe"))}if(l.subscribe.length||l.psubscribe.length||l.ssubscribe.length){let e=0;for(let t of["subscribe","psubscribe","ssubscribe"]){let s=l[t];s.length&&(e+=1,n("%s %d channels",t,s.length),this.subscriber[t](s).then(()=>{--e||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{n("failed to %s %d channels",t,s.length)}))}}else this.lastActiveSubscriber=this.subscriber;for(let e of["message","messageBuffer"])this.subscriber.on(e,(t,s)=>{this.emitter.emit(e,t,s)});for(let e of["pmessage","pmessageBuffer"])this.subscriber.on(e,(t,s,r)=>{this.emitter.emit(e,t,s,r)});if(!0==this.isSharded)for(let e of["smessage","smessageBuffer"])this.subscriber.on(e,(t,s)=>{this.emitter.emit(e,t,s)})}}t.default=a},53387:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(27910);class i extends r.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained)return void this.push(null);let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(e,t)=>{if(e)return void this.emit("error",e);this._redisCursor=t[0]instanceof Buffer?t[0].toString():t[0],"0"===this._redisCursor&&(this._redisDrained=!0),this.push(t[1])})}close(){this._redisDrained=!0}}t.default=i},53591:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&1!==this.cursor&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let s=0;s<this.sentinels.length;s++){var t;if(t=this.sentinels[s],(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379))return!1}return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}}t.default=s},54302:(e,t,s)=>{"use strict";e.exports=s(58067)},55727:e=>{function t(e,t,s,r){return Math.round(e/s)+" "+r+(t>=1.5*s?"s":"")}e.exports=function(e,s){s=s||{};var r,i,o,n,a=typeof e;if("string"===a&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(c){var u=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*u;case"weeks":case"week":case"w":return 6048e5*u;case"days":case"day":case"d":return 864e5*u;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*u;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*u;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:break}}}return}if("number"===a&&isFinite(e)){return s.long?(i=Math.abs(r=e))>=864e5?t(r,i,864e5,"day"):i>=36e5?t(r,i,36e5,"hour"):i>=6e4?t(r,i,6e4,"minute"):i>=1e3?t(r,i,1e3,"second"):r+" ms":(n=Math.abs(o=e))>=864e5?Math.round(o/864e5)+"d":n>=36e5?Math.round(o/36e5)+"h":n>=6e4?Math.round(o/6e4)+"m":n>=1e3?Math.round(o/1e3)+"s":o+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},55982:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;let s=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(s+e),i=t.indexOf("--");return -1!==r&&(-1===i||r<i)}},56262:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(57975);let i=e=>r.types.isKeyObject(e)},58067:(e,t,s)=>{"use strict";let r=s(79428).Buffer,i=new(s(41204)).StringDecoder,o=s(28366),n=o.ReplyError,a=o.ParserError;var l=r.allocUnsafe(32768),c=0,u=null,h=0,d=0;function f(e){let t=e.offset,s=e.buffer,r=s.length-1;for(var i=t;i<r;)if(13===s[i++]){if(e.offset=i+1,!0===e.optionReturnBuffers)return e.buffer.slice(t,i-1);return e.buffer.toString("utf8",t,i-1)}}function p(e){let t=e.buffer.length-1;for(var s=e.offset,r=0;s<t;){let t=e.buffer[s++];if(13===t)return e.offset=s+1,r;r=10*r+(t-48)}}function y(e,t,s){e.arrayCache.push(t),e.arrayPos.push(s)}function m(e){let t=e.arrayCache.pop();var s=e.arrayPos.pop();if(e.arrayCache.length){let r=m(e);if(void 0===r)return void y(e,t,s);t[s++]=r}return g(e,t,s)}function g(e,t,s){let r=e.buffer.length;for(;s<t.length;){let i=e.offset;if(e.offset>=r)return void y(e,t,s);let o=b(e,e.buffer[e.offset++]);if(void 0===o){e.arrayCache.length||e.bufferCache.length||(e.offset=i),y(e,t,s);return}t[s]=o,s++}return t}function b(e,t){switch(t){case 36:let s=p(e);if(void 0===s)return;if(s<0)return null;let r=e.offset+s;if(r+2>e.buffer.length){e.bigStrSize=r+2,e.totalChunkSize=e.buffer.length,e.bufferCache.push(e.buffer);return}let i=e.offset;return(e.offset=r+2,!0===e.optionReturnBuffers)?e.buffer.slice(i,r):e.buffer.toString("utf8",i,r);case 43:return f(e);case 42:let o=p(e);return void 0===o?void 0:o<0?null:g(e,Array(o),0);case 58:return!0===e.optionStringNumbers?function(e){let t=e.buffer.length-1;var s=e.offset,r=0,i="";for(45===e.buffer[s]&&(i+="-",s++);s<t;){var o=e.buffer[s++];if(13===o)return e.offset=s+1,0!==r&&(i+=r),i;r>0x19999998?(i+=10*r+(o-48),r=0):48===o&&0===r?i+=0:r=10*r+(o-48)}}(e):function(e){let t=e.buffer.length-1;var s=e.offset,r=0,i=1;for(45===e.buffer[s]&&(i=-1,s++);s<t;){let t=e.buffer[s++];if(13===t)return e.offset=s+1,i*r;r=10*r+(t-48)}}(e);case 45:var l=f(e);if(void 0!==l)return!0===e.optionReturnBuffers&&(l=l.toString()),new n(l);return;default:let c=new a("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null,e.returnFatalError(c);return}}function S(){if(l.length>51200)if(1===h||d>2*h){let e=Math.floor(l.length/10),t=e<c?c:e;c=0,l=l.slice(t,l.length)}else d++,h--;else clearInterval(u),h=0,d=0,u=null}class k{constructor(e){if(!e)throw TypeError("Options are mandatory.");if("function"!=typeof e.returnError||"function"!=typeof e.returnReply)throw TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if("boolean"!=typeof e)throw TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if("boolean"!=typeof e)throw TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(null===this.buffer)this.buffer=e,this.offset=0;else if(0===this.bigStrSize){let t=this.buffer.length,s=t-this.offset,i=r.allocUnsafe(s+e.length);if(this.buffer.copy(i,0,this.offset,t),e.copy(i,s,0,e.length),this.buffer=i,this.offset=0,this.arrayCache.length){let e=m(this);if(void 0===e)return;this.returnReply(e)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var t=this.optionReturnBuffers?function(e){let t=e.bufferCache,s=e.offset,i=e.bigStrSize-s-2;var o=t.length,n=e.bigStrSize-e.totalChunkSize;if(e.offset=n,n<=2){if(2===o)return t[0].slice(s,t[0].length+n-2);o--,n=t[t.length-2].length+n}l.length<i+c&&(c>0x6f00000&&(c=0x3200000),l=r.allocUnsafe(i*(i>0x4b00000?2:3)+c),c=0,h++,null===u&&(u=setInterval(S,50)));let a=c;t[0].copy(l,a,s,t[0].length),c+=t[0].length-s;for(var d=1;d<o-1;d++)t[d].copy(l,c),c+=t[d].length;return t[d].copy(l,c,0,n-2),c+=n-2,l.slice(a,c)}(this):function(e){let t=e.bufferCache,s=e.offset;var r=t.length,o=e.bigStrSize-e.totalChunkSize;if(e.offset=o,o<=2){if(2===r)return t[0].toString("utf8",s,t[0].length+o-2);r--,o=t[t.length-2].length+o}for(var n=i.write(t[0].slice(s)),a=1;a<r-1;a++)n+=i.write(t[a]);return n+i.end(t[a].slice(0,o-2))}(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,void 0===(t=m(this))))return;this.returnReply(t)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let e=this.offset,t=this.buffer[this.offset++],s=b(this,t);if(void 0===s){this.arrayCache.length||this.bufferCache.length||(this.offset=e);return}45===t?this.returnError(s):this.returnReply(s)}this.buffer=null}}e.exports=k},58200:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(13941);let i=function(e,t,s,i,o){let n;if(void 0!==o.crit&&i?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(n=void 0!==s?new Map([...Object.entries(s),...t.entries()]):t,i.crit)){if(!n.has(a))throw new r.T0(`Extension Header Parameter "${a}" is not recognized`);if(void 0===o[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(n.get(a)&&void 0===i[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(i.crit)}},59313:e=>{var t=Object.prototype,s=t.hasOwnProperty,r=t.toString,i=t.propertyIsEnumerable;e.exports=function(e){var t,o,n,a,l,c,u,h;return!!(n=t=e)&&"object"==typeof n&&null!=(o=t)&&"number"==typeof(a=o.length)&&a>-1&&a%1==0&&a<=0x1fffffffffffff&&"[object Function]"!=(u=typeof(c=l=o),h=c&&("object"==u||"function"==u)?r.call(l):"")&&"[object GeneratorFunction]"!=h&&s.call(e,"callee")&&(!i.call(e,"callee")||"[object Arguments]"==r.call(e))}},60094:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,g:()=>n});var r=s(87803),i=s(56262);let o=e=>(0,i.A)(e)||(0,r.R)(e),n=["KeyObject"];(globalThis.CryptoKey||r.A?.CryptoKey)&&n.push("CryptoKey")},60305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REDIS_OPTIONS=void 0,t.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(50*e,2e3)},keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(10*e,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}},61063:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyIndexes=t.hasFlag=t.exists=t.list=void 0;let i=r(s(85377));t.list=Object.keys(i.default);let o={};function n(e){"string"!=typeof e&&(e=String(e));let t=e.indexOf("->");return -1===t?e.length:t}t.list.forEach(e=>{o[e]=i.default[e].flags.reduce(function(e,t){return e[t]=!0,e},{})}),t.exists=function(e){return!!i.default[e]},t.hasFlag=function(e,t){if(!o[e])throw Error("Unknown command "+e);return!!o[e][t]},t.getKeyIndexes=function(e,t,s){let r=i.default[e];if(!r)throw Error("Unknown command "+e);if(!Array.isArray(t))throw Error("Expect args to be an array");let o=[],a=!!(s&&s.parseExternalKey),l=(e,t)=>{let s=[],r=Number(e[t]);for(let e=0;e<r;e++)s.push(e+t+1);return s},c=(e,t,s)=>{for(let r=t;r<e.length-1;r+=1)if(String(e[r]).toLowerCase()===s.toLowerCase())return r+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":o.push(0,...l(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":o.push(...l(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":o.push(...l(t,0));break;case"georadius":{o.push(0);let e=c(t,5,"STORE");e&&o.push(e);let s=c(t,5,"STOREDIST");s&&o.push(s);break}case"georadiusbymember":{o.push(0);let e=c(t,4,"STORE");e&&o.push(e);let s=c(t,4,"STOREDIST");s&&o.push(s);break}case"sort":case"sort_ro":o.push(0);for(let e=1;e<t.length-1;e++){let s=t[e];if("string"!=typeof s)continue;let r=s.toUpperCase();"GET"===r?(e+=1,"#"!==(s=t[e])&&(a?o.push([e,n(s)]):o.push(e))):"BY"===r?(e+=1,a?o.push([e,n(t[e])]):o.push(e)):"STORE"===r&&(e+=1,o.push(e))}break;case"migrate":if(""===t[2])for(let e=5;e<t.length-1;e++){let s=t[e];if("string"==typeof s&&"KEYS"===s.toUpperCase()){for(let s=e+1;s<t.length;s++)o.push(s);break}}else o.push(2);break;case"xreadgroup":case"xread":for(let s=3*("xread"!==e);s<t.length-1;s++)if("STREAMS"===String(t[s]).toUpperCase()){for(let e=s+1;e<=s+(t.length-1-s)/2;e++)o.push(e);break}break;default:if(r.step>0){let e=r.keyStart-1,s=r.keyStop>0?r.keyStop:t.length+r.keyStop+1;for(let t=e;t<s;t+=r.step)o.push(t)}}return o}},61754:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=e=>Math.floor(e.getTime()/1e3)},63745:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var r=s(77598),i=s(13941),o=s(87803),n=s(56262),a=s(66939),l=s(60094),c=s(70916);new WeakMap;let u=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new i.T0("Unsupported key curve for this operation")}},h=(e,t)=>{let s;if((0,o.R)(e))s=r.KeyObject.from(e);else if((0,n.A)(e))s=e;else if((0,c.ll)(e))return e.crv;else throw TypeError((0,a.A)(e,...l.g));if("secret"===s.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(s.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${s.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${s.asymmetricKeyType.slice(1)}`;case"ec":{let e=s.asymmetricKeyDetails.namedCurve;if(t)return e;return u(e)}default:throw TypeError("Invalid asymmetric key type for this operation")}},d=(e,t)=>{let s;try{s=e instanceof r.KeyObject?e.asymmetricKeyDetails?.modulusLength:Buffer.from(e.n,"base64url").byteLength<<3}catch{}if("number"!=typeof s||s<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)},f=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function p(e,t){let s,o,n,a;if(t instanceof r.KeyObject)s=t.asymmetricKeyType,o=t.asymmetricKeyDetails;else switch(n=!0,t.kty){case"RSA":s="rsa";break;case"EC":s="ec";break;case"OKP":if("Ed25519"===t.crv){s="ed25519";break}if("Ed448"===t.crv){s="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(e){case"Ed25519":if("ed25519"!==s)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case"EdDSA":if(!["ed25519","ed448"].includes(s))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==s)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");d(t,e);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===s){let{hashAlgorithm:t,mgf1HashAlgorithm:s,saltLength:r}=o,i=parseInt(e.slice(-3),10);if(void 0!==t&&(t!==`sha${i}`||s!==t))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==r&&r>i>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==s)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");d(t,e),a={padding:r.constants.RSA_PKCS1_PSS_PADDING,saltLength:r.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==s)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=h(t),i=f.get(e);if(r!==i)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${i}, got ${r}`);a={dsaEncoding:"ieee-p1363"};break}default:throw new i.T0(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return n?{format:"jwk",key:t,...a}:a?{...a,key:t}:t}},64763:(e,t,s)=>{"use strict";s.d(t,{D0:()=>i,Rd:()=>r,xW:()=>o});let r=new TextEncoder,i=new TextDecoder;function o(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),s=0;for(let r of e)t.set(r,s),s+=r.length;return t}},64849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`;t.default={RedisCloudFixed:{ca:s},RedisCloudFlexible:{ca:s}}},65808:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeWithAutoPipelining=t.getFirstValueInFlattenedArray=t.shouldUseAutoPipelining=t.notAllowedAutoPipelineCommands=t.kCallbacks=t.kExec=void 0;let r=s(78745),i=s(39661),o=s(78497);function n(e){for(let t=0;t<e.length;t++){let s=e[t];if("string"==typeof s)return s;if(Array.isArray(s)||(0,r.isArguments)(s)){if(0===s.length)continue;return s[0]}let i=[s].flat();if(i.length>0)return i[0]}}t.kExec=Symbol("exec"),t.kCallbacks=Symbol("callbacks"),t.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select"],t.shouldUseAutoPipelining=function(e,s,r){return s&&e.options.enableAutoPipelining&&!e.isPipeline&&!t.notAllowedAutoPipelineCommands.includes(r)&&!e.options.autoPipeliningIgnoredCommands.includes(r)},t.getFirstValueInFlattenedArray=n,t.executeWithAutoPipelining=function e(s,a,l,c,u){if(s.isCluster&&!s.slots.length)return"wait"===s.status&&s.connect().catch(r.noop),(0,o.default)(new Promise(function(t,r){s.delayUntilReady(i=>{if(i)return void r(i);e(s,a,l,c,null).then(t,r)})}),u);let h=s.options.keyPrefix||"",d=s.isCluster?s.slots[i(`${h}${n(c)}`)].join(","):"main";if(!s._autoPipelines.has(d)){let e=s.pipeline();e[t.kExec]=!1,e[t.kCallbacks]=[],s._autoPipelines.set(d,e)}let f=s._autoPipelines.get(d);f[t.kExec]||(f[t.kExec]=!0,setImmediate(function e(s,r){if(s._runningAutoPipelines.has(r)||!s._autoPipelines.has(r))return;s._runningAutoPipelines.add(r);let i=s._autoPipelines.get(r);s._autoPipelines.delete(r);let o=i[t.kCallbacks];i[t.kCallbacks]=null,i.exec(function(t,i){if(s._runningAutoPipelines.delete(r),t)for(let e=0;e<o.length;e++)process.nextTick(o[e],t);else for(let e=0;e<o.length;e++)process.nextTick(o[e],...i[e]);s._autoPipelines.has(r)&&e(s,r)})},s,d));let p=new Promise(function(e,s){f[t.kCallbacks].push(function(t,r){if(t)return void s(t);e(r)}),"call"===a&&c.unshift(l),f[a](...c)});return(0,o.default)(p,u)}},66939:(e,t,s)=>{"use strict";function r(e,t,...s){if((s=s.filter(Boolean)).length>2){let t=s.pop();e+=`one of type ${s.join(", ")}, or ${t}.`}else 2===s.length?e+=`one of type ${s[0]} or ${s[1]}.`:e+=`of type ${s[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}s.d(t,{A:()=>i,t:()=>o});let i=(e,...t)=>r("Key must be ",e,...t);function o(e,t,...s){return r(`Key for the ${e} algorithm must be `,t,...s)}},67448:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTransactionSupport=void 0;let r=s(80454),i=s(78497),o=s(9768);t.addTransactionSupport=function(e){e.pipeline=function(e){let t=new o.default(this);return Array.isArray(e)&&t.addBatch(e),t};let{multi:t}=e;e.multi=function(e,s){if(void 0!==s||Array.isArray(e)||(s=e,e=null),s&&!1===s.pipeline)return t.call(this);let n=new o.default(this);n.multi(),Array.isArray(e)&&n.addBatch(e);let a=n.exec;n.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(r.noop),(0,i.default)(new Promise((e,t)=>{this.redis.delayUntilReady(s=>{if(s)return void t(s);this.exec(n).then(e,t)})}),e);if(this._transactions>0&&a.call(n),this.nodeifiedPromise)return a.call(n);let t=a.call(n);return(0,i.default)(t.then(function(e){let t=e[e.length-1];if(void 0===t)throw Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(t[0]){t[0].previousErrors=[];for(let s=0;s<e.length-1;++s)e[s][0]&&t[0].previousErrors.push(e[s][0]);throw t[0]}return(0,r.wrapMultiResult)(t[1])}),e)};let{execBuffer:l}=n;return n.execBuffer=function(e){return this._transactions>0&&l.call(n),n.exec(e)},n};let{exec:s}=e;e.exec=function(e){return(0,i.default)(s.call(this).then(function(e){return Array.isArray(e)&&(e=(0,r.wrapMultiResult)(e)),e}),e)}}},70916:(e,t,s)=>{"use strict";s.d(t,{M3:()=>n,W2:()=>o,ll:()=>i,t9:()=>a});var r=s(96277);function i(e){return(0,r.A)(e)&&"string"==typeof e.kty}function o(e){return"oct"!==e.kty&&"string"==typeof e.d}function n(e){return"oct"!==e.kty&&void 0===e.d}function a(e){return i(e)&&"oct"===e.kty&&"string"==typeof e.k}},72959:e=>{var t=/^(?:0|[1-9]\d*)$/;function s(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}var r=Object.prototype,i=r.hasOwnProperty,o=r.toString,n=r.propertyIsEnumerable,a=Math.max;function l(e,t,s,o){return void 0===e||h(e,r[s])&&!i.call(o,s)?t:e}function c(e,t){return t=a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=a(r.length-t,0),n=Array(o);++i<o;)n[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n,s(e,this,l)}}function u(e,s){return!!(s=null==s?0x1fffffffffffff:s)&&("number"==typeof e||t.test(e))&&e>-1&&e%1==0&&e<s}function h(e,t){return e===t||e!=e&&t!=t}var d=Array.isArray;function f(e){var t,s,r;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&"[object Function]"!=(r=p(s=e)?o.call(s):"")&&"[object GeneratorFunction]"!=r}function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var y=function(e){return c(function(t,s){var r=-1,i=s.length,o=i>1?s[i-1]:void 0,n=i>2?s[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,n&&function(e,t,s){if(!p(s))return!1;var r=typeof t;return("number"==r?!!(f(s)&&u(t,s.length)):"string"==r&&t in s)&&h(s[t],e)}(s[0],s[1],n)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var a=s[r];a&&e(t,a,r,o)}return t})}(function(e,t,s,a){var l;!function(e,t,s,r){s||(s={});for(var o=-1,n=t.length;++o<n;){var a=t[o],l=r?r(s[a],e[a],a,s,e):void 0;!function(e,t,s){var r=e[t];i.call(e,t)&&h(r,s)&&(void 0!==s||t in e)||(e[t]=s)}(s,a,void 0===l?e[a]:l)}}(t,f(l=t)?function(e,t){var s,r,a,l=d(e)||(a=r=s=e)&&"object"==typeof a&&f(r)&&i.call(s,"callee")&&(!n.call(s,"callee")||"[object Arguments]"==o.call(s))?function(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}(e.length,String):[],c=l.length,h=!!c;for(var p in e)(t||i.call(e,p))&&!(h&&("length"==p||u(p,c)))&&l.push(p);return l}(l,!0):function(e){if(!p(e)){var t,s,o=e,n=[];if(null!=o)for(var a in Object(o))n.push(a);return n}var l=(s=(t=e)&&t.constructor,t===("function"==typeof s&&s.prototype||r)),c=[];for(var u in e)"constructor"==u&&(l||!i.call(e,u))||c.push(u);return c}(l),e,a)});e.exports=c(function(e){return e.push(void 0,l),s(y,void 0,e)})},74528:(e,t,s)=>{"use strict";s.d(t,{Og:()=>f,Lf:()=>d,jU:()=>h});var r=s(13444),i=s(77598),o=s(4573);let n=e=>(0,i.createPrivateKey)({key:o.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),a=e=>(0,i.createPublicKey)({key:o.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),l=e=>e.d?(0,i.createPrivateKey)({format:"jwk",key:e}):(0,i.createPublicKey)({format:"jwk",key:e});var c=s(13941),u=s(96277);async function h(e,t,s){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return a(e,t,s)}async function d(e,t,s){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return n(e,t,s)}async function f(e,t){if(!(0,u.A)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,r.D4)(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new c.T0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return l({...e,alg:t});default:throw new c.T0('Unsupported "kty" (Key Type) Parameter value')}}},76650:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(77598),i=s(87803);function o(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function n(e,t){return e.name===t}function a(e){return parseInt(e.name.slice(4),10)}var l=s(66939),c=s(60094),u=s(70916);function h(e,t,s){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError((0,l.A)(t,...c.g));return(0,r.createSecretKey)(t)}if(t instanceof r.KeyObject)return t;if((0,i.R)(t))return!function(e,t,...s){switch(t){case"HS256":case"HS384":case"HS512":{if(!n(e.algorithm,"HMAC"))throw o("HMAC");let s=parseInt(t.slice(2),10);if(a(e.algorithm.hash)!==s)throw o(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!n(e.algorithm,"RSASSA-PKCS1-v1_5"))throw o("RSASSA-PKCS1-v1_5");let s=parseInt(t.slice(2),10);if(a(e.algorithm.hash)!==s)throw o(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!n(e.algorithm,"RSA-PSS"))throw o("RSA-PSS");let s=parseInt(t.slice(2),10);if(a(e.algorithm.hash)!==s)throw o(`SHA-${s}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw o("Ed25519 or Ed448");break;case"Ed25519":if(!n(e.algorithm,"Ed25519"))throw o("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!n(e.algorithm,"ECDSA"))throw o("ECDSA");let s=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==s)throw o(s,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}var r=e,i=s;if(i.length&&!i.some(e=>r.usages.includes(e))){let e="CryptoKey does not support this operation, its usages must include ";if(i.length>2){let t=i.pop();e+=`one of ${i.join(", ")}, or ${t}.`}else 2===i.length?e+=`one of ${i[0]} or ${i[1]}.`:e+=`${i[0]}.`;throw TypeError(e)}}(t,e,s),r.KeyObject.from(t);if(u.ll(t))return e.startsWith("HS")?(0,r.createSecretKey)(Buffer.from(t.k,"base64url")):t;throw TypeError((0,l.A)(t,...c.g,"Uint8Array","JSON Web Key"))}},78497:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(78524);function i(e){setTimeout(function(){throw e},0)}t.default=function(e,t,s){return"function"==typeof t&&e.then(e=>{let o;(o=void 0!==s&&Object(s).spread&&Array.isArray(e)?r.tryCatch(t).apply(void 0,[null].concat(e)):void 0===e?r.tryCatch(t)(null):r.tryCatch(t)(null,e))===r.errorObj&&i(o.e)},e=>{if(!e){let t=Error(e+"");Object.assign(t,{cause:e}),e=t}let s=r.tryCatch(t)(e);s===r.errorObj&&i(s.e)}),e}},78524:(e,t)=>{"use strict";let s;function r(e,r){try{let e=s;return s=null,e.apply(this,arguments)}catch(e){return t.errorObj.e=e,t.errorObj}}Object.defineProperty(t,"__esModule",{value:!0}),t.tryCatch=t.errorObj=void 0,t.errorObj={e:{}},t.tryCatch=function(e){return s=e,r}},78745:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArguments=t.defaults=t.noop=void 0,t.defaults=s(72959),t.isArguments=s(59313),t.noop=function(){}},79527:(e,t,s)=>{"use strict";let r,i=s(21820),o=s(55982),n=process.env;function a(e){var t;return 0!==(t=function(e){if(!1===r)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!e.isTTY&&!0!==r)return 0;let t=+!!r;if("win32"===process.platform){let e=i.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in n)||"codeship"===n.CI_NAME?1:t;if("TEAMCITY_VERSION"in n)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION);if("truecolor"===n.COLORTERM)return 3;if("TERM_PROGRAM"in n){let e=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:(n.TERM,t)}(e))&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}o("no-color")||o("no-colors")||o("color=false")?r=!1:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(r=!0),"FORCE_COLOR"in n&&(r=0===n.FORCE_COLOR.length||0!==parseInt(n.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},80454:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.defaults=t.Debug=t.zipMap=t.CONNECTION_CLOSED_ERROR_MSG=t.shuffle=t.sample=t.resolveTLSProfile=t.parseURL=t.optimizeErrorStack=t.toArg=t.convertMapToArray=t.convertObjectToArray=t.timeout=t.packObject=t.isInt=t.wrapMultiResult=t.convertBufferToString=void 0;let r=s(79551),i=s(78745);Object.defineProperty(t,"defaults",{enumerable:!0,get:function(){return i.defaults}}),Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return i.noop}}),t.Debug=s(37045).default;let o=s(64849);function n(e){let t=parseFloat(e);return!isNaN(e)&&(0|t)===t}t.convertBufferToString=function e(t,s){if(t instanceof Buffer)return t.toString(s);if(Array.isArray(t)){let r=t.length,i=Array(r);for(let o=0;o<r;++o)i[o]=t[o]instanceof Buffer&&"utf8"===s?t[o].toString():e(t[o],s);return i}return t},t.wrapMultiResult=function(e){if(!e)return null;let t=[],s=e.length;for(let r=0;r<s;++r){let s=e[r];s instanceof Error?t.push([s]):t.push([null,s])}return t},t.isInt=n,t.packObject=function(e){let t={},s=e.length;for(let r=1;r<s;r+=2)t[e[r-1]]=e[r];return t},t.timeout=function(e,t){let s=null,r=function(){s&&(clearTimeout(s),s=null,e.apply(this,arguments))};return s=setTimeout(r,t,Error("timeout")),r},t.convertObjectToArray=function(e){let t=[],s=Object.keys(e);for(let r=0,i=s.length;r<i;r++)t.push(s[r],e[s[r]]);return t},t.convertMapToArray=function(e){let t=[],s=0;return e.forEach(function(e,r){t[s]=r,t[s+1]=e,s+=2}),t},t.toArg=function(e){return null==e?"":String(e)},t.optimizeErrorStack=function(e,t,s){let r,i=t.split("\n"),o="";for(r=1;r<i.length&&-1!==i[r].indexOf(s);++r);for(let e=r;e<i.length;++e)o+="\n"+i[e];if(e.stack){let t=e.stack.indexOf("\n");e.stack=e.stack.slice(0,t)+o}return e},t.parseURL=function(e){if(n(e))return{port:e};let t=(0,r.parse)(e,!0,!0);t.slashes||"/"===e[0]||(e="//"+e,t=(0,r.parse)(e,!0,!0));let s=t.query||{},o={};if(t.auth){let e=t.auth.indexOf(":");o.username=-1===e?t.auth:t.auth.slice(0,e),o.password=-1===e?"":t.auth.slice(e+1)}if(t.pathname&&("redis:"===t.protocol||"rediss:"===t.protocol?t.pathname.length>1&&(o.db=t.pathname.slice(1)):o.path=t.pathname),t.host&&(o.host=t.hostname),t.port&&(o.port=t.port),"string"==typeof s.family){let e=Number.parseInt(s.family,10);Number.isNaN(e)||(o.family=e)}return(0,i.defaults)(o,s),o},t.resolveTLSProfile=function(e){let t=null==e?void 0:e.tls;"string"==typeof t&&(t={profile:t});let s=o.default[null==t?void 0:t.profile];return s&&(t=Object.assign({},s,t),delete t.profile,e=Object.assign({},e,{tls:t})),e},t.sample=function(e,t=0){let s=e.length;return t>=s?null:e[t+Math.floor(Math.random()*(s-t))]},t.shuffle=function(e){let t=e.length;for(;t>0;){let s=Math.floor(Math.random()*t);t--,[e[t],e[s]]=[e[s],e[t]]}return e},t.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.",t.zipMap=function(e,t){let s=new Map;return e.forEach((e,r)=>{s.set(e,t[r])}),s}},80777:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FailoverDetector=void 0;let r=(0,s(80454).Debug)("FailoverDetector"),i="+switch-master";class o{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){for(let e of(this.isDisconnected=!0,this.sentinels))e.client.disconnect()}async subscribe(){r("Starting FailoverDetector");let e=[];for(let t of this.sentinels){let s=t.client.subscribe(i).catch(e=>{r("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,e.message)});e.push(s),t.client.on("message",e=>{this.isDisconnected||e!==i||this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,r("Failover detected, disconnecting"),this.connector.disconnect()}}t.FailoverDetector=o},81196:(e,t,s)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;t.splice(1,0,s,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=s(21239)(t);let{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},84177:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SentinelIterator=void 0;let r=s(91645),i=s(80454),o=s(34631),n=s(53591);t.SentinelIterator=n.default;let a=s(2144),l=s(18991),c=s(80777),u=(0,i.Debug)("SentinelConnector");class h extends a.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw Error("Requires the name of master.");this.sentinelIterator=new n.default(this.options.sentinels)}check(e){let t=!e.role||this.options.role===e.role;return t||(u("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){let t;this.connecting=!0,this.retryAttempts=0;let s=async()=>{let n=this.sentinelIterator.next();if(n.done){this.sentinelIterator.reset(!1);let r="function"==typeof this.options.sentinelRetryStrategy?this.options.sentinelRetryStrategy(++this.retryAttempts):null,i="number"!=typeof r?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${r}ms.`;t&&(i+=` Last error: ${t.message}`),u(i);let o=Error(i);if("number"==typeof r)return e("error",o),await new Promise(e=>setTimeout(e,r)),s();throw o}let a=null,l=null;try{a=await this.resolve(n.value)}catch(e){l=e}if(!this.connecting)throw Error(i.CONNECTION_CLOSED_ERROR_MSG);let c=n.value.host+":"+n.value.port;if(a)return u("resolved: %s:%s from sentinel %s",a.host,a.port,c),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(a,this.options.tls),this.stream=(0,o.connect)(a),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,r.createConnection)(a),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",e=>{this.firstError=e}),this.stream;{let r=l?"failed to connect to sentinel "+c+" because "+l.message:"connected to sentinel "+c+" successfully, but got an invalid reply: "+a;return u(r),e("sentinelError",Error(r)),l&&(t=l),s()}};return s()}async updateSentinels(e){if(!this.options.updateSentinels)return;let t=await e.sentinel("sentinels",this.options.name);Array.isArray(t)&&(t.map(i.packObject).forEach(e=>{if(-1===(e.flags?e.flags.split(","):[]).indexOf("disconnected")&&e.ip&&e.port){let t=this.sentinelNatResolve(d(e));this.sentinelIterator.add(t)&&u("adding sentinel %s:%s",t.host,t.port)}}),u("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let t=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)}async resolveSlave(e){let t=await e.sentinel("slaves",this.options.name);if(!Array.isArray(t))return null;let s=t.map(i.packObject).filter(e=>e.flags&&!e.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(function(e,t){let s;if(0===e.length)return null;if("function"==typeof t)s=t(e);else if(null!==t&&"object"==typeof t){let r=Array.isArray(t)?t:[t];r.sort((e,t)=>(e.prio||(e.prio=1),t.prio||(t.prio=1),e.prio<t.prio)?-1:+(e.prio>t.prio));for(let t=0;t<r.length;t++){for(let i=0;i<e.length;i++){let o=e[i];if(o.ip===r[t].ip&&o.port===r[t].port){s=o;break}}if(s)break}}return s||(s=(0,i.sample)(e)),d(s)}(s,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let t=`${e.host}:${e.port}`,s=e;return"function"==typeof this.options.natMap?s=this.options.natMap(t)||e:"object"==typeof this.options.natMap&&(s=this.options.natMap[t]||e),s}connectToSentinel(e,t){return new l.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t})}async resolve(e){let t=this.connectToSentinel(e);t.on("error",f);try{if("slave"===this.options.role)return await this.resolveSlave(t);return await this.resolveMaster(t)}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let t=[];for(;t.length<this.options.sentinelMaxConnections;){let{done:e,value:s}=this.sentinelIterator.next();if(e)break;let r=this.connectToSentinel(s,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});r.on("reconnecting",()=>{var e;null==(e=this.emitter)||e.emit("sentinelReconnecting")}),t.push({address:s,client:r})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new c.FailoverDetector(this,t),await this.failoverDetector.subscribe(),null==(e=this.emitter)||e.emit("failoverSubscribed")}}function d(e){return{host:e.ip,port:Number(e.port)}}function f(){}t.default=h},84448:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=t.ReplyError=t.SentinelIterator=t.SentinelConnector=t.AbstractConnector=t.Pipeline=t.ScanStream=t.Command=t.Cluster=t.Redis=t.default=void 0,t=e.exports=s(18991).default;var r=s(18991);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var i=s(18991);Object.defineProperty(t,"Redis",{enumerable:!0,get:function(){return i.default}});var o=s(39381);Object.defineProperty(t,"Cluster",{enumerable:!0,get:function(){return o.default}});var n=s(92933);Object.defineProperty(t,"Command",{enumerable:!0,get:function(){return n.default}});var a=s(53387);Object.defineProperty(t,"ScanStream",{enumerable:!0,get:function(){return a.default}});var l=s(9768);Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return l.default}});var c=s(2144);Object.defineProperty(t,"AbstractConnector",{enumerable:!0,get:function(){return c.default}});var u=s(84177);Object.defineProperty(t,"SentinelConnector",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"SentinelIterator",{enumerable:!0,get:function(){return u.SentinelIterator}}),t.ReplyError=s(28366).ReplyError,Object.defineProperty(t,"Promise",{get:()=>(console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise),set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}}),t.print=function(e,t){e?console.log("Error: "+e):console.log("Reply: "+t)}},85377:e=>{"use strict";e.exports=JSON.parse('{"acl":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"append":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"asking":{"arity":1,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"auth":{"arity":-2,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"bgrewriteaof":{"arity":1,"flags":["admin","noscript","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"bgsave":{"arity":-1,"flags":["admin","noscript","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"bitcount":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"bitfield":{"arity":-2,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"bitfield_ro":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"bitop":{"arity":-4,"flags":["write","denyoom"],"keyStart":2,"keyStop":-1,"step":1},"bitpos":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"blmove":{"arity":6,"flags":["write","denyoom","noscript","blocking"],"keyStart":1,"keyStop":2,"step":1},"blmpop":{"arity":-5,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"blpop":{"arity":-3,"flags":["write","noscript","blocking"],"keyStart":1,"keyStop":-2,"step":1},"brpop":{"arity":-3,"flags":["write","noscript","blocking"],"keyStart":1,"keyStop":-2,"step":1},"brpoplpush":{"arity":4,"flags":["write","denyoom","noscript","blocking"],"keyStart":1,"keyStop":2,"step":1},"bzmpop":{"arity":-5,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"bzpopmax":{"arity":-3,"flags":["write","noscript","blocking","fast"],"keyStart":1,"keyStop":-2,"step":1},"bzpopmin":{"arity":-3,"flags":["write","noscript","blocking","fast"],"keyStart":1,"keyStop":-2,"step":1},"client":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"cluster":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"command":{"arity":-1,"flags":["loading","stale"],"keyStart":0,"keyStop":0,"step":0},"config":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"copy":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"dbsize":{"arity":1,"flags":["readonly","fast"],"keyStart":0,"keyStop":0,"step":0},"debug":{"arity":-2,"flags":["admin","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"decr":{"arity":2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"decrby":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"del":{"arity":-2,"flags":["write"],"keyStart":1,"keyStop":-1,"step":1},"discard":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"dump":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"echo":{"arity":2,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"eval":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"eval_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"evalsha":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"evalsha_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"exec":{"arity":1,"flags":["noscript","loading","stale","skip_slowlog"],"keyStart":0,"keyStop":0,"step":0},"exists":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"expire":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"expireat":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"expiretime":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"failover":{"arity":-1,"flags":["admin","noscript","stale"],"keyStart":0,"keyStop":0,"step":0},"fcall":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"fcall_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"flushall":{"arity":-1,"flags":["write"],"keyStart":0,"keyStop":0,"step":0},"flushdb":{"arity":-1,"flags":["write"],"keyStart":0,"keyStop":0,"step":0},"function":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"geoadd":{"arity":-5,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"geodist":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geohash":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geopos":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"georadius":{"arity":-6,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"georadius_ro":{"arity":-6,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"georadiusbymember":{"arity":-5,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"georadiusbymember_ro":{"arity":-5,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geosearch":{"arity":-7,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geosearchstore":{"arity":-8,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"get":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"getbit":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"getdel":{"arity":2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"getex":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"getrange":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"getset":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hdel":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"hello":{"arity":-1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"hexists":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hget":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hgetall":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hincrby":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hincrbyfloat":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hkeys":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hmget":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hmset":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hrandfield":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hset":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hsetnx":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hstrlen":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hvals":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"incr":{"arity":2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"incrby":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"incrbyfloat":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"info":{"arity":-1,"flags":["loading","stale"],"keyStart":0,"keyStop":0,"step":0},"keys":{"arity":2,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"lastsave":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"latency":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"lcs":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":2,"step":1},"lindex":{"arity":3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"linsert":{"arity":5,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"llen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"lmove":{"arity":5,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"lmpop":{"arity":-4,"flags":["write","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"lolwut":{"arity":-1,"flags":["readonly","fast"],"keyStart":0,"keyStop":0,"step":0},"lpop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"lpos":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"lpush":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"lpushx":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"lrange":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"lrem":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"lset":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"ltrim":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"memory":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"mget":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"migrate":{"arity":-6,"flags":["write","movablekeys"],"keyStart":3,"keyStop":3,"step":1},"module":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"monitor":{"arity":1,"flags":["admin","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"move":{"arity":3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"mset":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":2},"msetnx":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":2},"multi":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"object":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"persist":{"arity":2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpire":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpireat":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpiretime":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"pfadd":{"arity":-2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"pfcount":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"pfdebug":{"arity":3,"flags":["write","denyoom","admin"],"keyStart":2,"keyStop":2,"step":1},"pfmerge":{"arity":-2,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"pfselftest":{"arity":1,"flags":["admin"],"keyStart":0,"keyStop":0,"step":0},"ping":{"arity":-1,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"psetex":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"psubscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"psync":{"arity":-3,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"pttl":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"publish":{"arity":3,"flags":["pubsub","loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"pubsub":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"punsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"quit":{"arity":-1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"randomkey":{"arity":1,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"readonly":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"readwrite":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"rename":{"arity":3,"flags":["write"],"keyStart":1,"keyStop":2,"step":1},"renamenx":{"arity":3,"flags":["write","fast"],"keyStart":1,"keyStop":2,"step":1},"replconf":{"arity":-1,"flags":["admin","noscript","loading","stale","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"replicaof":{"arity":3,"flags":["admin","noscript","stale","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"reset":{"arity":1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"restore":{"arity":-4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"restore-asking":{"arity":-4,"flags":["write","denyoom","asking"],"keyStart":1,"keyStop":1,"step":1},"role":{"arity":1,"flags":["noscript","loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"rpop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"rpoplpush":{"arity":3,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"rpush":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"rpushx":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"sadd":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"save":{"arity":1,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"scan":{"arity":-2,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"scard":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"script":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"sdiff":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sdiffstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"select":{"arity":2,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"set":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setbit":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setex":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setnx":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"setrange":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"shutdown":{"arity":-1,"flags":["admin","noscript","loading","stale","no_multi","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"sinter":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sintercard":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"sinterstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"sismember":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"slaveof":{"arity":3,"flags":["admin","noscript","stale","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"slowlog":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"smembers":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"smismember":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"smove":{"arity":4,"flags":["write","fast"],"keyStart":1,"keyStop":2,"step":1},"sort":{"arity":-2,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"sort_ro":{"arity":-2,"flags":["readonly","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"spop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"spublish":{"arity":3,"flags":["pubsub","loading","stale","fast"],"keyStart":1,"keyStop":1,"step":1},"srandmember":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"srem":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"sscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"ssubscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":1,"keyStop":-1,"step":1},"strlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"subscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"substr":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"sunion":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sunionstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"sunsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":1,"keyStop":-1,"step":1},"swapdb":{"arity":3,"flags":["write","fast"],"keyStart":0,"keyStop":0,"step":0},"sync":{"arity":1,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"time":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"touch":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"ttl":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"type":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"unlink":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":-1,"step":1},"unsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"unwatch":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"wait":{"arity":3,"flags":["noscript"],"keyStart":0,"keyStop":0,"step":0},"watch":{"arity":-2,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":1,"keyStop":-1,"step":1},"xack":{"arity":-4,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xadd":{"arity":-5,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"xautoclaim":{"arity":-6,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xclaim":{"arity":-6,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xdel":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xgroup":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"xinfo":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"xlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"xpending":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xread":{"arity":-4,"flags":["readonly","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"xreadgroup":{"arity":-7,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"xrevrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xsetid":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"xtrim":{"arity":-4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zadd":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"zcard":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zcount":{"arity":4,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zdiff":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zdiffstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"zincrby":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"zinter":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zintercard":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zinterstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"zlexcount":{"arity":4,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zmpop":{"arity":-4,"flags":["write","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zmscore":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zpopmax":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zpopmin":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zrandmember":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangebylex":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangebyscore":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangestore":{"arity":-5,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"zrank":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zrem":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zremrangebylex":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zremrangebyrank":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zremrangebyscore":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zrevrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrangebylex":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrangebyscore":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrank":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zscore":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zunion":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zunionstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1}}')},87075:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readyHandler=t.errorHandler=t.closeHandler=t.connectHandler=void 0;let r=s(28366),i=s(92933),o=s(25038),n=s(80454),a=s(48960),l=(0,n.Debug)("connection");function c(e){let t=new r.AbortError("Command aborted due to connection close");return t.command={name:e.name,args:e.args},t}t.connectHandler=function(e){return function(){e.setStatus("connect"),e.resetCommandQueue();let s=!1,{connectionEpoch:r}=e;e.condition.auth&&e.auth(e.condition.auth,function(t){r===e.connectionEpoch&&t&&(-1!==t.message.indexOf("no password is set")?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):-1!==t.message.indexOf("without any password configured for the default user")?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):-1!==t.message.indexOf("wrong number of arguments for 'auth' command")?console.warn("[ERROR] The server returned \"wrong number of arguments for 'auth' command\". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under."):(s=!0,e.recoverFromFatalError(t,t)))}),e.condition.select&&e.select(e.condition.select).catch(t=>{e.silentEmit("error",t)}),e.options.enableReadyCheck||t.readyHandler(e)(),new a.default(e,{stringNumbers:e.options.stringNumbers}),e.options.enableReadyCheck&&e._readyCheck(function(i,o){r===e.connectionEpoch&&(i?s||e.recoverFromFatalError(Error("Ready check failed: "+i.message),i):e.connector.check(o)?t.readyHandler(e)():e.disconnect(!0))})}},t.closeHandler=function(e){return function(){let s=e.status;if(e.setStatus("close"),e.commandQueue.length&&function(e){var t;let s=0;for(let r=0;r<e.length;){let i=null==(t=e.peekAt(r))?void 0:t.command,o=i.pipelineIndex;if((void 0===o||0===o)&&(s=0),void 0!==o&&o!==s++){e.remove(r,1),i.reject(c(i));continue}r++}}(e.commandQueue),e.offlineQueue.length&&function(e){var t;for(let s=0;s<e.length;){let r=null==(t=e.peekAt(s))?void 0:t.command;if("multi"===r.name)break;if("exec"===r.name){e.remove(s,1),r.reject(c(r));break}r.inTransaction?(e.remove(s,1),r.reject(c(r))):s++}}(e.offlineQueue),"ready"===s&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,l("skip reconnecting since the connection is manually closed."),t();if("function"!=typeof e.options.retryStrategy)return l("skip reconnecting because `retryStrategy` is not a function"),t();let r=e.options.retryStrategy(++e.retryAttempts);if("number"!=typeof r)return l("skip reconnecting because `retryStrategy` doesn't return a number"),t();l("reconnect in %sms",r),e.setStatus("reconnecting",r),e.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,e.connect().catch(n.noop)},r);let{maxRetriesPerRequest:i}=e.options;"number"==typeof i&&(i<0?l("maxRetriesPerRequest is negative, ignoring..."):0==e.retryAttempts%(i+1)&&(l("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new o.MaxRetriesPerRequestError(i))))};function t(){e.setStatus("end"),e.flushQueue(Error(n.CONNECTION_CLOSED_ERROR_MSG))}},t.errorHandler=function(e){return function(t){l("error: %s",t),e.silentEmit("error",t)}},t.readyHandler=function(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then(()=>e.setStatus("monitoring"),t=>e.emit("error",t));let{sendCommand:t}=e;e.sendCommand=function(s){return i.default.checkFlag("VALID_IN_MONITOR_MODE",s.name)?t.call(e,s):(s.reject(Error("Connection is in monitoring mode, can't process commands.")),s.promise)},e.once("close",function(){delete e.sendCommand});return}let t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.connectionName&&(l("set the connection name [%s]",e.options.connectionName),e.client("setname",e.options.connectionName).catch(n.noop)),e.options.readOnly&&(l("set the connection to readonly mode"),e.readonly().catch(n.noop)),e.prevCondition){let s=e.prevCondition;if(e.prevCondition=null,s.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(l("connect to db [%d]",t),e.select(t));let r=s.subscriber.channels("subscribe");r.length&&(l("subscribe %d channels",r.length),e.subscribe(r));let i=s.subscriber.channels("psubscribe");i.length&&(l("psubscribe %d channels",i.length),e.psubscribe(i));let o=s.subscriber.channels("ssubscribe");o.length&&(l("ssubscribe %d channels",o.length),e.ssubscribe(o))}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(l("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){let t=e.prevCommandQueue.shift();t.select!==e.condition.select&&"select"!==t.command.name&&e.select(t.select),e.sendCommand(t.command,t.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){l("send %d commands in offline queue",e.offlineQueue.length);let t=e.offlineQueue;for(e.resetOfflineQueue();t.length>0;){let s=t.shift();s.select!==e.condition.select&&"select"!==s.command.name&&e.select(s.select),e.sendCommand(s.command,s.stream)}}e.condition.select!==t&&(l("connect to db [%d]",t),e.select(t))}}},87803:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,R:()=>n});var r=s(77598),i=s(57975);let o=r.webcrypto,n=e=>i.types.isCryptoKey(e)},92933:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(61063),i=s(39661),o=s(78497),n=s(80454);class a{constructor(e,t=[],s={},r){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=s.replyEncoding,this.errorStack=s.errorStack,this.args=t.flat(),this.callback=r,this.initPromise(),s.keyPrefix){let e=s.keyPrefix instanceof Buffer,t=e?s.keyPrefix:null;this._iterateKeys(r=>r instanceof Buffer?(null===t&&(t=Buffer.from(s.keyPrefix)),Buffer.concat([t,r])):e?Buffer.concat([s.keyPrefix,Buffer.from(String(r))]):s.keyPrefix+r)}s.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(a.FLAGS).reduce((e,t)=>(e[t]={},a.FLAGS[t].forEach(s=>{e[t][s]=!0}),e),{})),this.flagMap}getSlot(){if(void 0===this.slot){let e=this.getKeys()[0];this.slot=null==e?null:i(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t,s="*"+(this.args.length+1)+"\r\n$"+Buffer.byteLength(this.name)+"\r\n"+this.name+"\r\n";if(this.bufferMode){let e=new u;e.push(s);for(let t=0;t<this.args.length;++t){let s=this.args[t];s instanceof Buffer?0===s.length?e.push("$0\r\n\r\n"):(e.push("$"+s.length+"\r\n"),e.push(s),e.push("\r\n")):e.push("$"+Buffer.byteLength(s)+"\r\n"+s+"\r\n")}t=e.toBuffer()}else{t=s;for(let e=0;e<this.args.length;++e){let s=this.args[e];t+="$"+Buffer.byteLength(s)+"\r\n"+s+"\r\n"}}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){let t=this.args[e];"string"==typeof t||(t instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,n.toArg)(t))}}transformReply(e){this.replyEncoding&&(e=(0,n.convertBufferToString)(e,this.replyEncoding));let t=a._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(Error("Command timed out"))},e))}initPromise(){let e=new Promise((e,t)=>{if(!this.transformed){this.transformed=!0;let e=a._transformer.argument[this.name];e&&(this.args=e(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(e),this.errorStack?this.reject=e=>{t((0,n.optimizeErrorStack)(e,this.errorStack.stack,__dirname))}:this.reject=t});this.promise=(0,o.default)(e,this.callback)}_iterateKeys(e=e=>e){if(void 0===this.keys&&(this.keys=[],(0,r.exists)(this.name)))for(let t of(0,r.getKeyIndexes)(this.name,this.args))this.args[t]=e(this.args[t]),this.keys.push(this.args[t]);return this.keys}_convertValue(e){return t=>{try{let s=this._commandTimeoutTimer;s&&(clearTimeout(s),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(e){this.reject(e)}return this.promise}}}t.default=a,a.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"]},a._transformer={argument:{},reply:{}};let l=function(e){if(1===e.length){if(e[0]instanceof Map)return(0,n.convertMapToArray)(e[0]);if("object"==typeof e[0]&&null!==e[0])return(0,n.convertObjectToArray)(e[0])}return e},c=function(e){if(2===e.length){if(e[1]instanceof Map)return[e[0]].concat((0,n.convertMapToArray)(e[1]));if("object"==typeof e[1]&&null!==e[1])return[e[0]].concat((0,n.convertObjectToArray)(e[1]))}return e};a.setArgumentTransformer("mset",l),a.setArgumentTransformer("msetnx",l),a.setArgumentTransformer("hset",c),a.setArgumentTransformer("hmset",c),a.setReplyTransformer("hgetall",function(e){if(Array.isArray(e)){let t={};for(let s=0;s<e.length;s+=2){let r=e[s],i=e[s+1];r in t?Object.defineProperty(t,r,{value:i,configurable:!0,enumerable:!0,writable:!0}):t[r]=i}return t}return e});class u{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),t=0;for(let s of this.items){let r=Buffer.byteLength(s);Buffer.isBuffer(s)?s.copy(e,t):e.write(s,t,r),t+=r}return e}}},93724:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(28366);class i extends r.AbortError{constructor(e){super(`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}t.default=i},96277:(e,t,s)=>{"use strict";function r(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}s.d(t,{A:()=>r})},96377:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SentinelConnector=t.StandaloneConnector=void 0,t.StandaloneConnector=s(6239).default,t.SentinelConnector=s(84177).default},97975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,t){this.set[r(e)][t]=!0}del(e,t){delete this.set[r(e)][t]}channels(e){return Object.keys(this.set[r(e)])}isEmpty(){return 0===this.channels("subscribe").length&&0===this.channels("psubscribe").length&&0===this.channels("ssubscribe").length}}function r(e){return"unsubscribe"===e?"subscribe":"punsubscribe"===e?"psubscribe":"sunsubscribe"===e?"ssubscribe":e}t.default=s}};