exports.id=470,exports.ids=[470],exports.modules={483:()=>{},3258:(e,s,o)=>{"use strict";o.d(s,{A:()=>h});var r=o(9668),t=o.n(r);o(6344);var i=o(3873),n=o.n(i),a=o(9021),l=o.n(a);let c=n().join(process.cwd(),"logs");l().existsSync(c)||l().mkdirSync(c,{recursive:!0});let p=t().format.combine(t().format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),t().format.printf(({timestamp:e,level:s,message:o})=>`${e} [${s.toUpperCase()}]: ${o}`)),u=t().format.combine(t().format.timestamp({format:"YYYY-MM-DD HH:mm:ss.SSS"}),t().format.colorize({all:!0}),t().format.printf(({timestamp:e,level:s,message:o})=>{let r=s.padEnd(15);return`ğŸ•’ ${e} | ${r} | ${o}`})),d=new(t()).transports.DailyRotateFile({filename:n().join(c,"%DATE%.log"),datePattern:"YYYY-MM-DD",maxSize:"20m",maxFiles:"14d",format:p}),m=new(t()).transports.Console({format:u}),h=t().createLogger({level:"info",transports:[m,d]})},4907:()=>{},4958:(e,s,o)=>{"use strict";o.d(s,{z:()=>t});var r=o(6330);let t=globalThis.prisma??new r.PrismaClient},4997:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=4997,e.exports=s},5807:(e,s,o)=>{"use strict";o.d(s,{CE:()=>i,Cf:()=>t,Fw:()=>r,Pb:()=>l,gz:()=>p,j1:()=>c,v3:()=>a,yI:()=>n});var r=function(e){return e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedGrantType="unsupported_grant_type",e.InvalidScope="invalid_scope",e.AccessDenied="access_denied",e.UnsupportedResponseType="unsupported_response_type",e.ServerError="server_error",e.TemporarilyUnavailable="temporarily_unavailable",e.InvalidToken="invalid_token",e.InsufficientScope="insufficient_scope",e}({});class t extends Error{constructor(e,s=500,o="INTERNAL_SERVER_ERROR",r){super(e),this.name=this.constructor.name,this.status=s,this.code=o,this.context=r}toApiResponse(){return{success:!1,error:{code:this.code,message:this.message,details:this.context}}}log(e=console,s){e.error({name:this.name,message:this.message,status:this.status,code:this.code,context:this.context,additionalContext:s,stack:this.stack})}}class i extends t{constructor(e="Resource not found.",s="RESOURCE_NOT_FOUND",o){super(e,404,s,o)}}class n extends t{constructor(e="Validation failed.",s,o="VALIDATION_ERROR"){super(e,400,o,s)}}class a extends t{constructor(e="Authentication failed.",s,o="AUTHENTICATION_FAILED"){super(e,401,o,s)}}class l extends t{constructor(e,s=400,o="TOKEN_ERROR",r){super(e,s,o,r)}}class c extends t{constructor(e="System configuration error.",s){super(e,500,"CONFIGURATION_ERROR",s)}}class p extends t{constructor(e,s,o=400,r,t){super(e,o,s,t),this.oauth2ErrorCode=s,this.errorUri=r}toOAuth2Response(){let e={error:this.oauth2ErrorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}toApiResponse(){let e=super.toApiResponse();return e.error&&this.errorUri&&(e.error.details={...e.error.details,error_uri:this.errorUri}),e}}},8891:(e,s,o)=>{"use strict";o.d(s,{A:()=>r.z,z:()=>r.z}),o(6330);var r=o(4958),t=o(488),i=o.n(t),n=o(5433);i().config();let a={host:process.env.MYSQL_HOST||"localhost",port:parseInt(process.env.MYSQL_PORT||"3306",10),user:process.env.MYSQL_USER||"root",password:process.env.MYSQL_PASSWORD||"",database:process.env.MYSQL_DATABASE||"mydb",waitForConnections:!0,connectionLimit:10,queueLimit:0,enableKeepAlive:!0,keepAliveInitialDelay:0,multipleStatements:!0,charset:"utf8mb4"},l=globalThis.mysqlPool||(console.log("æ­£åœ¨åˆå§‹åŒ– MySQL è¿æ¥æ± ...",{host:a.host,port:a.port,user:a.user,database:a.database}),n.createPool(a));async function c(){if(l&&!globalThis.isClosingPool)try{globalThis.isClosingPool=!0,console.log("æ­£åœ¨å…³é—­ MySQL è¿æ¥æ± ..."),await l.end(),console.log("MySQL è¿æ¥æ± å·²æˆåŠŸå…³é—­")}catch(e){throw console.error("å…³é—­ MySQL è¿æ¥æ± æ—¶å‘ç”Ÿé”™è¯¯",e),globalThis.isClosingPool=!1,e}else globalThis.isClosingPool&&console.log("MySQL è¿æ¥æ± å·²ç»åœ¨å…³é—­è¿‡ç¨‹ä¸­ï¼Œè·³è¿‡é‡å¤å…³é—­")}void 0===globalThis.isClosingPool&&(globalThis.isClosingPool=!1),process.on("SIGINT",async()=>{console.log("æ¥æ”¶åˆ° SIGINT ä¿¡å·ï¼Œå‡†å¤‡å…³é—­ MySQL è¿æ¥æ± "),await c(),process.exit(0)}),process.on("SIGTERM",async()=>{console.log("æ¥æ”¶åˆ° SIGTERM ä¿¡å·ï¼Œå‡†å¤‡å…³é—­ MySQL è¿æ¥æ± "),await c(),process.exit(0)}),process.on("uncaughtException",async e=>{console.error("æœªæ•è·çš„å¼‚å¸¸",e),await c(),process.exit(1)})}};