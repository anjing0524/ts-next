{
  "config": {
    "configFile": "/Users/liushuo/code/ts-next-template/apps/admin-portal/playwright.config.ts",
    "rootDir": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e",
    "forbidOnly": false,
    "fullyParallel": false,
    "globalSetup": null,
    "globalTeardown": null,
    "globalTimeout": 0,
    "grep": {},
    "grepInvert": null,
    "maxFailures": 0,
    "metadata": {
      "actualWorkers": 1
    },
    "preserveOutput": "always",
    "reporter": [
      [
        "list",
        null
      ],
      [
        "json",
        {
          "outputFile": "test-results.json"
        }
      ],
      [
        "html",
        {
          "outputFolder": "playwright-report",
          "open": "never"
        }
      ]
    ],
    "reportSlowTests": {
      "max": 5,
      "threshold": 300000
    },
    "quiet": false,
    "projects": [
      {
        "outputDir": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 1
        },
        "id": "Desktop Chrome",
        "name": "Desktop Chrome",
        "testDir": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.{test,spec}.{js,ts}"
        ],
        "timeout": 30000
      }
    ],
    "shard": null,
    "updateSnapshots": "missing",
    "updateSourceMethod": "patch",
    "version": "1.56.1",
    "workers": 1,
    "webServer": null
  },
  "suites": [
    {
      "title": "auth-flow.spec.ts",
      "file": "auth-flow.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "OAuth 2.1 Authentication Flow",
          "file": "auth-flow.spec.ts",
          "line": 24,
          "column": 6,
          "specs": [
            {
              "title": "Scenario 1: Complete OAuth flow with valid credentials",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 6074,
                      "error": {
                        "message": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:36:19",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 20,
                          "line": 134
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 20,
                            "line": 134
                          },
                          "message": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n   at helpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:36:19"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:19:29.560Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-7f8ad-flow-with-valid-credentials-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-7f8ad-flow-with-valid-credentials-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-7f8ad-flow-with-valid-credentials-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-7f8ad-flow-with-valid-credentials-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 20,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "df6b40174562c70df515-8b97f72f28d96b3f2eae",
              "file": "auth-flow.spec.ts",
              "line": 34,
              "column": 7
            },
            {
              "title": "Scenario 2: Error handling for invalid credentials",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 1,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 11984,
                      "error": {
                        "message": "TimeoutError: page.waitForSelector: Timeout 5000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('form') to be visible\u001b[22m\n\u001b[2m    - locator resolved to visible <form class=\"space-y-4 \">…</form>\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:3002/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:3002/login\"\u001b[22m\n\u001b[2m    8 × locator resolved to visible <form class=\"space-y-4 \">…</form>\u001b[22m\n",
                        "stack": "TimeoutError: page.waitForSelector: Timeout 5000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('form') to be visible\u001b[22m\n\u001b[2m    - locator resolved to visible <form class=\"space-y-4 \">…</form>\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:3002/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:3002/login\"\u001b[22m\n\u001b[2m    8 × locator resolved to visible <form class=\"space-y-4 \">…</form>\u001b[22m\n\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:57:16",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                          "column": 16,
                          "line": 57
                        },
                        "snippet": "  55 |\n  56 |     // Step 2: Wait for form\n> 57 |     await page.waitForSelector('form', { timeout: 5000 });\n     |                ^\n  58 |\n  59 |     // Step 3: Try invalid credentials\n  60 |     const usernameInput = page.getByTestId('username-input');"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                            "column": 16,
                            "line": 57
                          },
                          "message": "TimeoutError: page.waitForSelector: Timeout 5000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('form') to be visible\u001b[22m\n\u001b[2m    - locator resolved to visible <form class=\"space-y-4 \">…</form>\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:3002/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:3002/login\"\u001b[22m\n\u001b[2m    8 × locator resolved to visible <form class=\"space-y-4 \">…</form>\u001b[22m\n\n\n  55 |\n  56 |     // Step 2: Wait for form\n> 57 |     await page.waitForSelector('form', { timeout: 5000 });\n     |                ^\n  58 |\n  59 |     // Step 3: Try invalid credentials\n  60 |     const usernameInput = page.getByTestId('username-input');\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:57:16"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:19:38.167Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-06c21-ing-for-invalid-credentials-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-06c21-ing-for-invalid-credentials-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-06c21-ing-for-invalid-credentials-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-06c21-ing-for-invalid-credentials-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                        "column": 16,
                        "line": 57
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "df6b40174562c70df515-a32a9700bea22a7c8f1c",
              "file": "auth-flow.spec.ts",
              "line": 47,
              "column": 7
            },
            {
              "title": "Scenario 3: CSRF protection with state parameter validation",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 2,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 6627,
                      "errors": [],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:19:52.689Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "df6b40174562c70df515-41aea2f80fea51401e0a",
              "file": "auth-flow.spec.ts",
              "line": 89,
              "column": 7
            },
            {
              "title": "Scenario 4: Access protected route with valid token",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 2,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 4555,
                      "error": {
                        "message": "Error: 无法在localStorage中设置tokens: Error: page.evaluate: Execution context was destroyed, most likely because of a navigation",
                        "stack": "Error: 无法在localStorage中设置tokens: Error: page.evaluate: Execution context was destroyed, most likely because of a navigation\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:129:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:124:5",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 129
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:129\n\n  127 |\n  128 |         if (!setTokensResult || !setTokensResult.success) {\n> 129 |             throw new Error(`无法在localStorage中设置tokens: ${setTokensResult?.error || 'unknown error'}`);\n      |                   ^\n  130 |         }\n  131 |\n  132 |         // 步骤 4: 导航到受保护路由"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 129
                          },
                          "message": "Error: 无法在localStorage中设置tokens: Error: page.evaluate: Execution context was destroyed, most likely because of a navigation\n\n   at helpers/test-helpers.ts:129\n\n  127 |\n  128 |         if (!setTokensResult || !setTokensResult.success) {\n> 129 |             throw new Error(`无法在localStorage中设置tokens: ${setTokensResult?.error || 'unknown error'}`);\n      |                   ^\n  130 |         }\n  131 |\n  132 |         // 步骤 4: 导航到受保护路由\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:129:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:124:5"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: {\n  success: \u001b[33mfalse\u001b[39m,\n  error: \u001b[32m'Error: page.evaluate: Execution context was destroyed, most likely because of a navigation'\u001b[39m\n}\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] localStorage设置异常: page.evaluate: Execution context was destroyed, most likely because of a navigation\n    at completeOAuthLogin \u001b[90m(/Users/liushuo/code/ts-next-template/apps/admin-portal/\u001b[39mtests/e2e/helpers/test-helpers.ts:105:42\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/liushuo/code/ts-next-template/apps/admin-portal/\u001b[39mtests/e2e/auth-flow.spec.ts:124:5 {\n  name: \u001b[32m'Error'\u001b[39m,\n  [\u001b[32mSymbol(step)\u001b[39m]: {\n    location: {\n      file: \u001b[32m'/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts'\u001b[39m,\n      line: \u001b[33m105\u001b[39m,\n      column: \u001b[33m42\u001b[39m,\n      function: \u001b[32m'completeOAuthLogin'\u001b[39m\n    },\n    category: \u001b[32m'pw:api'\u001b[39m,\n    title: \u001b[32m'Evaluate'\u001b[39m,\n    apiName: \u001b[32m'page.evaluate'\u001b[39m,\n    params: {\n      expression: \u001b[32m'data => {\\n'\u001b[39m +\n        \u001b[32m'        if (data.access_token) {\\n'\u001b[39m +\n        \u001b[32m\"          localStorage.setItem('access_token', data.access_token);\\n\"\u001b[39m +\n        \u001b[32m'        }\\n'\u001b[39m +\n        \u001b[32m'        if (data.refresh_token) {\\n'\u001b[39m +\n        \u001b[32m\"          localStorage.setItem('refresh_token', data.refresh_token);\\n\"\u001b[39m +\n        \u001b[32m'        }\\n'\u001b[39m +\n        \u001b[32m'        if (data.user) {\\n'\u001b[39m +\n        \u001b[32m\"          localStorage.setItem('user', JSON.stringify(data.user));\\n\"\u001b[39m +\n        \u001b[32m'        }\\n'\u001b[39m +\n        \u001b[32m'        return {\\n'\u001b[39m +\n        \u001b[32m'          success: true,\\n'\u001b[39m +\n        \u001b[32m\"          hasAccessToken: !!localStorage.getItem('access_token'),\\n\"\u001b[39m +\n        \u001b[32m\"          hasRefreshToken: !!localStorage.getItem('refresh_token')\\n\"\u001b[39m +\n        \u001b[32m'        };\\n'\u001b[39m +\n        \u001b[32m'      }'\u001b[39m,\n      isFunction: \u001b[33mtrue\u001b[39m,\n      arg: \u001b[36m[Object]\u001b[39m\n    },\n    group: \u001b[90mundefined\u001b[39m,\n    stepId: \u001b[32m'pw:api@25'\u001b[39m,\n    boxedStack: \u001b[90mundefined\u001b[39m,\n    steps: [],\n    attachmentIndices: [],\n    info: TestStepInfoImpl {\n      annotations: [],\n      _testInfo: \u001b[36m[TestInfoImpl]\u001b[39m,\n      _stepId: \u001b[32m'pw:api@25'\u001b[39m,\n      _title: \u001b[32m'Evaluate'\u001b[39m,\n      _parentStep: \u001b[90mundefined\u001b[39m,\n      skip: \u001b[36m[Function (anonymous)]\u001b[39m\n    },\n    complete: \u001b[36m[Function: complete]\u001b[39m,\n    endWallTime: \u001b[33m1764217204078\u001b[39m,\n    error: {\n      message: \u001b[32m'Error: page.evaluate: Execution context was destroyed, most likely because of a navigation'\u001b[39m,\n      stack: \u001b[32m'Error: page.evaluate: Execution context was destroyed, most likely because of a navigation\\n'\u001b[39m +\n        \u001b[32m'    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:105:42)\\n'\u001b[39m +\n        \u001b[32m'    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:124:5'\u001b[39m,\n      cause: \u001b[90mundefined\u001b[39m\n    }\n  }\n}\n"
                        },
                        {
                          "text": "[Auth] OAuth登录失败: 无法在localStorage中设置tokens: Error: page.evaluate: Execution context was destroyed, most likely because of a navigation\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:20:00.119Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-424a3-cted-route-with-valid-token-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-424a3-cted-route-with-valid-token-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-424a3-cted-route-with-valid-token-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-424a3-cted-route-with-valid-token-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 129
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "df6b40174562c70df515-0aff24fa456a2cc6e821",
              "file": "auth-flow.spec.ts",
              "line": 122,
              "column": 7
            },
            {
              "title": "Scenario 5: All requests route through Pingora proxy",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 3,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 10643,
                      "error": {
                        "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m1\u001b[39m",
                        "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m1\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:162:42",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                          "column": 42,
                          "line": 162
                        },
                        "snippet": "  160 |\n  161 |     // Should have no direct requests to backend services\n> 162 |     expect(directBackendRequests.length).toBe(0);\n      |                                          ^\n  163 |\n  164 |     // Step 5: Verify we're on the right page\n  165 |     expect(page.url()).toContain(protectedRoute);"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                            "column": 42,
                            "line": 162
                          },
                          "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m1\u001b[39m\n\n  160 |\n  161 |     // Should have no direct requests to backend services\n> 162 |     expect(directBackendRequests.length).toBe(0);\n      |                                          ^\n  163 |\n  164 |     // Step 5: Verify we're on the right page\n  165 |     expect(page.url()).toContain(protectedRoute);\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:162:42"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        },
                        {
                          "text": "[Auth] 最终URL: http://localhost:6188/login?redirect=http%3A%2F%2Flocalhost%3A6188%2Fapi%2Fv2%2Foauth%2Fauthorize%3Fclient_id%3Dauth-center-admin-client%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3002%252Fauth%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2Bprofile%2Bemail%26code_challenge%3DKskgmG5A3p0FhmE-ZhBFOF-K-zXdVimFUUpA6H3e6m4%26code_challenge_method%3DS256\n"
                        },
                        {
                          "text": "[Auth] OAuth登录成功\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:20:06.135Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-0afd5-route-through-Pingora-proxy-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-0afd5-route-through-Pingora-proxy-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-0afd5-route-through-Pingora-proxy-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-0afd5-route-through-Pingora-proxy-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                        "column": 42,
                        "line": 162
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "df6b40174562c70df515-e1725d04d82b4337af5f",
              "file": "auth-flow.spec.ts",
              "line": 139,
              "column": 7
            },
            {
              "title": "Scenario 6: Handle expired session",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 4,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 4756,
                      "error": {
                        "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeTruthy\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m",
                        "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeTruthy\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:175:19",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                          "column": 19,
                          "line": 175
                        },
                        "snippet": "  173 |     // Step 1: Complete OAuth login\n  174 |     const token = await completeOAuthLogin(page, testUsername, testPassword);\n> 175 |     expect(token).toBeTruthy();\n      |                   ^\n  176 |\n  177 |     // Step 2: Clear authentication state (simulating expired session)\n  178 |     await page.context().clearCookies();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                            "column": 19,
                            "line": 175
                          },
                          "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeTruthy\u001b[2m()\u001b[22m\n\nReceived: \u001b[31mundefined\u001b[39m\n\n  173 |     // Step 1: Complete OAuth login\n  174 |     const token = await completeOAuthLogin(page, testUsername, testPassword);\n> 175 |     expect(token).toBeTruthy();\n      |                   ^\n  176 |\n  177 |     // Step 2: Clear authentication state (simulating expired session)\n  178 |     await page.context().clearCookies();\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts:175:19"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        },
                        {
                          "text": "[Auth] 最终URL: http://localhost:6188/login?redirect=http%3A%2F%2Flocalhost%3A6188%2Fapi%2Fv2%2Foauth%2Fauthorize%3Fclient_id%3Dauth-center-admin-client%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3002%252Fauth%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2Bprofile%2Bemail%26code_challenge%3D6EUWSiAKOJC1jg2QGKwpKMUNl4L6btdyDvjwohF_aJA%26code_challenge_method%3DS256\n"
                        },
                        {
                          "text": "[Auth] OAuth登录成功\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:20:19.298Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-339f2-io-6-Handle-expired-session-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-339f2-io-6-Handle-expired-session-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-339f2-io-6-Handle-expired-session-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/auth-flow-OAuth-2-1-Authen-339f2-io-6-Handle-expired-session-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/auth-flow.spec.ts",
                        "column": 19,
                        "line": 175
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "df6b40174562c70df515-894cb89cb2aa8c0d7e11",
              "file": "auth-flow.spec.ts",
              "line": 172,
              "column": 7
            }
          ]
        }
      ]
    },
    {
      "title": "error-scenarios.spec.ts",
      "file": "error-scenarios.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "Error Scenarios",
          "file": "error-scenarios.spec.ts",
          "line": 23,
          "column": 6,
          "specs": [
            {
              "title": "should handle invalid login credentials gracefully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 5,
                      "parallelIndex": 0,
                      "status": "timedOut",
                      "duration": 32607,
                      "error": {
                        "message": "\u001b[31mTest timeout of 30000ms exceeded.\u001b[39m",
                        "stack": "\u001b[31mTest timeout of 30000ms exceeded.\u001b[39m"
                      },
                      "errors": [
                        {
                          "message": "\u001b[31mTest timeout of 30000ms exceeded.\u001b[39m"
                        },
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 44,
                            "line": 77
                          },
                          "message": "Error: locator.click: Test timeout of 30000ms exceeded.\nCall log:\n\u001b[2m  - waiting for getByTestId('login-button')\u001b[22m\n\u001b[2m    2 × waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m      - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\n\n  75 |     await page.getByTestId('username-input').fill('invalid_user_12345');\n  76 |     await page.getByTestId('password-input').fill('wrong_password_67890');\n> 77 |     await page.getByTestId('login-button').click();\n     |                                            ^\n  78 |\n  79 |     // Wait for error response\n  80 |     await page.waitForTimeout(1500);\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:77:44"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:20:26.534Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a63a1-ogin-credentials-gracefully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a63a1-ogin-credentials-gracefully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a63a1-ogin-credentials-gracefully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a63a1-ogin-credentials-gracefully-Desktop-Chrome/trace.zip"
                        }
                      ]
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-2a7777ff25d33013abd5",
              "file": "error-scenarios.spec.ts",
              "line": 57,
              "column": 7
            },
            {
              "title": "should redirect to login on session expiration",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 6,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1413,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:99:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:99:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:01.491Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c030d-login-on-session-expiration-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c030d-login-on-session-expiration-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c030d-login-on-session-expiration-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c030d-login-on-session-expiration-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-e5942004473c0ba72f5b",
              "file": "error-scenarios.spec.ts",
              "line": 98,
              "column": 7
            },
            {
              "title": "should display form validation errors",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 7,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1457,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:120:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:120:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:05.219Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-49c40-play-form-validation-errors-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-49c40-play-form-validation-errors-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-49c40-play-form-validation-errors-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-49c40-play-form-validation-errors-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-db56d36015787f191fd6",
              "file": "error-scenarios.spec.ts",
              "line": 119,
              "column": 7
            },
            {
              "title": "should handle network errors gracefully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 8,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1254,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:167:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:167:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:08.929Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c3178-e-network-errors-gracefully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c3178-e-network-errors-gracefully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c3178-e-network-errors-gracefully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c3178-e-network-errors-gracefully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-bb82e594eaee332dd95c",
              "file": "error-scenarios.spec.ts",
              "line": 166,
              "column": 7
            },
            {
              "title": "should handle server errors (500) gracefully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 9,
                      "parallelIndex": 0,
                      "status": "timedOut",
                      "duration": 31318,
                      "error": {
                        "message": "\u001b[31mTest timeout of 30000ms exceeded.\u001b[39m",
                        "stack": "\u001b[31mTest timeout of 30000ms exceeded.\u001b[39m"
                      },
                      "errors": [
                        {
                          "message": "\u001b[31mTest timeout of 30000ms exceeded.\u001b[39m"
                        },
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 46,
                            "line": 38
                          },
                          "message": "Error: locator.click: Test timeout of 30000ms exceeded.\nCall log:\n\u001b[2m  - waiting for getByTestId('login-button')\u001b[22m\n\u001b[2m    2 × waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m      - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  6 × attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    3 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  2 × attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - done scrolling\u001b[22m\n\u001b[2m    4 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\n\n  36 |       await page.getByTestId('username-input').fill(testUsername);\n  37 |       await page.getByTestId('password-input').fill(testPassword);\n> 38 |       await page.getByTestId('login-button').click();\n     |                                              ^\n  39 |       await page.waitForURL(/.*/, { timeout: 10000 });\n  40 |     }\n  41 |\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:38:46)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:204:5"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:12.533Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-f5e09-erver-errors-500-gracefully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-f5e09-erver-errors-500-gracefully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-f5e09-erver-errors-500-gracefully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-f5e09-erver-errors-500-gracefully-Desktop-Chrome/trace.zip"
                        }
                      ]
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-557e11c038f38630b129",
              "file": "error-scenarios.spec.ts",
              "line": 203,
              "column": 7
            },
            {
              "title": "should handle 404 not found errors",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 10,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1442,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:250:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:250:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:46.338Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a46d4-handle-404-not-found-errors-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a46d4-handle-404-not-found-errors-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a46d4-handle-404-not-found-errors-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-a46d4-handle-404-not-found-errors-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-795d309c8d5d277c41cd",
              "file": "error-scenarios.spec.ts",
              "line": 249,
              "column": 7
            },
            {
              "title": "should handle forbidden access (403) gracefully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 11,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1417,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:277:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:277:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:50.185Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c6c37-idden-access-403-gracefully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c6c37-idden-access-403-gracefully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c6c37-idden-access-403-gracefully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-c6c37-idden-access-403-gracefully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-3dad56fd2ac8ee8026c7",
              "file": "error-scenarios.spec.ts",
              "line": 276,
              "column": 7
            },
            {
              "title": "should handle CSRF validation errors",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 12,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 2818,
                      "errors": [],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:53.771Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "461e73bb101b4db20964-2644cd9711830881bcea",
              "file": "error-scenarios.spec.ts",
              "line": 327,
              "column": 7
            },
            {
              "title": "should handle duplicate resource creation errors",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 12,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 984,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:351:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:351:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:57.410Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-506b1-te-resource-creation-errors-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-506b1-te-resource-creation-errors-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-506b1-te-resource-creation-errors-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-506b1-te-resource-creation-errors-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-e798a10fc0b62787e3cf",
              "file": "error-scenarios.spec.ts",
              "line": 350,
              "column": 7
            },
            {
              "title": "should allow error recovery and continued use",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 13,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1502,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:396:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:396:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:21:59.925Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-bbf3c--recovery-and-continued-use-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-bbf3c--recovery-and-continued-use-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-bbf3c--recovery-and-continued-use-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-bbf3c--recovery-and-continued-use-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-94afce2d62577aad5943",
              "file": "error-scenarios.spec.ts",
              "line": 395,
              "column": 7
            },
            {
              "title": "should handle missing required parameters",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 14,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1509,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:438:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:438:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:03.713Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-07142-missing-required-parameters-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-07142-missing-required-parameters-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-07142-missing-required-parameters-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-07142-missing-required-parameters-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-04d0dff7c5dc975045a4",
              "file": "error-scenarios.spec.ts",
              "line": 437,
              "column": 7
            },
            {
              "title": "should handle request timeouts",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 15,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1597,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:467:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}/admin`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     if (page.url().includes('/login')) {\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts:467:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:07.645Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-dd0e1-uld-handle-request-timeouts-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-dd0e1-uld-handle-request-timeouts-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-dd0e1-uld-handle-request-timeouts-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/error-scenarios-Error-Scen-dd0e1-uld-handle-request-timeouts-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/error-scenarios.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "461e73bb101b4db20964-5a2937178d8481550833",
              "file": "error-scenarios.spec.ts",
              "line": 466,
              "column": 7
            }
          ]
        }
      ]
    },
    {
      "title": "oauth-pkce-validation.spec.ts",
      "file": "oauth-pkce-validation.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "OAuth 2.1 PKCE Validation",
          "file": "oauth-pkce-validation.spec.ts",
          "line": 34,
          "column": 6,
          "specs": [
            {
              "title": "@p0 should complete OAuth flow with valid PKCE parameters",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 16,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1242,
                      "error": {
                        "message": "TypeError: Cannot read properties of undefined (reading 'length')",
                        "stack": "TypeError: Cannot read properties of undefined (reading 'length')\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:62:44",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                          "column": 44,
                          "line": 62
                        },
                        "snippet": "  60 |         const pkce = await generatePKCEPair();\n  61 |         console.log('Generated PKCE pair:', {\n> 62 |             verifier_length: pkce.verifier.length,\n     |                                            ^\n  63 |             challenge_length: pkce.challenge.length,\n  64 |         });\n  65 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                            "column": 44,
                            "line": 62
                          },
                          "message": "TypeError: Cannot read properties of undefined (reading 'length')\n\n  60 |         const pkce = await generatePKCEPair();\n  61 |         console.log('Generated PKCE pair:', {\n> 62 |             verifier_length: pkce.verifier.length,\n     |                                            ^\n  63 |             challenge_length: pkce.challenge.length,\n  64 |         });\n  65 |\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:62:44"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:11.599Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-9d8b8--with-valid-PKCE-parameters-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-9d8b8--with-valid-PKCE-parameters-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-9d8b8--with-valid-PKCE-parameters-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                        "column": 44,
                        "line": 62
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "6babb86a45dd0fb2347f-3de63f5c5a5249290d73",
              "file": "oauth-pkce-validation.spec.ts",
              "line": 58,
              "column": 9
            },
            {
              "title": "@p0 should reject token exchange with incorrect code_verifier",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 17,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1156,
                      "error": {
                        "message": "SyntaxError: Unexpected end of JSON input",
                        "stack": "SyntaxError: Unexpected end of JSON input\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:173:27",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                          "column": 27,
                          "line": 173
                        },
                        "snippet": "  171 |         expect(tokenResponse.status()).toBeGreaterThanOrEqual(400);\n  172 |\n> 173 |         const errorBody = await tokenResponse.json();\n      |                           ^\n  174 |         console.log('PKCE verification failed error:', errorBody);\n  175 |\n  176 |         // 错误消息应该提到 PKCE 或授权码无效"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                            "column": 27,
                            "line": 173
                          },
                          "message": "SyntaxError: Unexpected end of JSON input\n\n  171 |         expect(tokenResponse.status()).toBeGreaterThanOrEqual(400);\n  172 |\n> 173 |         const errorBody = await tokenResponse.json();\n      |                           ^\n  174 |         console.log('PKCE verification failed error:', errorBody);\n  175 |\n  176 |         // 错误消息应该提到 PKCE 或授权码无效\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:173:27"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:15.268Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-ba3ad-ith-incorrect-code-verifier-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-ba3ad-ith-incorrect-code-verifier-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-ba3ad-ith-incorrect-code-verifier-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                        "column": 27,
                        "line": 173
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "6babb86a45dd0fb2347f-a3402024928cd455a4d1",
              "file": "oauth-pkce-validation.spec.ts",
              "line": 143,
              "column": 9
            },
            {
              "title": "@p0 should reject token exchange without code_verifier",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 18,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1284,
                      "error": {
                        "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m500\u001b[39m",
                        "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:198:40",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                          "column": 40,
                          "line": 198
                        },
                        "snippet": "  196 |         });\n  197 |\n> 198 |         expect(tokenResponse.status()).toBe(400);\n      |                                        ^\n  199 |\n  200 |         const errorBody = await tokenResponse.json();\n  201 |         console.log('Missing code_verifier error:', errorBody);"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                            "column": 40,
                            "line": 198
                          },
                          "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n\n  196 |         });\n  197 |\n> 198 |         expect(tokenResponse.status()).toBe(400);\n      |                                        ^\n  199 |\n  200 |         const errorBody = await tokenResponse.json();\n  201 |         console.log('Missing code_verifier error:', errorBody);\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:198:40"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:18.727Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-75de7-hange-without-code-verifier-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-75de7-hange-without-code-verifier-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-75de7-hange-without-code-verifier-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                        "column": 40,
                        "line": 198
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "6babb86a45dd0fb2347f-4dad97ec5a6083e4c5c3",
              "file": "oauth-pkce-validation.spec.ts",
              "line": 186,
              "column": 9
            },
            {
              "title": "@p0 should reject authorization request without code_challenge",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 19,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1545,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&state=m8RaEqVQMJkJed8flPbE8pAipkA4nMPU\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&state=m8RaEqVQMJkJed8flPbE8pAipkA4nMPU\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&state=m8RaEqVQMJkJed8flPbE8pAipkA4nMPU\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&state=m8RaEqVQMJkJed8flPbE8pAipkA4nMPU\", waiting until \"load\"\u001b[22m\n\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:228:20",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                          "column": 20,
                          "line": 228
                        },
                        "snippet": "  226 |         authorizeUrl.searchParams.set('state', state);\n  227 |\n> 228 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  229 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  230 |\n  231 |         // 应该显示错误或重定向到错误页面"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                            "column": 20,
                            "line": 228
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&state=m8RaEqVQMJkJed8flPbE8pAipkA4nMPU\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&state=m8RaEqVQMJkJed8flPbE8pAipkA4nMPU\", waiting until \"load\"\u001b[22m\n\n\n  226 |         authorizeUrl.searchParams.set('state', state);\n  227 |\n> 228 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  229 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  230 |\n  231 |         // 应该显示错误或重定向到错误页面\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:228:20"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:22.301Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-f513e-uest-without-code-challenge-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-f513e-uest-without-code-challenge-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-f513e-uest-without-code-challenge-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-f513e-uest-without-code-challenge-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                        "column": 20,
                        "line": 228
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "6babb86a45dd0fb2347f-308cea4fba0e67fd6d25",
              "file": "oauth-pkce-validation.spec.ts",
              "line": 214,
              "column": 9
            },
            {
              "title": "@p0 should reject unsupported code_challenge_method",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 20,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1468,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=plain&state=pJK7tw6zDXOXuAe5JlmRPF9o6ByELs3c\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=plain&state=pJK7tw6zDXOXuAe5JlmRPF9o6ByELs3c\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=plain&state=pJK7tw6zDXOXuAe5JlmRPF9o6ByELs3c\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=plain&state=pJK7tw6zDXOXuAe5JlmRPF9o6ByELs3c\", waiting until \"load\"\u001b[22m\n\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:268:20",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                          "column": 20,
                          "line": 268
                        },
                        "snippet": "  266 |         authorizeUrl.searchParams.set('state', state);\n  267 |\n> 268 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  269 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  270 |\n  271 |         // 应该显示错误"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                            "column": 20,
                            "line": 268
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=plain&state=pJK7tw6zDXOXuAe5JlmRPF9o6ByELs3c\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=plain&state=pJK7tw6zDXOXuAe5JlmRPF9o6ByELs3c\", waiting until \"load\"\u001b[22m\n\n\n  266 |         authorizeUrl.searchParams.set('state', state);\n  267 |\n> 268 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  269 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  270 |\n  271 |         // 应该显示错误\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:268:20"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:26.076Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-0de59-orted-code-challenge-method-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-0de59-orted-code-challenge-method-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-0de59-orted-code-challenge-method-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-0de59-orted-code-challenge-method-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                        "column": 20,
                        "line": 268
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "6babb86a45dd0fb2347f-43868a51272c3decb264",
              "file": "oauth-pkce-validation.spec.ts",
              "line": 253,
              "column": 9
            },
            {
              "title": "should generate valid PKCE parameters",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 21,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1148,
                      "error": {
                        "message": "TypeError: Cannot read properties of undefined (reading 'length')",
                        "stack": "TypeError: Cannot read properties of undefined (reading 'length')\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:295:30",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                          "column": 30,
                          "line": 295
                        },
                        "snippet": "  293 |\n  294 |         // code_verifier 长度: 43-128 字符\n> 295 |         expect(pkce.verifier.length).toBeGreaterThanOrEqual(43);\n      |                              ^\n  296 |         expect(pkce.verifier.length).toBeLessThanOrEqual(128);\n  297 |\n  298 |         // code_verifier 应该是 Base64URL 编码 (只包含 A-Z, a-z, 0-9, -, _)"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                            "column": 30,
                            "line": 295
                          },
                          "message": "TypeError: Cannot read properties of undefined (reading 'length')\n\n  293 |\n  294 |         // code_verifier 长度: 43-128 字符\n> 295 |         expect(pkce.verifier.length).toBeGreaterThanOrEqual(43);\n      |                              ^\n  296 |         expect(pkce.verifier.length).toBeLessThanOrEqual(128);\n  297 |\n  298 |         // code_verifier 应该是 Base64URL 编码 (只包含 A-Z, a-z, 0-9, -, _)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:295:30"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:29.774Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-44bcc-erate-valid-PKCE-parameters-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-44bcc-erate-valid-PKCE-parameters-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-44bcc-erate-valid-PKCE-parameters-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                        "column": 30,
                        "line": 295
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "6babb86a45dd0fb2347f-fe14270ac35602de3cf8",
              "file": "oauth-pkce-validation.spec.ts",
              "line": 291,
              "column": 9
            },
            {
              "title": "should correctly compute code_challenge from code_verifier",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 22,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1204,
                      "error": {
                        "message": "TypeError: (0 , _testHelpers.verifyPKCEChallenge) is not a function",
                        "stack": "TypeError: (0 , _testHelpers.verifyPKCEChallenge) is not a function\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:317:50",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                          "column": 50,
                          "line": 317
                        },
                        "snippet": "  315 |\n  316 |         // 验证 challenge 是 verifier 的 SHA256 hash\n> 317 |         const isValid = await verifyPKCEChallenge(pkce.verifier, pkce.challenge);\n      |                                                  ^\n  318 |         expect(isValid).toBeTruthy();\n  319 |\n  320 |         // 验证: 不同的 verifier 生成不同的 challenge"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                            "column": 50,
                            "line": 317
                          },
                          "message": "TypeError: (0 , _testHelpers.verifyPKCEChallenge) is not a function\n\n  315 |\n  316 |         // 验证 challenge 是 verifier 的 SHA256 hash\n> 317 |         const isValid = await verifyPKCEChallenge(pkce.verifier, pkce.challenge);\n      |                                                  ^\n  318 |         expect(isValid).toBeTruthy();\n  319 |\n  320 |         // 验证: 不同的 verifier 生成不同的 challenge\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts:317:50"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:33.289Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-2f902-hallenge-from-code-verifier-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-2f902-hallenge-from-code-verifier-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-pkce-validation-OAut-2f902-hallenge-from-code-verifier-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-pkce-validation.spec.ts",
                        "column": 50,
                        "line": 317
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "6babb86a45dd0fb2347f-16a2cf1c2c9b5ec3769c",
              "file": "oauth-pkce-validation.spec.ts",
              "line": 313,
              "column": 9
            }
          ]
        }
      ]
    },
    {
      "title": "oauth-security-p0.spec.ts",
      "file": "oauth-security-p0.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "OAuth 2.1 Security - P0 Critical Tests",
          "file": "oauth-security-p0.spec.ts",
          "line": 31,
          "column": 6,
          "specs": [
            {
              "title": "@p0 should reject reused authorization code",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 23,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1241,
                      "error": {
                        "message": "TypeError: (0 , _testHelpers.getAuthorizationCode) is not a function",
                        "stack": "TypeError: (0 , _testHelpers.getAuthorizationCode) is not a function\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:59:52",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                          "column": 52,
                          "line": 59
                        },
                        "snippet": "  57 |\n  58 |         // 2. 获取有效的授权码\n> 59 |         const authCode = await getAuthorizationCode(page, pkce);\n     |                                                    ^\n  60 |         console.log('Obtained authorization code:', authCode.substring(0, 20) + '...');\n  61 |\n  62 |         // 3. 第一次使用授权码交换 token (应该成功)"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                            "column": 52,
                            "line": 59
                          },
                          "message": "TypeError: (0 , _testHelpers.getAuthorizationCode) is not a function\n\n  57 |\n  58 |         // 2. 获取有效的授权码\n> 59 |         const authCode = await getAuthorizationCode(page, pkce);\n     |                                                    ^\n  60 |         console.log('Obtained authorization code:', authCode.substring(0, 20) + '...');\n  61 |\n  62 |         // 3. 第一次使用授权码交换 token (应该成功)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:59:52"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "Generated PKCE for authorization code test\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:36.702Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--adf0e-t-reused-authorization-code-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--adf0e-t-reused-authorization-code-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--adf0e-t-reused-authorization-code-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                        "column": 52,
                        "line": 59
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "bf6c03cd012f048d69f9-793c4609232ca2bdb13e",
              "file": "oauth-security-p0.spec.ts",
              "line": 53,
              "column": 9
            },
            {
              "title": "@p0 should introspect valid access token (RFC 7662)",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 24,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 6734,
                      "error": {
                        "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m",
                        "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:128:45",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                          "column": 45,
                          "line": 128
                        },
                        "snippet": "  126 |         });\n  127 |\n> 128 |         expect(introspectResponse.status()).toBe(200);\n      |                                             ^\n  129 |         const introspectData = await introspectResponse.json();\n  130 |\n  131 |         console.log('Introspect response:', JSON.stringify(introspectData, null, 2));"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                            "column": 45,
                            "line": 128
                          },
                          "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n\n  126 |         });\n  127 |\n> 128 |         expect(introspectResponse.status()).toBe(200);\n      |                                             ^\n  129 |         const introspectData = await introspectResponse.json();\n  130 |\n  131 |         console.log('Introspect response:', JSON.stringify(introspectData, null, 2));\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:128:45"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        },
                        {
                          "text": "[Auth] 最终URL: http://localhost:6188/login?redirect=http%3A%2F%2Flocalhost%3A6188%2Fapi%2Fv2%2Foauth%2Fauthorize%3Fclient_id%3Dauth-center-admin-client%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3002%252Fauth%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2Bprofile%2Bemail%26code_challenge%3DePKETPzQxSbz95qL0P-Do9k87uBl-r9UKilI1pFACEI%26code_challenge_method%3DS256\n"
                        },
                        {
                          "text": "[Auth] OAuth登录成功\n"
                        },
                        {
                          "text": "Access token obtained for introspection\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:40.204Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--0083d-alid-access-token-RFC-7662--Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--0083d-alid-access-token-RFC-7662--Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--0083d-alid-access-token-RFC-7662--Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--0083d-alid-access-token-RFC-7662--Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                        "column": 45,
                        "line": 128
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "bf6c03cd012f048d69f9-335ab806f63e2ae23264",
              "file": "oauth-security-p0.spec.ts",
              "line": 114,
              "column": 9
            },
            {
              "title": "@p0 should return inactive for revoked access token",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 25,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 14498,
                      "error": {
                        "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}",
                        "stack": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:159:29",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 77
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 77
                          },
                          "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n\n   at helpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:159:29"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:22:49.342Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--a5ce3-ve-for-revoked-access-token-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--a5ce3-ve-for-revoked-access-token-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--a5ce3-ve-for-revoked-access-token-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 77
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "bf6c03cd012f048d69f9-c477cdacde0c35394bde",
              "file": "oauth-security-p0.spec.ts",
              "line": 157,
              "column": 9
            },
            {
              "title": "@p0 should return inactive for expired access token",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 26,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 14743,
                      "error": {
                        "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}",
                        "stack": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:194:29",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 77
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 77
                          },
                          "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n\n   at helpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:194:29"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:06.291Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--c5ff4-ve-for-expired-access-token-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--c5ff4-ve-for-expired-access-token-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--c5ff4-ve-for-expired-access-token-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 77
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "bf6c03cd012f048d69f9-ae1b546bb6320c19b058",
              "file": "oauth-security-p0.spec.ts",
              "line": 192,
              "column": 9
            },
            {
              "title": "@p0 should accept whitelisted redirect_uri",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 27,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1489,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.qamck5guni\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.qamck5guni\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.qamck5guni\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.qamck5guni\", waiting until \"load\"\u001b[22m\n\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:244:20",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                          "column": 20,
                          "line": 244
                        },
                        "snippet": "  242 |         authorizeUrl.searchParams.set('state', state);\n  243 |\n> 244 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  245 |\n  246 |         // 应该重定向到登录页,而不是显示错误\n  247 |         await page.waitForURL(/.*/, { timeout: 5000 });"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                            "column": 20,
                            "line": 244
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.qamck5guni\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.qamck5guni\", waiting until \"load\"\u001b[22m\n\n\n  242 |         authorizeUrl.searchParams.set('state', state);\n  243 |\n> 244 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  245 |\n  246 |         // 应该重定向到登录页,而不是显示错误\n  247 |         await page.waitForURL(/.*/, { timeout: 5000 });\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:244:20"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:23.329Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--a171b-pt-whitelisted-redirect-uri-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--a171b-pt-whitelisted-redirect-uri-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--a171b-pt-whitelisted-redirect-uri-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--a171b-pt-whitelisted-redirect-uri-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                        "column": 20,
                        "line": 244
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "bf6c03cd012f048d69f9-c522d65b5cc83779c92c",
              "file": "oauth-security-p0.spec.ts",
              "line": 230,
              "column": 9
            },
            {
              "title": "@p0 should reject non-whitelisted redirect_uri",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 28,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1397,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=https%3A%2F%2Fevil.com%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.ejyo6lyj67e\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=https%3A%2F%2Fevil.com%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.ejyo6lyj67e\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=https%3A%2F%2Fevil.com%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.ejyo6lyj67e\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=https%3A%2F%2Fevil.com%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.ejyo6lyj67e\", waiting until \"load\"\u001b[22m\n\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:275:20",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                          "column": 20,
                          "line": 275
                        },
                        "snippet": "  273 |         authorizeUrl.searchParams.set('state', state);\n  274 |\n> 275 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  276 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  277 |\n  278 |         // 验证: 应该显示错误消息"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                            "column": 20,
                            "line": 275
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=https%3A%2F%2Fevil.com%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.ejyo6lyj67e\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=https%3A%2F%2Fevil.com%2Fcallback&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.ejyo6lyj67e\", waiting until \"load\"\u001b[22m\n\n\n  273 |         authorizeUrl.searchParams.set('state', state);\n  274 |\n> 275 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  276 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  277 |\n  278 |         // 验证: 应该显示错误消息\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:275:20"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:27.063Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--cca35-on-whitelisted-redirect-uri-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--cca35-on-whitelisted-redirect-uri-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--cca35-on-whitelisted-redirect-uri-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--cca35-on-whitelisted-redirect-uri-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                        "column": 20,
                        "line": 275
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "bf6c03cd012f048d69f9-96dbb23d520f7a59c7d5",
              "file": "oauth-security-p0.spec.ts",
              "line": 261,
              "column": 9
            },
            {
              "title": "@p0 should detect redirect_uri parameter tampering",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 29,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1396,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback%3Fevil%3Dparam&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.zvxumlk54i\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback%3Fevil%3Dparam&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.zvxumlk54i\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback%3Fevil%3Dparam&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.zvxumlk54i\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback%3Fevil%3Dparam&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.zvxumlk54i\", waiting until \"load\"\u001b[22m\n\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:310:20",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                          "column": 20,
                          "line": 310
                        },
                        "snippet": "  308 |         authorizeUrl.searchParams.set('state', state);\n  309 |\n> 310 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  311 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  312 |\n  313 |         // 验证: 应该拒绝篡改的 redirect_uri"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                            "column": 20,
                            "line": 310
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback%3Fevil%3Dparam&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.zvxumlk54i\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/api/v2/oauth/authorize?client_id=admin-portal-client&redirect_uri=http%3A%2F%2Flocalhost%3A3002%2Fauth%2Fcallback%3Fevil%3Dparam&response_type=code&scope=openid+profile+email&code_challenge=undefined&code_challenge_method=S256&state=0.zvxumlk54i\", waiting until \"load\"\u001b[22m\n\n\n  308 |         authorizeUrl.searchParams.set('state', state);\n  309 |\n> 310 |         await page.goto(authorizeUrl.toString());\n      |                    ^\n  311 |         await page.waitForURL(/.*/, { timeout: 5000 });\n  312 |\n  313 |         // 验证: 应该拒绝篡改的 redirect_uri\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts:310:20"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:30.749Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--17bb4-ect-uri-parameter-tampering-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--17bb4-ect-uri-parameter-tampering-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--17bb4-ect-uri-parameter-tampering-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p0-OAuth-2--17bb4-ect-uri-parameter-tampering-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p0.spec.ts",
                        "column": 20,
                        "line": 310
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "bf6c03cd012f048d69f9-3828c1533325af3bf394",
              "file": "oauth-security-p0.spec.ts",
              "line": 296,
              "column": 9
            }
          ]
        }
      ]
    },
    {
      "title": "oauth-security-p1.spec.ts",
      "file": "oauth-security-p1.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "OAuth 2.1 Security - P1 Important Tests",
          "file": "oauth-security-p1.spec.ts",
          "line": 29,
          "column": 6,
          "specs": [
            {
              "title": "@p1 should validate id_token contains all required OIDC claims",
              "ok": false,
              "tags": [
                "p1"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 30,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1076,
                      "error": {
                        "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function",
                        "stack": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:59:43",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                          "column": 43,
                          "line": 59
                        },
                        "snippet": "  57 |         // 1. 完成 OAuth 登录,获取 id_token\n  58 |         const pkce = await generatePKCEPair();\n> 59 |         const nonce = generateRandomString(32);\n     |                                           ^\n  60 |\n  61 |         // 存储 nonce 以便后续验证\n  62 |         await page.goto(baseUrl);"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                            "column": 43,
                            "line": 59
                          },
                          "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n\n  57 |         // 1. 完成 OAuth 登录,获取 id_token\n  58 |         const pkce = await generatePKCEPair();\n> 59 |         const nonce = generateRandomString(32);\n     |                                           ^\n  60 |\n  61 |         // 存储 nonce 以便后续验证\n  62 |         await page.goto(baseUrl);\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:59:43"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:34.356Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--63fcf-ns-all-required-OIDC-claims-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--63fcf-ns-all-required-OIDC-claims-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--63fcf-ns-all-required-OIDC-claims-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                        "column": 43,
                        "line": 59
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "b4e6dd03739022a930f2-9cb572cecdf1c51306f1",
              "file": "oauth-security-p1.spec.ts",
              "line": 53,
              "column": 9
            },
            {
              "title": "@p1 should validate id_token contains correct nonce",
              "ok": false,
              "tags": [
                "p1"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 31,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1026,
                      "error": {
                        "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function",
                        "stack": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:122:43",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                          "column": 43,
                          "line": 122
                        },
                        "snippet": "  120 |         // 1. 生成 nonce\n  121 |         const pkce = await generatePKCEPair();\n> 122 |         const nonce = generateRandomString(32);\n      |                                           ^\n  123 |         console.log('Generated nonce:', nonce);\n  124 |\n  125 |         await page.goto(baseUrl);"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                            "column": 43,
                            "line": 122
                          },
                          "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n\n  120 |         // 1. 生成 nonce\n  121 |         const pkce = await generatePKCEPair();\n> 122 |         const nonce = generateRandomString(32);\n      |                                           ^\n  123 |         console.log('Generated nonce:', nonce);\n  124 |\n  125 |         await page.goto(baseUrl);\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:122:43"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:38.310Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--06776-oken-contains-correct-nonce-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--06776-oken-contains-correct-nonce-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--06776-oken-contains-correct-nonce-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                        "column": 43,
                        "line": 122
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "b4e6dd03739022a930f2-2da7ff2055b1536cedb9",
              "file": "oauth-security-p1.spec.ts",
              "line": 119,
              "column": 9
            },
            {
              "title": "@p1 should validate id_token contains user profile claims",
              "ok": false,
              "tags": [
                "p1"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 32,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1076,
                      "error": {
                        "message": "TypeError: (0 , _testHelpers.getAuthorizationCode) is not a function",
                        "stack": "TypeError: (0 , _testHelpers.getAuthorizationCode) is not a function\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:174:52",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                          "column": 52,
                          "line": 174
                        },
                        "snippet": "  172 |         // 1. 完成登录,请求 profile 和 email scopes\n  173 |         const pkce = await generatePKCEPair();\n> 174 |         const authCode = await getAuthorizationCode(page, pkce, TEST_USERS.admin.username, TEST_USERS.admin.password);\n      |                                                    ^\n  175 |\n  176 |         // 2. 交换 token\n  177 |         const tokenResponse = await request.post(`${baseUrl}${API_ENDPOINTS.oauth.token}`, {"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                            "column": 52,
                            "line": 174
                          },
                          "message": "TypeError: (0 , _testHelpers.getAuthorizationCode) is not a function\n\n  172 |         // 1. 完成登录,请求 profile 和 email scopes\n  173 |         const pkce = await generatePKCEPair();\n> 174 |         const authCode = await getAuthorizationCode(page, pkce, TEST_USERS.admin.username, TEST_USERS.admin.password);\n      |                                                    ^\n  175 |\n  176 |         // 2. 交换 token\n  177 |         const tokenResponse = await request.post(`${baseUrl}${API_ENDPOINTS.oauth.token}`, {\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:174:52"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:41.611Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--6c30e-ontains-user-profile-claims-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--6c30e-ontains-user-profile-claims-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--6c30e-ontains-user-profile-claims-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                        "column": 52,
                        "line": 174
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "b4e6dd03739022a930f2-e6d8eb5c4ff3a4d676f6",
              "file": "oauth-security-p1.spec.ts",
              "line": 168,
              "column": 9
            },
            {
              "title": "@p1 should lock account after 5 failed login attempts",
              "ok": false,
              "tags": [
                "p1"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 33,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 988,
                      "error": {
                        "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function",
                        "stack": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:217:43",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                          "column": 43,
                          "line": 217
                        },
                        "snippet": "  215 |     test(`${TEST_TAGS.priority.p1} should lock account after 5 failed login attempts`, async ({ page }) => {\n  216 |         const pkce = await generatePKCEPair();\n> 217 |         const state = generateRandomString(32);\n      |                                           ^\n  218 |\n  219 |         console.log('Starting account lockout test');\n  220 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                            "column": 43,
                            "line": 217
                          },
                          "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n\n  215 |     test(`${TEST_TAGS.priority.p1} should lock account after 5 failed login attempts`, async ({ page }) => {\n  216 |         const pkce = await generatePKCEPair();\n> 217 |         const state = generateRandomString(32);\n      |                                           ^\n  218 |\n  219 |         console.log('Starting account lockout test');\n  220 |\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:217:43"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:44.788Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--b8d52-ter-5-failed-login-attempts-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--b8d52-ter-5-failed-login-attempts-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--b8d52-ter-5-failed-login-attempts-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                        "column": 43,
                        "line": 217
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "b4e6dd03739022a930f2-9efc171d073e687c5770",
              "file": "oauth-security-p1.spec.ts",
              "line": 215,
              "column": 9
            },
            {
              "title": "@p1 should reject correct password during lockout period",
              "ok": false,
              "tags": [
                "p1"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 34,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 981,
                      "error": {
                        "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function",
                        "stack": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:271:43",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                          "column": 43,
                          "line": 271
                        },
                        "snippet": "  269 |     test(`${TEST_TAGS.priority.p1} should reject correct password during lockout period`, async ({ page }) => {\n  270 |         const pkce = await generatePKCEPair();\n> 271 |         const state = generateRandomString(32);\n      |                                           ^\n  272 |\n  273 |         const authorizeUrl = new URL(`${baseUrl}${API_ENDPOINTS.oauth.authorize}`);\n  274 |         authorizeUrl.searchParams.set('client_id', 'admin-portal-client');"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                            "column": 43,
                            "line": 271
                          },
                          "message": "TypeError: (0 , _testHelpers.generateRandomString) is not a function\n\n  269 |     test(`${TEST_TAGS.priority.p1} should reject correct password during lockout period`, async ({ page }) => {\n  270 |         const pkce = await generatePKCEPair();\n> 271 |         const state = generateRandomString(32);\n      |                                           ^\n  272 |\n  273 |         const authorizeUrl = new URL(`${baseUrl}${API_ENDPOINTS.oauth.authorize}`);\n  274 |         authorizeUrl.searchParams.set('client_id', 'admin-portal-client');\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:271:43"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:47.993Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--dc1fd-sword-during-lockout-period-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--dc1fd-sword-during-lockout-period-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--dc1fd-sword-during-lockout-period-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts",
                        "column": 43,
                        "line": 271
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "b4e6dd03739022a930f2-904f027276600915fb5a",
              "file": "oauth-security-p1.spec.ts",
              "line": 269,
              "column": 9
            },
            {
              "title": "@p1 should cache permissions for 5 minutes",
              "ok": false,
              "tags": [
                "p1"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 35,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 14797,
                      "error": {
                        "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}",
                        "stack": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:326:9",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 77
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 77
                          },
                          "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n\n   at helpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:326:9"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:23:51.586Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--9b00d-e-permissions-for-5-minutes-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--9b00d-e-permissions-for-5-minutes-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--9b00d-e-permissions-for-5-minutes-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 77
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "b4e6dd03739022a930f2-69968c9d15c8e1792eec",
              "file": "oauth-security-p1.spec.ts",
              "line": 324,
              "column": 9
            },
            {
              "title": "@p1 should invalidate cache immediately after permission change",
              "ok": false,
              "tags": [
                "p1"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 36,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 14660,
                      "error": {
                        "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}",
                        "stack": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:364:9",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 77
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 77
                          },
                          "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n\n   at helpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/oauth-security-p1.spec.ts:364:9"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:24:08.745Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--bea88-ely-after-permission-change-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--bea88-ely-after-permission-change-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/oauth-security-p1-OAuth-2--bea88-ely-after-permission-change-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 77
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "b4e6dd03739022a930f2-cb966ff0293197a464d4",
              "file": "oauth-security-p1.spec.ts",
              "line": 359,
              "column": 9
            }
          ]
        }
      ]
    },
    {
      "title": "role-permission-management.spec.ts",
      "file": "role-permission-management.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "Role and Permission Management",
          "file": "role-permission-management.spec.ts",
          "line": 22,
          "column": 6,
          "specs": [
            {
              "title": "should load and display role list",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 37,
                      "parallelIndex": 0,
                      "status": "timedOut",
                      "duration": 31288,
                      "error": {
                        "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m",
                        "stack": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:58:8",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 8,
                          "line": 58
                        },
                        "snippet": "  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 8,
                            "line": 58
                          },
                          "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n\n  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:58:8"
                        },
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 46,
                            "line": 39
                          },
                          "message": "Error: locator.click: Test timeout of 30000ms exceeded.\nCall log:\n\u001b[2m  - waiting for getByTestId('login-button')\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m      - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m      - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    2 × waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m      - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\n\n  37 |       await page.getByTestId('username-input').fill(testUsername);\n  38 |       await page.getByTestId('password-input').fill(testPassword);\n> 39 |       await page.getByTestId('login-button').click();\n     |                                              ^\n  40 |       await page.waitForURL(/.*/, { timeout: 10000 });\n  41 |     }\n  42 |\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:39:46)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:5"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:24:25.631Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-0aa3f--load-and-display-role-list-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-0aa3f--load-and-display-role-list-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-0aa3f--load-and-display-role-list-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-0aa3f--load-and-display-role-list-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 8,
                        "line": 58
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-cff6ec14ec1d731b1163",
              "file": "role-permission-management.spec.ts",
              "line": 66,
              "column": 7
            },
            {
              "title": "should show create role button with proper permissions",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 38,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1094,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:24:59.503Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-a9c33-ton-with-proper-permissions-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-a9c33-ton-with-proper-permissions-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-a9c33-ton-with-proper-permissions-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-a9c33-ton-with-proper-permissions-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-070413832ef013433b3b",
              "file": "role-permission-management.spec.ts",
              "line": 92,
              "column": 7
            },
            {
              "title": "should create a new role successfully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 39,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1333,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:02.956Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-16717-ate-a-new-role-successfully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-16717-ate-a-new-role-successfully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-16717-ate-a-new-role-successfully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-16717-ate-a-new-role-successfully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-1f71934560248f34cc0a",
              "file": "role-permission-management.spec.ts",
              "line": 108,
              "column": 7
            },
            {
              "title": "should edit an existing role successfully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 40,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1534,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:06.471Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-4a5c1--existing-role-successfully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-4a5c1--existing-role-successfully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-4a5c1--existing-role-successfully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-4a5c1--existing-role-successfully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-ed8af0cc2759ad14e46f",
              "file": "role-permission-management.spec.ts",
              "line": 149,
              "column": 7
            },
            {
              "title": "should delete a role with confirmation",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 41,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1401,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:10.190Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-6949c-te-a-role-with-confirmation-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-6949c-te-a-role-with-confirmation-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-6949c-te-a-role-with-confirmation-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-6949c-te-a-role-with-confirmation-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-0ffc25b52adcbebf2228",
              "file": "role-permission-management.spec.ts",
              "line": 185,
              "column": 7
            },
            {
              "title": "should open permissions editor for a role",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 42,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1305,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:13.900Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-573e6-rmissions-editor-for-a-role-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-573e6-rmissions-editor-for-a-role-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-573e6-rmissions-editor-for-a-role-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-573e6-rmissions-editor-for-a-role-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-bde7aa7f2023860d57bc",
              "file": "role-permission-management.spec.ts",
              "line": 233,
              "column": 7
            },
            {
              "title": "should cancel role creation without saving",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 43,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1373,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:17.387Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-40268-ole-creation-without-saving-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-40268-ole-creation-without-saving-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-40268-ole-creation-without-saving-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-40268-ole-creation-without-saving-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-9b32d85d8c99286e3e75",
              "file": "role-permission-management.spec.ts",
              "line": 269,
              "column": 7
            },
            {
              "title": "should validate required fields",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 44,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1374,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:20.880Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-884a1-ld-validate-required-fields-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-884a1-ld-validate-required-fields-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-884a1-ld-validate-required-fields-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-884a1-ld-validate-required-fields-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-8155df8073eed6da9820",
              "file": "role-permission-management.spec.ts",
              "line": 295,
              "column": 7
            },
            {
              "title": "should display all role table columns",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 45,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1537,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:24.401Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-c41b3-play-all-role-table-columns-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-c41b3-play-all-role-table-columns-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-c41b3-play-all-role-table-columns-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-c41b3-play-all-role-table-columns-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-af8667a6dbfb837899c8",
              "file": "role-permission-management.spec.ts",
              "line": 315,
              "column": 7
            },
            {
              "title": "should display all action buttons for each role",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 46,
                      "parallelIndex": 0,
                      "status": "timedOut",
                      "duration": 31212,
                      "error": {
                        "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m",
                        "stack": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:58:8",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 8,
                          "line": 58
                        },
                        "snippet": "  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 8,
                            "line": 58
                          },
                          "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n\n  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:58:8"
                        },
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 46,
                            "line": 39
                          },
                          "message": "Error: locator.click: Test timeout of 30000ms exceeded.\nCall log:\n\u001b[2m  - waiting for getByTestId('login-button')\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - done scrolling\u001b[22m\n\u001b[2m    2 × waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m      - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m      - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\n\n  37 |       await page.getByTestId('username-input').fill(testUsername);\n  38 |       await page.getByTestId('password-input').fill(testPassword);\n> 39 |       await page.getByTestId('login-button').click();\n     |                                              ^\n  40 |       await page.waitForURL(/.*/, { timeout: 10000 });\n  41 |     }\n  42 |\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:39:46)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:5"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:25:28.214Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-1a630-ction-buttons-for-each-role-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-1a630-ction-buttons-for-each-role-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-1a630-ction-buttons-for-each-role-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-1a630-ction-buttons-for-each-role-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 8,
                        "line": 58
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-f82d228dbc6ef94d80db",
              "file": "role-permission-management.spec.ts",
              "line": 332,
              "column": 7
            },
            {
              "title": "should create multiple roles successfully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 47,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1364,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:02.053Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-f233c-multiple-roles-successfully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-f233c-multiple-roles-successfully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-f233c-multiple-roles-successfully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-f233c-multiple-roles-successfully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-46ba6707d27163862f15",
              "file": "role-permission-management.spec.ts",
              "line": 346,
              "column": 7
            },
            {
              "title": "should paginate through role list",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 48,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1356,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/system/roles\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/system/roles\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${rolesRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:05.657Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-82a2b--paginate-through-role-list-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-82a2b--paginate-through-role-list-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-82a2b--paginate-through-role-list-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/role-permission-management-82a2b--paginate-through-role-list-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/role-permission-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "a2323d268f571a7d6cbd-028bc770752134150f35",
              "file": "role-permission-management.spec.ts",
              "line": 381,
              "column": 7
            }
          ]
        }
      ]
    },
    {
      "title": "token-lifecycle.spec.ts",
      "file": "token-lifecycle.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "Token Lifecycle",
          "file": "token-lifecycle.spec.ts",
          "line": 44,
          "column": 6,
          "specs": [
            {
              "title": "@p0 should issue tokens after authorization code exchange",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 49,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 4758,
                      "error": {
                        "message": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:69:29",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 20,
                          "line": 134
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 20,
                            "line": 134
                          },
                          "message": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n   at helpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:69:29"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:09.187Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-b6072-authorization-code-exchange-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-b6072-authorization-code-exchange-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-b6072-authorization-code-exchange-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-b6072-authorization-code-exchange-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 20,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-91b196b7109e3963b8fc",
              "file": "token-lifecycle.spec.ts",
              "line": 67,
              "column": 9
            },
            {
              "title": "@p0 should auto-refresh access token when expired",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 50,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 4711,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:112:32",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 20,
                          "line": 134
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 20,
                            "line": 134
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n   at helpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:112:32"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:16.185Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9547d-h-access-token-when-expired-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9547d-h-access-token-when-expired-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9547d-h-access-token-when-expired-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9547d-h-access-token-when-expired-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 20,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-a88ddc0d923cdf5bc17c",
              "file": "token-lifecycle.spec.ts",
              "line": 110,
              "column": 9
            },
            {
              "title": "@p0 should rotate refresh token after use",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 51,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 5044,
                      "error": {
                        "message": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:155:9",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 20,
                          "line": 134
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 20,
                            "line": 134
                          },
                          "message": "Error: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n   at helpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:155:9"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: page.goto: net::ERR_ABORTED at http://localhost:3002/admin\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:23.314Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f9934-ate-refresh-token-after-use-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f9934-ate-refresh-token-after-use-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f9934-ate-refresh-token-after-use-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f9934-ate-refresh-token-after-use-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 20,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-bd705a71e6d854d3a8a8",
              "file": "token-lifecycle.spec.ts",
              "line": 153,
              "column": 9
            },
            {
              "title": "@p0 should revoke refresh token on logout",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 52,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 6545,
                      "error": {
                        "message": "Error: Refresh token not found in storage",
                        "stack": "Error: Refresh token not found in storage\n    at getRefreshToken (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:182:15)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:223:30",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 15,
                          "line": 182
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:182\n\n  180 |\n  181 |     if (!token) {\n> 182 |         throw new Error('Refresh token not found in storage');\n      |               ^\n  183 |     }\n  184 |\n  185 |     return token;"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 15,
                            "line": 182
                          },
                          "message": "Error: Refresh token not found in storage\n\n   at helpers/test-helpers.ts:182\n\n  180 |\n  181 |     if (!token) {\n> 182 |         throw new Error('Refresh token not found in storage');\n      |               ^\n  183 |     }\n  184 |\n  185 |     return token;\n    at getRefreshToken (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:182:15)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:223:30"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        },
                        {
                          "text": "[Auth] 最终URL: http://localhost:6188/login?redirect=http%3A%2F%2Flocalhost%3A6188%2Fapi%2Fv2%2Foauth%2Fauthorize%3Fclient_id%3Dauth-center-admin-client%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A3002%252Fauth%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2Bprofile%2Bemail%26code_challenge%3DuvZLWV9Te0xRmLjirFntoVDeoEsHuwsqVR1Wzy1CN8c%26code_challenge_method%3DS256\n"
                        },
                        {
                          "text": "[Auth] OAuth登录成功\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:30.580Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f88eb-oke-refresh-token-on-logout-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f88eb-oke-refresh-token-on-logout-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f88eb-oke-refresh-token-on-logout-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f88eb-oke-refresh-token-on-logout-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 15,
                        "line": 182
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-2a89c7790ee30dc3f81f",
              "file": "token-lifecycle.spec.ts",
              "line": 220,
              "column": 9
            },
            {
              "title": "@p0 should revoke access token and reject API requests",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 53,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 14729,
                      "error": {
                        "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}",
                        "stack": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:264:29",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 77
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 77
                          },
                          "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n\n   at helpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:264:29"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:39.361Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-ce3b2-ken-and-reject-API-requests-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-ce3b2-ken-and-reject-API-requests-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-ce3b2-ken-and-reject-API-requests-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 77
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-0ecbaa9855c78d43287c",
              "file": "token-lifecycle.spec.ts",
              "line": 259,
              "column": 9
            },
            {
              "title": "@p0 should reject expired access token",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 54,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 14650,
                      "error": {
                        "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}",
                        "stack": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:306:29",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 77
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 77
                          },
                          "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n\n   at helpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:306:29"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:26:56.358Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f2ba5-reject-expired-access-token-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f2ba5-reject-expired-access-token-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-f2ba5-reject-expired-access-token-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 77
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-cc74600e4c8ef045e9dc",
              "file": "token-lifecycle.spec.ts",
              "line": 304,
              "column": 9
            },
            {
              "title": "@p0 should reload user permissions on token refresh",
              "ok": false,
              "tags": [
                "p0"
              ],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 55,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 14629,
                      "error": {
                        "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}",
                        "stack": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:353:9",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 19,
                          "line": 77
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 19,
                            "line": 77
                          },
                          "message": "Error: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n\n   at helpers/test-helpers.ts:77\n\n  75 |         if (!loginResponse!.ok) {\n  76 |             const errorText = await loginResponse!.text();\n> 77 |             throw new Error(`登录API失败 ${loginResponse!.status}: ${errorText.substring(0, 200)}`);\n     |                   ^\n  78 |         }\n  79 |\n  80 |         const loginData = await loginResponse!.json();\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:77:19)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:353:9"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: 登录API失败 429: {\"error\":\"Too many login attempts. Please try again in 5 minutes.\"}\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:27:13.180Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-54b08-ermissions-on-token-refresh-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-54b08-ermissions-on-token-refresh-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-54b08-ermissions-on-token-refresh-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 19,
                        "line": 77
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-e8dcc915abe1e58f3a7b",
              "file": "token-lifecycle.spec.ts",
              "line": 348,
              "column": 9
            },
            {
              "title": "should detect refresh token replay attack",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 56,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 18338,
                      "error": {
                        "message": "Error: page.goto: Navigation to \"http://localhost:3002/admin\" is interrupted by another navigation to \"http://localhost:3002/login\"\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: Navigation to \"http://localhost:3002/admin\" is interrupted by another navigation to \"http://localhost:3002/login\"\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:406:9",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                          "column": 20,
                          "line": 134
                        },
                        "snippet": "\u001b[90m   at \u001b[39mhelpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                            "column": 20,
                            "line": 134
                          },
                          "message": "Error: page.goto: Navigation to \"http://localhost:3002/admin\" is interrupted by another navigation to \"http://localhost:3002/login\"\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n\n   at helpers/test-helpers.ts:134\n\n  132 |         // 步骤 4: 导航到受保护路由\n  133 |         console.log(`[Auth] 导航到受保护路由: ${protectedResource}`);\n> 134 |         await page.goto(`${baseUrl}${protectedResource}`, {\n      |                    ^\n  135 |             waitUntil: 'load',\n  136 |             timeout: 15000\n  137 |         });\n    at completeOAuthLogin (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts:134:20)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/token-lifecycle.spec.ts:406:9"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "✓ Test isolation: All auth state cleared\n"
                        },
                        {
                          "text": "[Auth] 开始OAuth登录流程，用户: admin\n"
                        },
                        {
                          "text": "[Auth] 调用登录API: http://localhost:3001/api/v2/auth/login\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，4000ms 后重试 (1/3)\n"
                        },
                        {
                          "text": "[Auth] 遇到速率限制 (429)，8000ms 后重试 (2/3)\n"
                        },
                        {
                          "text": "[Auth] 登录API响应成功 { hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m, hasRedirectUrl: \u001b[33mtrue\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到应用程序以初始化上下文...\n"
                        },
                        {
                          "text": "[Auth] 在localStorage中设置tokens...\n"
                        },
                        {
                          "text": "[Auth] Token设置结果: { success: \u001b[33mtrue\u001b[39m, hasAccessToken: \u001b[33mfalse\u001b[39m, hasRefreshToken: \u001b[33mfalse\u001b[39m }\n"
                        },
                        {
                          "text": "[Auth] 导航到受保护路由: /admin\n"
                        }
                      ],
                      "stderr": [
                        {
                          "text": "[Auth] OAuth登录失败: page.goto: Navigation to \"http://localhost:3002/admin\" is interrupted by another navigation to \"http://localhost:3002/login\"\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin\", waiting until \"load\"\u001b[22m\n\n"
                        }
                      ],
                      "retry": 0,
                      "startTime": "2025-11-27T04:27:30.127Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9697a-refresh-token-replay-attack-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9697a-refresh-token-replay-attack-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9697a-refresh-token-replay-attack-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/token-lifecycle-Token-Life-9697a-refresh-token-replay-attack-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/helpers/test-helpers.ts",
                        "column": 20,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "5ca656a2a686cc964bd5-ce3d7aada297eb89c06e",
              "file": "token-lifecycle.spec.ts",
              "line": 404,
              "column": 9
            }
          ]
        }
      ]
    },
    {
      "title": "user-management.spec.ts",
      "file": "user-management.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "User Management",
          "file": "user-management.spec.ts",
          "line": 22,
          "column": 6,
          "specs": [
            {
              "title": "should load and display user list",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 57,
                      "parallelIndex": 0,
                      "status": "timedOut",
                      "duration": 31612,
                      "error": {
                        "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m",
                        "stack": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:58:8",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 8,
                          "line": 58
                        },
                        "snippet": "  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 8,
                            "line": 58
                          },
                          "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n\n  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:58:8"
                        },
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 46,
                            "line": 39
                          },
                          "message": "Error: locator.click: Test timeout of 30000ms exceeded.\nCall log:\n\u001b[2m  - waiting for getByTestId('login-button')\u001b[22m\n\u001b[2m    2 × waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m      - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m      - done scrolling\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    4 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\n\n  37 |       await page.getByTestId('username-input').fill(testUsername);\n  38 |       await page.getByTestId('password-input').fill(testPassword);\n> 39 |       await page.getByTestId('login-button').click();\n     |                                              ^\n  40 |       await page.waitForURL(/.*/, { timeout: 10000 });\n  41 |     }\n  42 |\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:39:46)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:5"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:27:50.709Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-9b74f--load-and-display-user-list-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-9b74f--load-and-display-user-list-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-9b74f--load-and-display-user-list-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-9b74f--load-and-display-user-list-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 8,
                        "line": 58
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-6029f0fc1175fafcbbdf",
              "file": "user-management.spec.ts",
              "line": 66,
              "column": 7
            },
            {
              "title": "should show create user button with proper permissions",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 58,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1435,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:28:24.822Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-564de-ton-with-proper-permissions-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-564de-ton-with-proper-permissions-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-564de-ton-with-proper-permissions-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-564de-ton-with-proper-permissions-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-9da41d838d3b8ed7fc7a",
              "file": "user-management.spec.ts",
              "line": 91,
              "column": 7
            },
            {
              "title": "should create a new user successfully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 59,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1422,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:28:28.575Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-e5450-ate-a-new-user-successfully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-e5450-ate-a-new-user-successfully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-e5450-ate-a-new-user-successfully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-e5450-ate-a-new-user-successfully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-d6bba53070c852797b32",
              "file": "user-management.spec.ts",
              "line": 107,
              "column": 7
            },
            {
              "title": "should edit an existing user successfully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 60,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1419,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:28:32.185Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d9f14--existing-user-successfully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d9f14--existing-user-successfully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d9f14--existing-user-successfully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d9f14--existing-user-successfully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-bdf970902c2f382444bb",
              "file": "user-management.spec.ts",
              "line": 139,
              "column": 7
            },
            {
              "title": "should delete a user with confirmation",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 61,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1225,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:28:35.752Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-a8161-te-a-user-with-confirmation-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-a8161-te-a-user-with-confirmation-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-a8161-te-a-user-with-confirmation-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-a8161-te-a-user-with-confirmation-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-3c8133d78d6e483b3be8",
              "file": "user-management.spec.ts",
              "line": 180,
              "column": 7
            },
            {
              "title": "should cancel user creation without saving",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 62,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1339,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:28:39.152Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-3e6d4-ser-creation-without-saving-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-3e6d4-ser-creation-without-saving-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-3e6d4-ser-creation-without-saving-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-3e6d4-ser-creation-without-saving-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-9e9ef0da67159561018e",
              "file": "user-management.spec.ts",
              "line": 223,
              "column": 7
            },
            {
              "title": "should validate required fields",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 63,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1530,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:28:42.653Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-29e85-ld-validate-required-fields-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-29e85-ld-validate-required-fields-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-29e85-ld-validate-required-fields-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-29e85-ld-validate-required-fields-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-ef2ea71eaa1a43b92339",
              "file": "user-management.spec.ts",
              "line": 248,
              "column": 7
            },
            {
              "title": "should paginate through user list",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 64,
                      "parallelIndex": 0,
                      "status": "timedOut",
                      "duration": 31341,
                      "error": {
                        "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m",
                        "stack": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:58:8",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 8,
                          "line": 58
                        },
                        "snippet": "  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 8,
                            "line": 58
                          },
                          "message": "\u001b[31mTest timeout of 30000ms exceeded while running \"beforeEach\" hook.\u001b[39m\n\n  56 |   }\n  57 |\n> 58 |   test.beforeEach(async ({ page }) => {\n     |        ^\n  59 |     await authenticate(page);\n  60 |   });\n  61 |\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:58:8"
                        },
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 46,
                            "line": 39
                          },
                          "message": "Error: locator.click: Test timeout of 30000ms exceeded.\nCall log:\n\u001b[2m  - waiting for getByTestId('login-button')\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - done scrolling\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m  - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    3 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    - locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m  - attempting click action\u001b[22m\n\u001b[2m    - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element is visible, enabled and stable\u001b[22m\n\u001b[2m    - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m      - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m      - element is visible, enabled and stable\u001b[22m\n\u001b[2m      - scrolling into view if needed\u001b[22m\n\u001b[2m    - waiting for\" http://localhost:6188/login\" navigation to finish...\u001b[22m\n\u001b[2m    - navigated to \"http://localhost:6188/login\"\u001b[22m\n\u001b[2m    2 × locator resolved to <button type=\"submit\" data-testid=\"login-button\" class=\"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 hover:bg-blue-700 text-white h-10 px-4 py-2\">登录</button>\u001b[22m\n\u001b[2m    - attempting click action\u001b[22m\n\u001b[2m      - waiting for element to be visible, enabled and stable\u001b[22m\n\u001b[2m    - element was detached from the DOM, retrying\u001b[22m\n\n\n  37 |       await page.getByTestId('username-input').fill(testUsername);\n  38 |       await page.getByTestId('password-input').fill(testPassword);\n> 39 |       await page.getByTestId('login-button').click();\n     |                                              ^\n  40 |       await page.waitForURL(/.*/, { timeout: 10000 });\n  41 |     }\n  42 |\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:39:46)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:5"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:28:46.320Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-c8b62--paginate-through-user-list-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-c8b62--paginate-through-user-list-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-c8b62--paginate-through-user-list-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-c8b62--paginate-through-user-list-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 8,
                        "line": 58
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-9716ebc093d52dc69d88",
              "file": "user-management.spec.ts",
              "line": 269,
              "column": 7
            },
            {
              "title": "should create multiple users successfully",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 65,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1218,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:29:20.170Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-7a697-multiple-users-successfully-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-7a697-multiple-users-successfully-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-7a697-multiple-users-successfully-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-7a697-multiple-users-successfully-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-9cd9f7bf184f5a7e8196",
              "file": "user-management.spec.ts",
              "line": 314,
              "column": 7
            },
            {
              "title": "should display correct user data in table",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "Desktop Chrome",
                  "projectName": "Desktop Chrome",
                  "results": [
                    {
                      "workerIndex": 66,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 1389,
                      "error": {
                        "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n",
                        "stack": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11",
                        "location": {
                          "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                          "column": 16,
                          "line": 32
                        },
                        "snippet": "  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                            "column": 16,
                            "line": 32
                          },
                          "message": "Error: page.goto: net::ERR_HTTP_RESPONSE_CODE_FAILURE at http://localhost:3002/admin/users\nCall log:\n\u001b[2m  - navigating to \"http://localhost:3002/admin/users\", waiting until \"load\"\u001b[22m\n\n\n  30 |    */\n  31 |   async function authenticate(page: Page) {\n> 32 |     await page.goto(`${baseUrl}${usersRoute}`);\n     |                ^\n  33 |     await page.waitForURL(/.*/, { timeout: 5000 });\n  34 |\n  35 |     // If redirected to login, complete authentication\n    at authenticate (/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:32:16)\n    at /Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts:59:11"
                        }
                      ],
                      "stdout": [],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-11-27T04:29:23.617Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d05b9--correct-user-data-in-table-Desktop-Chrome/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d05b9--correct-user-data-in-table-Desktop-Chrome/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d05b9--correct-user-data-in-table-Desktop-Chrome/error-context.md"
                        },
                        {
                          "name": "trace",
                          "contentType": "application/zip",
                          "path": "/Users/liushuo/code/ts-next-template/apps/admin-portal/test-results/user-management-User-Manag-d05b9--correct-user-data-in-table-Desktop-Chrome/trace.zip"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/liushuo/code/ts-next-template/apps/admin-portal/tests/e2e/user-management.spec.ts",
                        "column": 16,
                        "line": 32
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "43a5413b2d4cd77ef4f1-f55c1b81c8b2f62b2bfc",
              "file": "user-management.spec.ts",
              "line": 344,
              "column": 7
            }
          ]
        }
      ]
    }
  ],
  "errors": [],
  "stats": {
    "startTime": "2025-11-27T04:19:28.187Z",
    "duration": 597995.123,
    "expected": 2,
    "skipped": 0,
    "unexpected": 67,
    "flaky": 0
  }
}