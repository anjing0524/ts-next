# ç¬¬äºŒé˜¶æ®µï¼šå‘½åè§„èŒƒåŒ–æ‰§è¡Œæ–¹æ¡ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-01-27  
> **æœ€åæ›´æ–°**: 2025-01-27  
> **æ–‡æ¡£çŠ¶æ€**: æ‰§è¡Œä¸­  
> **è´Ÿè´£äºº**: AI Assistant

## æ–‡æ¡£æ‘˜è¦

æœ¬æ–‡æ¡£è¯¦ç»†è§„åˆ’ç¬¬äºŒé˜¶æ®µçš„å‘½åè§„èŒƒåŒ–å·¥ä½œï¼ŒåŸºäº2025å¹´TypeScriptæœ€ä½³å®è·µï¼Œå°†é¡¹ç›®ä¸­çš„æ–‡ä»¶ã€å‡½æ•°ã€ç±»ç­‰å‘½åç»Ÿä¸€ä¸ºç°ä»£åŒ–çš„å‘½åè§„èŒƒã€‚

## ç›®å½•

- [1. è§„èŒƒåŒ–ç›®æ ‡](#1-è§„èŒƒåŒ–ç›®æ ‡)
- [2. å‘½åè§„èŒƒæ ‡å‡†](#2-å‘½åè§„èŒƒæ ‡å‡†)
- [3. å½“å‰çŠ¶æ€åˆ†æ](#3-å½“å‰çŠ¶æ€åˆ†æ)
- [4. æ‰§è¡Œè®¡åˆ’](#4-æ‰§è¡Œè®¡åˆ’)
- [5. é£é™©è¯„ä¼°](#5-é£é™©è¯„ä¼°)

## 1. è§„èŒƒåŒ–ç›®æ ‡

### 1.1 ä¸»è¦ç›®æ ‡
- **æ–‡ä»¶å‘½åç»Ÿä¸€**: æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨ kebab-case å‘½å
- **è·¨å¹³å°å…¼å®¹**: é¿å…å¤§å°å†™æ•æ„Ÿå¯¼è‡´çš„éƒ¨ç½²é—®é¢˜
- **å¯è¯»æ€§æå‡**: é•¿æ–‡ä»¶åæ›´æ˜“é˜…è¯»å’Œç†è§£
- **ä¸€è‡´æ€§ä¿è¯**: æ•´ä¸ªé¡¹ç›®é‡‡ç”¨ç»Ÿä¸€çš„å‘½åæ ‡å‡†

### 1.2 é¢„æœŸæ”¶ç›Š
- å‡å°‘è·¨å¹³å°éƒ¨ç½²é—®é¢˜
- æé«˜ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§
- ç¬¦åˆç°ä»£Webå¼€å‘æœ€ä½³å®è·µ
- æ”¹å–„å›¢é˜Ÿåä½œæ•ˆç‡

## 2. å‘½åè§„èŒƒæ ‡å‡†

### 2.1 æ–‡ä»¶å‘½åè§„èŒƒ (kebab-case)
```
âœ… æ­£ç¡®ç¤ºä¾‹:
- user-profile.tsx
- oauth-service.ts
- jwt-utils.ts
- rate-limit-middleware.ts

âŒ é”™è¯¯ç¤ºä¾‹:
- UserProfile.tsx
- oauthService.ts
- jwtUtils.ts
- rateLimitMiddleware.ts
```

### 2.2 ç»„ä»¶å‘½åè§„èŒƒ (PascalCase)
```typescript
// æ–‡ä»¶: user-profile.tsx
export default function UserProfile() {
  return <div>ç”¨æˆ·èµ„æ–™</div>;
}

// å¯¼å…¥æ—¶ä¿æŒç»„ä»¶åä¸º PascalCase
import UserProfile from './user-profile';
```

### 2.3 å‡½æ•°å‘½åè§„èŒƒ (camelCase)
```typescript
// âœ… æ­£ç¡®
function getUserProfile() {}
const verifyToken = () => {}
async function generateAccessToken() {}

// âŒ é”™è¯¯
function GetUserProfile() {}
function verify_token() {}
function GenerateAccessToken() {}
```

### 2.4 ç±»å‘½åè§„èŒƒ (PascalCase)
```typescript
// âœ… æ­£ç¡®
class JWTUtils {}
class AuthService {}
class RateLimitMiddleware {}

// âŒ é”™è¯¯
class jwtUtils {}
class authService {}
class rate_limit_middleware {}
```

### 2.5 å¸¸é‡å‘½åè§„èŒƒ (SCREAMING_SNAKE_CASE)
```typescript
// âœ… æ­£ç¡®
const API_BASE_URL = 'https://api.example.com';
const TOKEN_EXPIRY_TIME = 3600;
const DEFAULT_RATE_LIMIT = 100;

// âŒ é”™è¯¯
const apiBaseUrl = 'https://api.example.com';
const tokenExpiryTime = 3600;
const defaultRateLimit = 100;
```

### 2.6 æ¥å£å’Œç±»å‹å‘½åè§„èŒƒ (PascalCase)
```typescript
// âœ… æ­£ç¡®
interface UserProfile {
  id: string;
  name: string;
}

type TokenType = 'access' | 'refresh';

// âŒ é”™è¯¯
interface userProfile {}
type token_type = 'access' | 'refresh';
```

## 3. å½“å‰çŠ¶æ€åˆ†æ

### 3.1 ç¬¦åˆè§„èŒƒçš„æ–‡ä»¶ âœ…
ç»è¿‡åˆ†æï¼Œä»¥ä¸‹æ–‡ä»¶å·²ç»ç¬¦åˆ kebab-case è§„èŒƒï¼š

**OAuth Service è®¤è¯ç›¸å…³**:
```
apps/oauth-service/lib/auth/
â”œâ”€â”€ authorization-code-flow.ts      âœ…
â”œâ”€â”€ client-credentials-flow.ts      âœ…
â”œâ”€â”€ oauth2.ts                       âœ…
â”œâ”€â”€ oauth2-errors.ts                âœ…
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ authorization-utils.ts      âœ…
â”‚   â”œâ”€â”€ client-auth-utils.ts        âœ…
â”‚   â””â”€â”€ password-utils.ts           âœ…
â””â”€â”€ middleware/
    â”œâ”€â”€ bearer-auth.ts              âœ…
    â”œâ”€â”€ cors.ts                     âœ…
    â”œâ”€â”€ rate-limit.ts               âœ…
    â””â”€â”€ validation.ts               âœ…
```

**Lib åŒ…å…±äº«ä»£ç **:
```
packages/lib/src/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ jwt-utils.ts                âœ…
â”‚   â”œâ”€â”€ pkce-utils.ts               âœ…
â”‚   â”œâ”€â”€ scope-utils.ts              âœ…
â”‚   â””â”€â”€ password-utils.ts           âœ…
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ rate-limit-utils.ts         âœ…
â”‚   â”œâ”€â”€ error-handler.ts            âœ…
â”‚   â””â”€â”€ time-wheel.ts               âœ…
â””â”€â”€ services/
    â””â”€â”€ rbac-service.ts             âœ…
```

**æµ‹è¯•æ–‡ä»¶**:
```
__tests__/
â”œâ”€â”€ lib/auth/authorization-utils.test.ts    âœ…
â”œâ”€â”€ integration/oauth2-flow.test.ts         âœ…
â””â”€â”€ api/v2/oauth/userinfo/route.test.ts     âœ…
```

### 3.2 éœ€è¦é‡å‘½åçš„æ–‡ä»¶ ğŸ”„

**React Hooks** (éœ€è¦ä» camelCase æ”¹ä¸º kebab-case):
```
hooks/
â”œâ”€â”€ useAuth.ts                      â†’ use-auth.ts
```

**ç±»å‹å®šä¹‰æ–‡ä»¶**:
```
types/
â”œâ”€â”€ db-types.ts                     âœ… (å·²ç¬¦åˆè§„èŒƒ)
```

**æ ¹ç›®å½•æ–‡ä»¶** (å¤šæ•°å·²ç¬¦åˆè§„èŒƒ):
```
æ ¹ç›®å½•æ–‡ä»¶åˆ†æ:
â”œâ”€â”€ jest.config.js                  âœ…
â”œâ”€â”€ next.config.ts                  âœ…
â”œâ”€â”€ turbo.json                      âœ…
â”œâ”€â”€ tsconfig.json                   âœ…
â”œâ”€â”€ package.json                    âœ…
â””â”€â”€ commitlint.config.js            âœ…
```

### 3.3 å‡½æ•°å’Œç±»å‘½åæ£€æŸ¥

**éœ€è¦æ£€æŸ¥çš„æ½œåœ¨é—®é¢˜**:
1. ğŸ” éªŒè¯æ‰€æœ‰å‡½æ•°ä½¿ç”¨ camelCase
2. ğŸ” éªŒè¯æ‰€æœ‰ç±»ä½¿ç”¨ PascalCase
3. ğŸ” éªŒè¯æ‰€æœ‰å¸¸é‡ä½¿ç”¨ SCREAMING_SNAKE_CASE
4. ğŸ” éªŒè¯æ‰€æœ‰æ¥å£ä½¿ç”¨ PascalCase

## 4. æ‰§è¡Œè®¡åˆ’

### 4.1 Phase 1: æ–‡ä»¶é‡å‘½å (å½±å“è¾ƒå°)

#### ä»»åŠ¡ 1.1: é‡å‘½å React Hooks
```bash
# é‡å‘½åæ–‡ä»¶
hooks/useAuth.ts â†’ hooks/use-auth.ts

# éœ€è¦æ›´æ–°çš„å¯¼å…¥å¼•ç”¨ (é¢„ä¼°)
- å¯èƒ½åœ¨ç»„ä»¶æ–‡ä»¶ä¸­ä½¿ç”¨
- éœ€è¦æœç´¢å¹¶æ›´æ–°æ‰€æœ‰å¼•ç”¨
```

#### ä»»åŠ¡ 1.2: éªŒè¯å…¶ä»–æ–‡ä»¶å‘½å
- âœ… æ£€æŸ¥ `apps/` ç›®å½•ä¸‹æ‰€æœ‰æœåŠ¡çš„æ–‡ä»¶å‘½å
- âœ… æ£€æŸ¥ `packages/` ç›®å½•ä¸‹æ‰€æœ‰åŒ…çš„æ–‡ä»¶å‘½å
- âœ… ç¡®è®¤æ²¡æœ‰é—æ¼çš„ PascalCase æˆ– camelCase æ–‡ä»¶

### 4.2 Phase 2: å‡½æ•°å’Œç±»å‘½åè§„èŒƒåŒ–

#### ä»»åŠ¡ 2.1: å‡½æ•°å‘½åæ£€æŸ¥
```typescript
// ç¤ºä¾‹ï¼šéœ€è¦æ£€æŸ¥çš„æ¨¡å¼
// æœç´¢æ¨¡å¼: function [A-Z][a-zA-Z]*\(
// æœç´¢æ¨¡å¼: const [A-Z][a-zA-Z]* = 
// æœç´¢æ¨¡å¼: async function [A-Z][a-zA-Z]*\(

// ç¡®ä¿æ‰€æœ‰å‡½æ•°ä½¿ç”¨ camelCase:
function getUserData() {}     // âœ… æ­£ç¡®
function GetUserData() {}     // âŒ éœ€è¦ä¿®æ­£ä¸º getUserData
```

#### ä»»åŠ¡ 2.2: ç±»å‘½åæ£€æŸ¥
```typescript
// æœç´¢æ¨¡å¼: class [a-z][a-zA-Z]*
// æœç´¢æ¨¡å¼: interface [a-z][a-zA-Z]*

// ç¡®ä¿æ‰€æœ‰ç±»ä½¿ç”¨ PascalCase:
class AuthService {}          // âœ… æ­£ç¡®
class authService {}          // âŒ éœ€è¦ä¿®æ­£ä¸º AuthService
```

#### ä»»åŠ¡ 2.3: å¸¸é‡å‘½åæ£€æŸ¥
```typescript
// æœç´¢æ¨¡å¼: const [a-z][a-zA-Z]* = 
// æ’é™¤å‡½æ•°å’Œå¯¹è±¡

// ç¡®ä¿é…ç½®å¸¸é‡ä½¿ç”¨ SCREAMING_SNAKE_CASE:
const API_BASE_URL = '';      // âœ… æ­£ç¡®
const apiBaseUrl = '';        // âŒ éœ€è¦ä¿®æ­£ï¼ˆå¦‚æœæ˜¯å¸¸é‡ï¼‰
```

### 4.3 Phase 3: å¯¼å…¥è·¯å¾„æ›´æ–°

#### ä»»åŠ¡ 3.1: æ›´æ–°æ–‡ä»¶å¯¼å…¥
```typescript
// é‡å‘½ååéœ€è¦æ›´æ–°çš„å¯¼å…¥ç¤ºä¾‹
// æ—§çš„å¯¼å…¥
import { useAuth } from '@/hooks/useAuth';

// æ–°çš„å¯¼å…¥  
import { useAuth } from '@/hooks/use-auth';
```

#### ä»»åŠ¡ 3.2: éªŒè¯å¯¼å…¥å®Œæ•´æ€§
- è¿è¡Œ TypeScript ç¼–è¯‘æ£€æŸ¥
- ç¡®ä¿æ‰€æœ‰å¯¼å…¥è·¯å¾„æ­£ç¡®
- è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½ä¸å—å½±å“

## 5. é£é™©è¯„ä¼°

### 5.1 é£é™©ç­‰çº§åˆ†æ

| é£é™©ç­‰çº§ | é£é™©æè¿° | æ¦‚ç‡ | å½±å“åº¦ | ç¼“è§£æªæ–½ |
|---------|----------|------|--------|----------|
| **ä½** | æ–‡ä»¶é‡å‘½åå¯¼è‡´å¯¼å…¥é”™è¯¯ | ä¸­ | ä½ | ç³»ç»Ÿæ€§æ›´æ–°æ‰€æœ‰å¼•ç”¨ |
| **ä½** | Gitå†å²è®°å½•å½±å“ | é«˜ | ä½ | ä½¿ç”¨ git mv ä¿æŒå†å² |
| **ä¸­** | å‡½æ•°é‡å‘½åå½±å“APIå…¼å®¹æ€§ | ä½ | ä¸­ | è°¨æ…é€‰æ‹©é‡å‘½åèŒƒå›´ |
| **ä½** | æµ‹è¯•æ–‡ä»¶éœ€è¦åŒæ­¥æ›´æ–° | ä¸­ | ä½ | åŒæ­¥æ›´æ–°æµ‹è¯•å¯¼å…¥ |

### 5.2 ç¼“è§£ç­–ç•¥

1. **æ¸è¿›å¼é‡æ„**: åˆ†é˜¶æ®µæ‰§è¡Œï¼Œæ¯ä¸ªé˜¶æ®µéªŒè¯
2. **è‡ªåŠ¨åŒ–æ£€æµ‹**: ä½¿ç”¨è„šæœ¬æ£€æµ‹å‘½åä¸è§„èŒƒçš„ä»£ç 
3. **æµ‹è¯•ä¿éšœ**: æ¯æ¬¡ä¿®æ”¹åè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
4. **å›æ»šå‡†å¤‡**: å‡†å¤‡å›æ»šæ–¹æ¡ˆä»¥å¤‡ä¸‡ä¸€

## 6. æ‰§è¡Œæ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | çŠ¶æ€ |
|------|------|----------|------|
| 1 | æ–‡ä»¶é‡å‘½å | 30åˆ†é’Ÿ | ğŸ“‹ å¾…æ‰§è¡Œ |
| 2 | å‡½æ•°ç±»å‘½åæ£€æŸ¥ | 45åˆ†é’Ÿ | ğŸ“‹ å¾…æ‰§è¡Œ |
| 3 | å¯¼å…¥è·¯å¾„æ›´æ–° | 30åˆ†é’Ÿ | ğŸ“‹ å¾…æ‰§è¡Œ |
| 4 | æµ‹è¯•éªŒè¯ | 30åˆ†é’Ÿ | ğŸ“‹ å¾…æ‰§è¡Œ |

**æ€»è®¡**: çº¦ 2 å°æ—¶ 15 åˆ†é’Ÿ

## 7. éªŒæ”¶æ ‡å‡†

- [ ] æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨ kebab-case å‘½å
- [ ] æ‰€æœ‰å‡½æ•°ä½¿ç”¨ camelCase å‘½å
- [ ] æ‰€æœ‰ç±»ä½¿ç”¨ PascalCase å‘½å
- [ ] æ‰€æœ‰å¸¸é‡ä½¿ç”¨ SCREAMING_SNAKE_CASE å‘½å
- [ ] æ‰€æœ‰å¯¼å…¥è·¯å¾„æ­£ç¡®
- [ ] TypeScript ç¼–è¯‘æ— é”™è¯¯
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡

## 8. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œ
1. ğŸ”§ å¼€å§‹æ–‡ä»¶é‡å‘½åä»»åŠ¡
2. ğŸ” è¿è¡Œå‘½åè§„èŒƒæ£€æŸ¥è„šæœ¬
3. ğŸ“ æ›´æ–°å¯¼å…¥è·¯å¾„
4. âœ… æ‰§è¡Œæµ‹è¯•éªŒè¯

### åç»­è§„åˆ’
1. ğŸ“‹ å‡†å¤‡ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å—ç»“æ„ç»Ÿä¸€
2. ğŸš€ æ‰§è¡Œä¸­é—´ä»¶å’ŒæœåŠ¡è¿ç§»
3. ğŸ“– æ›´æ–°ç›¸å…³æ–‡æ¡£

---

*æ–‡æ¡£åˆ›å»ºæ—¶é—´: 2025-01-27*  
*æ‰§è¡Œè´Ÿè´£äºº: AI Assistant*  
*å®¡æ ¸çŠ¶æ€: ç­‰å¾…æ‰§è¡Œç¡®è®¤* 